"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[948],{61:(S,h,i)=>{i.d(h,{o:()=>u});class u{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.id_conta="",this.id_conta_versao="0101",this.id_subconta="",this.id_subcliente=0,this.id_resp=0,this.id_exec=0,this.id_motivo="",this.produtivo="",this.inicial="",this.final="",this.obs="",this.horasapon=0,this.encerramento="N",this.nlanc=0,this.user_insert=0,this.user_update=0,this.conta_descricao="",this.grupo_descricao="",this.estru_descricao="",this.resp_razao="",this.exec_razao="",this.proj_descricao="",this.motivo_descricao="",this.motivo_produtivo="",this.ativ_inicial="",this.ativ_final="",this.cli_razao=""}}},191:(S,h,i)=>{i.r(h),i.d(h,{FeriadoModule:()=>K});var u=i(8583),d=i(4655),m=i(9243),P=i(9071),g=i(1441),v=i(320),A=i(5062),C=i(3032),f=i(3430),n=i(7117),a=i(7716),c=i(3679),T=i(1558),F=i(789),O=i(7006),_=i(5626),q=i(1841);let x=(()=>{class r{constructor(e){this.http=e}getFeriados(e){return this.http.get(`https://brasilapi.com.br/api/feriados/v1/${e}`)}}return r.\u0275fac=function(e){return new(e||r)(a.LFG(q.eN))},r.\u0275prov=a.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var j=i(2522),B=i(3968),U=i(1095),N=i(1436),J=i(6627),b=i(8295),y=i(7441),I=i(9983),E=i(2458),D=i(7234),M=i(5090),R=i(5224);function z(r,l){if(1&r&&(a.TgZ(0,"mat-option",19),a._uU(1),a.qZA()),2&r){const e=l.$implicit;a.Q6J("value",e),a.xp6(1),a.hij(" ",e," ")}}function Y(r,l){if(1&r&&(a.TgZ(0,"mat-option",19),a._uU(1),a.qZA()),2&r){const e=l.$implicit;a.Q6J("value",e),a.xp6(1),a.hij(" ",e," ")}}function Q(r,l){if(1&r){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"div"),a.TgZ(3,"mat-label",20),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"td"),a.TgZ(6,"div"),a.TgZ(7,"mat-label",20),a._uU(8),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"td"),a.TgZ(10,"div"),a.TgZ(11,"mat-label",20),a._uU(12),a.ALo(13,"feriadoTipo"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"td"),a.TgZ(15,"div"),a.TgZ(16,"mat-label",20),a._uU(17),a.ALo(18,"feriadoNivel"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(19,"td"),a.TgZ(20,"div"),a.TgZ(21,"mat-label",20),a._uU(22),a.qZA(),a.qZA(),a.qZA(),a.TgZ(23,"td",21),a.TgZ(24,"barra-acoes",22),a.NdJ("changeOpcao",function(o){const p=a.CHM(e).$implicit;return a.oxw().escolha(o,p)}),a.qZA(),a.qZA(),a.qZA()}if(2&r){const e=l.$implicit;a.xp6(4),a.Oqu(e.data),a.xp6(4),a.AsE("",e.id_usuario,"-",e.usu_nome,""),a.xp6(4),a.AsE("",e.id_tipo,"-",a.lcZ(13,10,e.id_tipo),""),a.xp6(5),a.AsE("",e.id_nivel,"-",a.lcZ(18,12,e.id_nivel),""),a.xp6(5),a.Oqu(e.descricao),a.xp6(2),a.Q6J("BARRA_ATIVIDADES",!1)("EXCLUIR",!1)}}const $=[{path:"",redirectTo:"feriados",pathMatch:"full"},{path:"feriados",component:(()=>{class r{constructor(e,t,o,s,p,Z,k,H){this.formBuilder=e,this.feriadoService=t,this.router=o,this.route=s,this.appSnackBar=p,this.globalService=Z,this.parametrosService=k,this.apiBrasilService=H,this.lsFeriados=[],this.feriados=[],this.erro="",this.opcoesOrdenacao=[],this.opcoesCampo=[],this.tamPagina=50,this.controlePaginas=new f.e(this.tamPagina,0),this.retorno=!1,this.parametro=new g.M,this.parametros=e.group({ordenacao:[null],campo:[null],filtro:[null]}),this.inscricaoRota=s.params.subscribe(X=>{void 0===X.retorno?this.retorno=!1:(this.retorno=!0,this.globalService.estadoFind("feriado"))}),this.loadParametros()}ngOnInit(){this.getFeriadosContador()}ngOnDestroy(){var e,t,o,s,p;null===(e=this.inscricaoGetAll)||void 0===e||e.unsubscribe(),null===(t=this.inscricaoParametro)||void 0===t||t.unsubscribe(),null===(o=this.inscricaoRota)||void 0===o||o.unsubscribe(),null===(s=this.inscricaoApiBrasil)||void 0===s||s.unsubscribe(),null===(p=this.inscricaoSaveFeriado)||void 0===p||p.unsubscribe()}escolha(e,t){if(void 0!==t){let o=this.parametro.getParametro();Object(o).new=!1,Object(o).id_retorno=t.data.toString(),Object(o).page=this.controlePaginas.getPaginalAtual(),Object(o).op_ordenacao=this.opcoesOrdenacao.findIndex(s=>this.parametros.value.ordenacao==s),Object(o).op_pesquisar=this.opcoesCampo.findIndex(s=>this.parametros.value.campo==s),Object(o).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(o),this.globalService.estadoSave(this.parametro),this.router.navigate(["/feriados/feriado",t.id_empresa,t.id_usuario,t.id_tipo,t.data,e])}else{let o=this.parametro.getParametro();Object(o).new=!1,Object(o).id_retorno=0,Object(o).page=this.controlePaginas.getPaginalAtual(),Object(o).op_ordenacao=this.opcoesOrdenacao.findIndex(s=>this.parametros.value.ordenacao==s),Object(o).op_pesquisar=this.opcoesCampo.findIndex(s=>this.parametros.value.campo==s),Object(o).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(o),this.globalService.estadoSave(this.parametro),this.router.navigate(["/feriados/feriado",1,0,e])}}getAcoes(){return C.I}getFeriados(){let e=new v.$;e.id_empresa=1,e.orderby="Data","Data"==this.parametros.value.campo&&(e.data=this.parametros.value.filtro),"Descri\xe7\xe3o"==this.parametros.value.campo&&(e.descricao=this.parametros.value.filtro.toUpperCase()),e.orderby=this.parametros.value.ordenacao,e.contador="N",e.tamPagina=this.tamPagina,e.pagina=this.controlePaginas.getPaginalAtual(),this.globalService.setSpin(!0),this.inscricaoGetAll=this.feriadoService.getFeriados_01(e).subscribe(t=>{this.globalService.setSpin(!1),this.feriados=t;const o=this.feriados.findIndex(p=>p.data==(0,n.SL)(this.parametro.getParametro(),"id_retorno"));setTimeout(()=>this.viewPort.scrollToIndex(o),10),this.retorno=!1;let s=this.parametro.getParametro();Object(s).id_retorno=0,Object(s).new=!1,this.parametro.parametro=JSON.stringify(s)},t=>{let o=this.parametro.getParametro();Object(o).id_retorno=0,Object(o).new=!1,this.retorno=!1,this.globalService.setSpin(!1),this.feriados=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,n.bZ)(t)}`,"OK")})}getFeriadosContador(){let e=new v.$;e.id_empresa=1,e.orderby="Data","Data"==this.parametros.value.campo&&(e.data=this.parametros.value.filtro),"Descri\xe7\xe3o"==this.parametros.value.campo&&(e.descricao=this.parametros.value.filtro.toUpperCase()),e.orderby=this.parametros.value.ordenacao,e.contador="S",e.tamPagina=this.tamPagina,this.globalService.setSpin(!0),this.inscricaoGetAll=this.feriadoService.getFeriados_01(e).subscribe(t=>{if(this.globalService.setSpin(!1),this.controlePaginas=new f.e(this.tamPagina,0==t.total?1:t.total),this.retorno)if((0,n.xc)(this.parametro.getParametro(),"new"))this.controlePaginas.goLast();else{let o=this.parametro.getParametro();this.controlePaginas.setPaginaAtual(Object(o).page)}this.getFeriados()},t=>{this.globalService.setSpin(!1),this.controlePaginas=new f.e(this.tamPagina,0),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,n.bZ)(t)}`,"OK")})}getParametro(){this.globalService.setSpin(!0);let e=new A.E;e.id_empresa=this.parametro.id_empresa,e.modulo=this.parametro.modulo,e.assinatura=this.parametro.assinatura,e.id_usuario=this.parametro.id_usuario,e.orderby="Usu\xe1rio",this.inscricaoParametro=this.parametrosService.getParametrosParametro01(e).subscribe(t=>{this.globalService.setSpin(!1),this.parametro=new g.M,this.parametro.id_empresa=t[0].id_empresa,this.parametro.modulo=t[0].modulo,this.parametro.id_usuario=t[0].id_usuario,this.parametro.assinatura=t[0].assinatura,this.parametro.parametro=t[0].parametro,this.parametro.user_insert=t[0].user_insert,this.parametro.user_update=t[0].user_update,this.opcoesOrdenacao=(0,n.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,n.FO)(this.parametro.getParametro(),"pesquisar"),this.setValues()},t=>{this.globalService.setSpin(!1),this.setValues()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id;let e=this.parametro.getParametro();Object(e).op_ordenacao=this.opcoesOrdenacao.findIndex(t=>this.parametros.value.ordenacao==t),Object(e).op_pesquisar=this.opcoesCampo.findIndex(t=>this.parametros.value.campo==t),Object(e).descricao=this.parametros.value.filtro,Object(e).page=0,Object(e).new=!1,this.parametro.parametro=JSON.stringify(e),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(t=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,n.bZ)(t)}`,"OK")})}setValues(){this.parametros.setValue({ordenacao:this.opcoesOrdenacao[(0,n.P0)(this.parametro.getParametro(),"op_ordenacao")],campo:this.opcoesCampo[(0,n.P0)(this.parametro.getParametro(),"op_pesquisar")],filtro:(0,n.SL)(this.parametro.getParametro(),"descricao")})}getTexto(){return n.fd}onChangePage(){this.getFeriados()}onChangeParametros(){this.getFeriadosContador()}onHome(){this.getApiBrasilFeriados()}onSaveConfig(){this.updateParametros()}loadParametros(){if(this.parametro=new g.M,this.parametro.id_empresa=this.globalService.getIdEmpresa(),this.parametro.modulo="feriado",this.parametro.assinatura="V1.00 18/09/2023",this.parametro.id_usuario=this.globalService.usuario.id,this.parametro.parametro='\n    {\n      "op_ordenacao": 0,\n      "ordenacao": ["Data", "Descri\xe7\xe3o"],\n      "op_pesquisar": 1,\n      "pesquisar": ["Data", "Descri\xe7\xe3o"],\n      "descricao": "",\n      "page": 1,\n      "new": false,\n      "id_retorno":""\n    }',this.opcoesOrdenacao=(0,n.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,n.FO)(this.parametro.getParametro(),"pesquisar"),this.retorno&&null!==this.globalService.estadoFind("feriado")){const e=this.globalService.estadoFind("feriado");if(null!=e){if((0,n.xc)(e.getParametro(),"new")){let t=this.parametro.getParametro();Object(t).id_retorno=(0,n.P0)(e.getParametro(),"id_retorno"),this.parametro.parametro=JSON.stringify(t),this.setPosicaoInclusao()}else this.controlePaginas.setPaginaAtual((0,n.P0)(e.getParametro(),"page")),this.parametro.setParametro(e.getParametro());this.globalService.estadoDelete(e),this.setValues()}}else this.getParametro()}setPosicaoInclusao(){const e=this.parametro.getParametro();Object(e).op_ordenacao=0,Object(e).op_pesquisar=0,Object(e).descricao="",Object(e).new=!0,this.parametro.setParametro(e)}getApiBrasilFeriados(){this.globalService.setSpin(!0),this.inscricaoApiBrasil=this.apiBrasilService.getFeriados("2023").subscribe(e=>{this.globalService.setSpin(!1),this.lsFeriados=e,this.saveFeriados()},e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa API BRASIL ${(0,n.bZ)(e)}`,"OK")})}saveFeriados(){this.globalService.setSpin(!0),console.log("feriado para gravar",this.lsFeriados[0]);const e=new P.u;e.id_empresa=this.globalService.id_empresa,e.id_usuario=0,e.id_tipo=1,e.id_nivel=3,e.data=this.lsFeriados[0].date,e.descricao=this.lsFeriados[0].name.toUpperCase(),e.user_insert=this.globalService.usuario.id,this.inscricaoSaveFeriado=this.feriadoService.FeriadoInsert(e).subscribe(t=>{this.globalService.setSpin(!1),this.lsFeriados.splice(0,1),this.lsFeriados.length>0&&this.saveFeriados()},t=>{console.log(t),this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Inclus\xe3o De Feriados ${(0,n.bZ)(t)}`,"OK")})}}return r.\u0275fac=function(e){return new(e||r)(a.Y36(c.qu),a.Y36(T.v),a.Y36(d.F0),a.Y36(d.gz),a.Y36(F.W),a.Y36(O.U),a.Y36(_.u),a.Y36(x))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-crud-feriado"]],viewQuery:function(e,t){if(1&e&&a.Gf(m.N7,5),2&e){let o;a.iGM(o=a.CRH())&&(t.viewPort=o.first)}},decls:49,vars:7,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],[1,"parametros"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo",3,"selectionChange"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","filtro"],[1,"content",3,"itemSize"],[1,"Browse-Scroll"],[1,"coluna-cabec"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"value"],[1,"Browse_Lanc_td"],[1,"acoes"],[3,"BARRA_ATIVIDADES","EXCLUIR","changeOpcao"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"mat-toolbar"),a.TgZ(2,"span",1),a._uU(3,"Feriados: "),a.qZA(),a.TgZ(4,"app-navegator",2),a.NdJ("changePage",function(){return t.onChangePage()}),a.qZA(),a.TgZ(5,"button",3),a.NdJ("click",function(){return t.getFeriadosContador()}),a.TgZ(6,"mat-icon"),a._uU(7,"rotate_right"),a.qZA(),a.qZA(),a.TgZ(8,"button",4),a.NdJ("click",function(){return t.onSaveConfig()}),a.TgZ(9,"mat-icon"),a._uU(10,"brightness_high"),a.qZA(),a.qZA(),a.TgZ(11,"button",5),a.NdJ("click",function(){return t.onHome()}),a.TgZ(12,"mat-icon"),a._uU(13,"home"),a.qZA(),a.qZA(),a.TgZ(14,"button",6),a.NdJ("click",function(){return t.escolha(t.getAcoes().Inclusao)}),a.TgZ(15,"mat-icon"),a._uU(16,"add_circle_outline"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(17,"div",7),a.TgZ(18,"form",8),a.TgZ(19,"mat-form-field",9),a.TgZ(20,"mat-label"),a._uU(21,"Ordena\xe7\xe3o"),a.qZA(),a.TgZ(22,"mat-select",10),a.NdJ("selectionChange",function(){return t.onChangeParametros()}),a.YNc(23,z,2,2,"mat-option",11),a.qZA(),a.qZA(),a.TgZ(24,"mat-form-field",9),a.TgZ(25,"mat-label"),a._uU(26,"Pesquisar Por"),a.qZA(),a.TgZ(27,"mat-select",12),a.NdJ("selectionChange",function(){return t.onChangeParametros()}),a.YNc(28,Y,2,2,"mat-option",11),a.qZA(),a.qZA(),a.TgZ(29,"mat-form-field",13),a.TgZ(30,"mat-label"),a._uU(31,"Descri\xe7\xe3o"),a.qZA(),a._UZ(32,"input",14),a.qZA(),a.qZA(),a.qZA(),a.TgZ(33,"cdk-virtual-scroll-viewport",15),a.TgZ(34,"table",16),a.TgZ(35,"tr",17),a.TgZ(36,"th"),a._uU(37,"Data"),a.qZA(),a.TgZ(38,"th"),a._uU(39,"Usu\xe1rio"),a.qZA(),a.TgZ(40,"th"),a._uU(41,"Tipo"),a.qZA(),a.TgZ(42,"th"),a._uU(43,"Nivel"),a.qZA(),a.TgZ(44,"th"),a._uU(45,"Descri\xe7\xe3o"),a.qZA(),a.TgZ(46,"th"),a._uU(47,"A\xc7\xd5ES"),a.qZA(),a.qZA(),a.YNc(48,Q,25,14,"tr",18),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Q6J("controle",t.controlePaginas),a.xp6(10),a.Q6J("matTooltip",t.getTexto().incluir),a.xp6(4),a.Q6J("formGroup",t.parametros),a.xp6(5),a.Q6J("ngForOf",t.opcoesOrdenacao),a.xp6(5),a.Q6J("ngForOf",t.opcoesCampo),a.xp6(5),a.Q6J("itemSize",50),a.xp6(15),a.Q6J("cdkVirtualForOf",t.feriados))},directives:[j.Ye,B.J,U.lW,N.gM,J.Hw,c._Y,c.JL,c.sg,b.KE,b.hX,y.gD,c.JJ,c.u,u.sg,I.Nt,c.Fj,m.N7,m.xd,m.x0,E.ey,D.C],pipes:[M.s,R.R],styles:['.content[_ngcontent-%COMP%]{height:60%;overflow:auto}.Browse-Scroll[_ngcontent-%COMP%]{border-collapse:collapse;margin-left:auto;margin-right:auto;width:100%;height:inherit}td[_ngcontent-%COMP%]{font-size:small;color:#00f;font-family:"Times New Roman",Times,serif}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.acoes[_ngcontent-%COMP%]{color:#8b0000;width:100px}.go-up[_ngcontent-%COMP%]{margin-top:-10px}']}),r})()}];let L=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[d.Bz.forChild($)],d.Bz]}),r})();var V=i(5426),w=i(4466),G=i(2559);let K=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[u.ez,L,V.q,c.u5,m.Cl,c.UX,w.m,G.yI.forChild()]]}),r})()}}]);