"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[361],{61:(C,v,n)=>{n.d(v,{o:()=>u});class u{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.id_conta="",this.id_conta_versao="0101",this.id_subconta="",this.id_subcliente=0,this.id_resp=0,this.id_exec=0,this.id_motivo="",this.produtivo="",this.inicial="",this.final="",this.obs="",this.horasapon=0,this.encerramento="N",this.nlanc=0,this.user_insert=0,this.user_update=0,this.conta_descricao="",this.grupo_descricao="",this.estru_descricao="",this.resp_razao="",this.exec_razao="",this.proj_descricao="",this.motivo_descricao="",this.motivo_produtivo="",this.ativ_inicial="",this.ativ_final="",this.cli_razao=""}}},361:(C,v,n)=>{n.r(v),n.d(v,{ExecucaoV2Module:()=>Jt});var u=n(8583),_=n(4655),g=n(8239),Z=n(7438),d=n(3211),f=n(61),h=n(8440);class x{constructor(r,a,o){this.idEmpresa=r,this.idAuditor=a,this.id_atividade=0,this.id_empresa=r,this.id_auditor=a,this.hoje=o}getId_Atividade(){return this.id_atividade}setId_Atividade(r){this.id_atividade=r}}var l=n(3679),m=n(3032),c=n(7117),I=n(9648),L=n(3962),Q=n(3914),R=n(98),j=n(3525),z=n(4782);class V{constructor(){this.id_empresa=0,this.id_exec=0,this.so_ativos="N",this.tem_atividade="",this.nro_retorno=5,this.controle="N",this.orderby=""}}var t=n(7716),G=n(1209),K=n(1872),W=n(8059),X=n(9715),tt=n(4307),at=n(1843),H=n(7006),$=n(789),k=n(5939),J=n(2522),w=n(1095),D=n(6627),ot=n(1436),S=n(8295),y=n(9983),M=n(3220),it=n(7441),et=n(2458);let st=(()=>{class i{constructor(a,o){this.hostElement=a,this.renderer=o,this.cor="red",this.last=0,this.index=0}ngOnInit(){this.setColor()}setColor(){this.index<this.last&&this.renderer.setStyle(this.hostElement.nativeElement,"color",this.cor)}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(t.SBq),t.Y36(t.Qsj))},i.\u0275dir=t.lG2({type:i,selectors:[["","CorUltimosProjetos",""]],inputs:{cor:"cor",last:"last",index:"index"}}),i})();var N=n(2559),B=n(9930),nt=n(7539),F=n(1790),rt=n(980);function ct(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(2);return e.adicao(e.getAcoes().Inclusao)}),t.TgZ(1,"mat-icon"),t._uU(2,"add_circle_outline"),t.qZA(),t.qZA()}}function lt(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",2),t.TgZ(2,"mat-toolbar"),t.TgZ(3,"span",3),t._uU(4),t.ALo(5,"horaSexagenal"),t.qZA(),t.YNc(6,ct,3,0,"button",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(a),t.oxw().onRetorno()}),t.TgZ(8,"mat-icon"),t._uU(9,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=t.oxw();t.xp6(4),t.AsE("",a.getTitulo()," Total de Horas ",t.lcZ(5,3,a.totalHoras),""),t.xp6(2),t.Q6J("ngIf",a.loaded)}}function ut(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t.TgZ(1,"div",22),t._uU(2),t.qZA(),t.qZA()),2&i){const a=r.$implicit,o=r.index,e=t.oxw(2);t.Q6J("value",a.id),t.xp6(1),t.Q6J("last",e.last)("index",o),t.xp6(1),t.lnq("",a.cliente_razao.trim()," (",a.id,") ",a.descricao," ")}}function dt(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&i){const a=r.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.estru_descri.trim()," ")}}function ht(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&i){const a=r.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.estru_descri," ")}}function pt(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&i){const a=r.$implicit;t.Q6J("value",a.id),t.xp6(1),t.AsE(" ",a.subconta.substring(4,6),"-",a.estru_descri," ")}}function mt(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",7),t.TgZ(2,"div",8),t.TgZ(3,"mat-form-field",9),t.TgZ(4,"mat-label"),t._uU(5,"Usu\xe1rio:"),t.qZA(),t._UZ(6,"input",10),t.qZA(),t.TgZ(7,"mat-form-field",9),t.TgZ(8,"mat-label"),t._uU(9,"Data:"),t.qZA(),t.TgZ(10,"input",11),t.NdJ("dateChange",function(){return t.CHM(a),t.oxw().onChangeData()}),t.qZA(),t._UZ(11,"mat-datepicker-toggle",12),t._UZ(12,"mat-datepicker",null,13),t.qZA(),t.qZA(),t.TgZ(14,"div",14),t.TgZ(15,"mat-form-field",15),t.TgZ(16,"mat-label"),t._uU(17,"Contratos"),t.qZA(),t.TgZ(18,"mat-select",16),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeContrato()}),t.YNc(19,ut,3,6,"mat-option",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",14),t.TgZ(21,"mat-form-field",15),t.TgZ(22,"mat-label"),t._uU(23,"Atividades"),t.qZA(),t.TgZ(24,"mat-select",18),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeEstruturas()}),t.YNc(25,dt,2,2,"mat-option",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",8),t.TgZ(27,"mat-form-field",15),t.TgZ(28,"mat-label"),t._uU(29,"Grupos"),t.qZA(),t.TgZ(30,"mat-select",19),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onChangeGrupos()}),t.YNc(31,ht,2,2,"mat-option",17),t.qZA(),t.qZA(),t.TgZ(32,"mat-form-field",15),t.TgZ(33,"mat-label"),t._uU(34,"Atividades"),t.qZA(),t.TgZ(35,"mat-select",20),t.NdJ("selectionChange",function(){return t.CHM(a),t.oxw().onParametrosChange()}),t.YNc(36,pt,2,3,"mat-option",17),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=t.MAs(13),o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.parametro),t.xp6(9),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(8),t.Q6J("ngForOf",o.contratos),t.xp6(6),t.Q6J("ngForOf",o.estruturas),t.xp6(6),t.Q6J("ngForOf",o.grupos),t.xp6(5),t.Q6J("ngForOf",o.atividades)}}function _t(i,r){if(1&i&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"horaSexagenal"),t.qZA()),2&i){const a=t.oxw(2);t.xp6(1),t.hij("Lan\xe7amentos Produtivos (",t.lcZ(2,1,a.totalHoras),")")}}function gt(i,r){1&i&&(t.TgZ(0,"div",36),t.TgZ(1,"mat-icon",37),t._uU(2,"check"),t.qZA(),t.qZA())}function vt(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div",29),t.TgZ(3,"div",30),t.TgZ(4,"mat-label",31),t._uU(5),t.ALo(6,"date"),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"mat-label",31),t._uU(9),t.ALo(10,"horaSexagenal"),t.qZA(),t.qZA(),t.YNc(11,gt,3,0,"div",32),t.qZA(),t.TgZ(12,"div"),t.TgZ(13,"mat-label",31),t._uU(14),t.ALo(15,"firstName"),t.qZA(),t.qZA(),t.TgZ(16,"div"),t.TgZ(17,"mat-label",31),t._uU(18),t.ALo(19,"firstName"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td"),t.TgZ(21,"div"),t.TgZ(22,"mat-label",31),t._uU(23),t.qZA(),t.qZA(),t.TgZ(24,"div"),t.TgZ(25,"mat-label",31),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"div"),t.TgZ(28,"mat-label",31),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"div"),t.TgZ(31,"mat-label",31),t._uU(32),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"td"),t.TgZ(34,"div"),t.TgZ(35,"mat-label",31),t._uU(36),t.qZA(),t.qZA(),t.TgZ(37,"div"),t.TgZ(38,"mat-label",31),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"td",33),t.TgZ(41,"div"),t.TgZ(42,"button",34),t.NdJ("click",function(){const s=t.CHM(a).$implicit,p=t.oxw(3);return p.outras(p.getAcoes().Edicao,s)}),t.TgZ(43,"mat-icon"),t._uU(44,"edit"),t.qZA(),t.qZA(),t.TgZ(45,"button",35),t.NdJ("click",function(){const s=t.CHM(a).$implicit,p=t.oxw(3);return p.outras(p.getAcoes().Exclusao,s)}),t.TgZ(46,"mat-icon"),t._uU(47,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=r.$implicit;t.xp6(5),t.AsE("",t.xi3(6,14,a.inicial,"HH:mm")," as ",t.xi3(7,17,a.final,"HH:mm")," "),t.xp6(4),t.Oqu(t.lcZ(10,20,a.horasapon)),t.xp6(2),t.Q6J("ngIf","S"==a.encerramento),t.xp6(3),t.hij("Resp:",t.lcZ(15,22,a.resp_razao),""),t.xp6(4),t.hij("Exec:",t.lcZ(19,24,a.exec_razao),""),t.xp6(5),t.AsE("Contr:(",a.id_projeto,") ",a.cli_razao,""),t.xp6(3),t.Oqu(a.proj_descricao),t.xp6(3),t.AsE("",a.conta_descricao,"/",a.grupo_descricao,""),t.xp6(3),t.Oqu(a.estru_descricao),t.xp6(4),t.Oqu(a.motivo_descricao),t.xp6(3),t.Oqu(a.obs)}}function ft(i,r){if(1&i&&(t.TgZ(0,"div",25),t.TgZ(1,"table",26),t.TgZ(2,"tr",27),t.TgZ(3,"th"),t._uU(4,"HOR\xc1RIO"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"CLIENTE/DESCRI\xc7\xc3O/ATIVIDADE"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"MOTIVO/OBS"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"A\xc7\xd5ES"),t.qZA(),t.qZA(),t.YNc(11,vt,48,26,"tr",28),t.qZA(),t.qZA()),2&i){const a=t.oxw(2);t.xp6(11),t.Q6J("ngForOf",a.apontamentos)}}function Zt(i,r){if(1&i&&(t.TgZ(0,"mat-tab"),t.YNc(1,_t,3,3,"ng-template",23),t.YNc(2,ft,12,1,"div",24),t.qZA()),2&i){const a=t.oxw();t.xp6(2),t.Q6J("ngIf",a.apontamentos.length>0)}}function xt(i,r){if(1&i&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"horaSexagenal"),t.qZA()),2&i){const a=t.oxw(2);t.xp6(1),t.hij("Lan\xe7amentos Banco e F\xe9rias (",t.lcZ(2,1,a.totalHorasBanco),")")}}function At(i,r){1&i&&(t.TgZ(0,"div",36),t.TgZ(1,"mat-icon",37),t._uU(2,"check"),t.qZA(),t.qZA())}function bt(i,r){if(1&i&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div",29),t.TgZ(3,"div",30),t.TgZ(4,"mat-label",31),t._uU(5),t.ALo(6,"date"),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"mat-label",31),t._uU(9),t.ALo(10,"horaSexagenal"),t.qZA(),t.qZA(),t.YNc(11,At,3,0,"div",32),t.qZA(),t.TgZ(12,"div"),t.TgZ(13,"mat-label",31),t._uU(14),t.ALo(15,"firstName"),t.qZA(),t.qZA(),t.TgZ(16,"div"),t.TgZ(17,"mat-label",31),t._uU(18),t.ALo(19,"firstName"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"td"),t.TgZ(21,"div"),t.TgZ(22,"mat-label",31),t._uU(23),t.qZA(),t.qZA(),t.TgZ(24,"div"),t.TgZ(25,"mat-label",31),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"div"),t.TgZ(28,"mat-label",31),t._uU(29),t.qZA(),t.qZA(),t.TgZ(30,"div"),t.TgZ(31,"mat-label",31),t._uU(32),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"td"),t.TgZ(34,"div"),t.TgZ(35,"mat-label",31),t._uU(36),t.qZA(),t.qZA(),t.TgZ(37,"div"),t.TgZ(38,"mat-label",31),t._uU(39),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const a=r.$implicit;t.xp6(5),t.AsE("",t.xi3(6,14,a.inicial,"HH:mm")," as ",t.xi3(7,17,a.final,"HH:mm")," "),t.xp6(4),t.Oqu(t.lcZ(10,20,a.horasapon)),t.xp6(2),t.Q6J("ngIf","S"==a.encerramento),t.xp6(3),t.hij("Resp:",t.lcZ(15,22,a.resp_razao),""),t.xp6(4),t.hij("Exec:",t.lcZ(19,24,a.exec_razao),""),t.xp6(5),t.AsE("Contr:(",a.id_projeto,") ",a.cli_razao,""),t.xp6(3),t.Oqu(a.proj_descricao),t.xp6(3),t.AsE("",a.conta_descricao,"/",a.grupo_descricao,""),t.xp6(3),t.Oqu(a.estru_descricao),t.xp6(4),t.Oqu(a.motivo_descricao),t.xp6(3),t.Oqu(a.obs)}}function Ct(i,r){if(1&i&&(t.TgZ(0,"div",39),t.TgZ(1,"table",26),t.TgZ(2,"tr",27),t.TgZ(3,"th"),t._uU(4,"HOR\xc1RIO"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"CLIENTE/DESCRI\xc7\xc3O/ATIVIDADE"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"MOTIVO/OBS"),t.qZA(),t.qZA(),t.YNc(9,bt,40,26,"tr",28),t.qZA(),t.qZA()),2&i){const a=t.oxw(2);t.xp6(9),t.Q6J("ngForOf",a.apontamentosBanco)}}function Tt(i,r){if(1&i&&(t.TgZ(0,"mat-tab"),t.YNc(1,xt,3,3,"ng-template",23),t.YNc(2,Ct,10,1,"div",38),t.qZA()),2&i){const a=t.oxw();t.xp6(2),t.Q6J("ngIf",a.apontamentosBanco.length>0)}}function St(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).onManha()}),t._uU(1,"Manh\xe3"),t.qZA()}}function Et(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).onAlmoco()}),t._uU(1,"Almo\xe7o"),t.qZA()}}function qt(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).onTarde()}),t._uU(1,"Tarde"),t.qZA()}}function Ut(i,r){if(1&i&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&i){const a=r.$implicit;t.Q6J("value",a.codigo),t.xp6(1),t.hij(" ",a.motivo," ")}}function Ot(i,r){if(1&i&&(t.TgZ(0,"mat-form-field",15),t.TgZ(1,"mat-label"),t._uU(2,"Motivo"),t.qZA(),t.TgZ(3,"mat-select",55),t.YNc(4,Ut,2,2,"mat-option",17),t.qZA(),t.qZA()),2&i){const a=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",a.motivos)}}function It(i,r){if(1&i){const a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",2),t.TgZ(2,"mat-toolbar"),t.TgZ(3,"span",3),t._uU(4),t.qZA(),t.TgZ(5,"div",40),t.YNc(6,St,2,0,"button",41),t.YNc(7,Et,2,0,"button",41),t.YNc(8,qt,2,0,"button",41),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"form",7),t.TgZ(10,"div",42),t.TgZ(11,"mat-form-field",9),t.TgZ(12,"mat-label"),t._uU(13,"Entrada"),t.qZA(),t._UZ(14,"input",43),t.qZA(),t.TgZ(15,"mat-form-field",9),t.TgZ(16,"mat-label"),t._uU(17,"Sa\xedda"),t.qZA(),t._UZ(18,"input",44),t.qZA(),t.TgZ(19,"div",45),t.TgZ(20,"mat-checkbox",46),t._uU(21,"Encerrar Atividade "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",14),t.TgZ(23,"mat-form-field",9),t.TgZ(24,"mat-label"),t._uU(25,"Grupo"),t.qZA(),t._UZ(26,"input",47),t.qZA(),t.qZA(),t.TgZ(27,"div",14),t.TgZ(28,"mat-form-field",9),t.TgZ(29,"mat-label"),t._uU(30,"Atividade"),t.qZA(),t._UZ(31,"input",48),t.qZA(),t.qZA(),t.TgZ(32,"div",14),t.TgZ(33,"mat-form-field",9),t.TgZ(34,"mat-label"),t._uU(35,"Contrato"),t.qZA(),t._UZ(36,"input",49),t.qZA(),t.qZA(),t.TgZ(37,"div",14),t.YNc(38,Ot,5,1,"mat-form-field",50),t.qZA(),t.TgZ(39,"div",14),t.TgZ(40,"mat-form-field",9),t.TgZ(41,"mat-label"),t._uU(42,"Observa\xe7\xe3o"),t.qZA(),t._UZ(43,"input",51),t.qZA(),t.qZA(),t.TgZ(44,"div",40),t.TgZ(45,"button",52),t.NdJ("click",function(){return t.CHM(a),t.oxw().onSubmit()}),t._uU(46),t.qZA(),t.TgZ(47,"button",53),t.NdJ("click",function(){return t.CHM(a),t.oxw().onCancel()}),t._uU(48),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=t.oxw();t.xp6(4),t.Oqu(a.labelCadastro),t.xp6(2),t.Q6J("ngIf",a.idAcao==a.getAcoes().Inclusao||a.idAcao==a.getAcoes().Edicao),t.xp6(1),t.Q6J("ngIf",a.idAcao==a.getAcoes().Inclusao||a.idAcao==a.getAcoes().Edicao),t.xp6(1),t.Q6J("ngIf",a.idAcao==a.getAcoes().Inclusao||a.idAcao==a.getAcoes().Edicao),t.xp6(1),t.Q6J("formGroup",a.formulario),t.xp6(5),t.Q6J("readonly",a.readOnly)("Setfocus",a.focusEntrada),t.xp6(4),t.Q6J("readonly",a.readOnly),t.xp6(2),t.Q6J("disableRipple",!1),t.xp6(18),t.Q6J("ngIf",a.idAcao!=a.getAcoes().Consulta&&a.idAcao!=a.getAcoes().Exclusao),t.xp6(5),t.Q6J("readonly",a.readOnly),t.xp6(2),t.Q6J("disabled",a.gravando),t.xp6(1),t.Oqu(a.acao),t.xp6(1),t.Q6J("Setfocus",a.focusCancelar),t.xp6(1),t.hij("",a.getLabelCancel()," ")}}let P=(()=>{class i{constructor(a,o,e,s,p,b,E,q,U,T,O){this.usuariosService=o,this.aponPlanejamentoService=e,this.aponExecucaoService=s,this.atividadesService=p,this.motivoApoService=b,this.projetosServices=E,this.globalService=q,this.router=U,this.route=T,this.appSnackBar=O,this.agendamento=new h.Y,this.idAcao=0,this.acao="",this.labelCadastro="",this.id_empresa=0,this.apontamentos=[],this.apontamento=new f.o,this.apontamentosBanco=[],this.agendamentos=[],this.atividades=[],this.atividade=new d.o,this.motivos=[],this.dados_projetos="Ol\xe1",this.usuario=new Z.g,this.filtro=!1,this.intervalos=[],this.readOnly=!0,this.showAtividades=!1,this.retornoAtividades=new x(0,0,new Date),this.contrato=new j.w,this.contratos=[],this.tempoContratos=[],this.lastContratosFiltrados=[],this.lastContratos=[],this.last=0,this.grupo=new d.o,this.grupos=[],this.estrutura=new d.o,this.estruturas=[],this.focusEntrada=!1,this.focusCancelar=!1,this.gravando=!1,this.totalHoras=0,this.totalHorasBanco=0,this.parData="",this.loaded=!1,this.formulario=a.group({entrada:[{value:""},[l.kI.required]],saida:[{value:""},[l.kI.required]],grupo:[{value:""},[l.kI.required]],atividade:[{value:""},[l.kI.required]],cliente:[{value:""},[l.kI.required]],id_motivo:[{value:""},[l.kI.required]],encerra:[{value:""},[l.kI.required]],obs:[{value:""},[l.kI.maxLength(150)]]}),this.parametro=a.group({usuario:[{value:""}],data:[{value:""}],id_estrutura:[{value:""},[l.kI.required,l.kI.min(1)]],id_contrato:[{value:""},[l.kI.required,l.kI.min(1)]],id_grupo:[{value:""},[l.kI.required,l.kI.min(1)]],id_atividade:[{value:""},[l.kI.required,l.kI.min(1)]]}),this.inscricaoRota=T.params.subscribe(Y=>{this.parData=void 0===Y.data?"":Y.data}),this.getUsuario(),this.setValue(),this.idAcao=99,this.setAcao(this.idAcao),this.setValue(),this.setParametro()}ngOnInit(){this.getApontamentosExecucao(),this.getApontamentosBancoHoras()}ngOnDestroy(){var a,o,e,s,p,b,E,q,U,T,O;null===(a=this.inscricaoGetAll)||void 0===a||a.unsubscribe(),null===(o=this.inscricaoAcao)||void 0===o||o.unsubscribe(),null===(e=this.inscricaoUsuario)||void 0===e||e.unsubscribe(),null===(s=this.inscricaoApontamento)||void 0===s||s.unsubscribe(),null===(p=this.inscricaoAponExecucao)||void 0===p||p.unsubscribe(),null===(b=this.inscricaoAtividades)||void 0===b||b.unsubscribe(),null===(E=this.inscricaoMotivos)||void 0===E||E.unsubscribe(),null===(q=this.inscricaoCoordenador)||void 0===q||q.unsubscribe(),null===(U=this.inscricaoGetContratos)||void 0===U||U.unsubscribe(),null===(T=this.inscricaoRota)||void 0===T||T.unsubscribe(),null===(O=this.inscricaoBancoHoras)||void 0===O||O.unsubscribe()}getUsuario(){this.globalService.setSpin(!0),this.inscricaoUsuario=this.usuariosService.getUsuario(this.globalService.getIdEmpresa(),this.globalService.getUsuario().id).subscribe(a=>{this.globalService.setSpin(!1),this.usuario=a,this.parametro.patchValue({usuario:this.usuario.razao}),this.getProjetos(),this.getMotivos()},a=>{this.globalService.setSpin(!1),this.usuario=new Z.g,console.log(a),this.appSnackBar.openFailureSnackBar(`${a.error.tabela} - ${a.error.erro} - ${a.error.message}`,"OK")})}getApontamentosExecucao(){let a=new I.W;a.id_empresa=this.globalService.getIdEmpresa(),a.id_exec=this.globalService.getUsuario().id,a.id_projeto=0,a.data=(0,c.JS)(this.parametro.value.data),a.controle="N",a.orderby="Executor",this.globalService.setSpin(!0),this.inscricaoAponExecucao=this.aponExecucaoService.getApoExecucoes_01(a).subscribe(o=>{this.globalService.setSpin(!1),this.apontamentos=o,this.totalHoras=0,this.apontamentos.forEach(e=>{this.totalHoras=this.totalHoras+Number(e.horasapon)})},o=>{this.globalService.setSpin(!1),this.apontamentos=[],this.totalHoras=0,"Nehuma Informa\xe7\xe3o Para Esta Consulta."!=o.error.message&&this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Apontamentos ${(0,c.bZ)(o)}`,"OK")})}getApontamentosBancoHoras(){let a=new I.W;a.id_empresa=this.globalService.getIdEmpresa(),a.id_exec=this.globalService.getUsuario().id,a.id_projeto=0,a.data=(0,c.JS)(this.parametro.value.data),a.controle="S",a.orderby="Executor",this.globalService.setSpin(!0),this.inscricaoBancoHoras=this.aponExecucaoService.getApoExecucoes_01(a).subscribe(o=>{this.globalService.setSpin(!1),this.apontamentosBanco=o,this.totalHorasBanco=0,this.apontamentosBanco.forEach(e=>{this.totalHorasBanco=this.totalHorasBanco+Number(e.horasapon)})},o=>{this.globalService.setSpin(!1),this.apontamentosBanco=[],this.totalHorasBanco=0,"Nehuma Informa\xe7\xe3o Para Esta Consulta."!=o.error.message&&this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Apontamentos ${(0,c.bZ)(o)}`,"OK")})}getLastProjects(){let a=new V;a.id_empresa=this.globalService.getIdEmpresa(),a.id_exec=this.globalService.getUsuario().id,a.orderby="",a.so_ativos="S",a.tem_atividade="S",a.nro_retorno=20,this.globalService.setSpin(!0),this.inscricaoGetContratos=this.projetosServices.getLastProjects(a).subscribe(o=>{this.lastContratos=o,this.lastContratosFiltrados=[],this.lastContratos.forEach(e=>{this.lastContratosFiltrados.findIndex(p=>p.id_empresa==e.id_empresa&&p.id_projeto==e.id_projeto)<0&&this.lastContratosFiltrados.push(e)}),this.last=this.lastContratosFiltrados.length,this.lastContratosFiltrados=this.lastContratosFiltrados.sort((e,s)=>e.cli_fantasia<s.cli_fantasia?1:e.cli_fantasia>s.cli_fantasia?-1:0),this.lastContratosFiltrados.forEach(e=>{const s=this.tempoContratos.find(p=>p.id_empresa==e.id_empresa&&p.id==e.id_projeto);null!=s&&this.tempoContratos.splice(0,0,s)}),this.contratos=this.tempoContratos,this.parametro.patchValue({id_contrato:this.contratos[0].id}),this.tempoContratos=[],this.lastContratosFiltrados=[],this.lastContratos=[],this.globalService.setSpin(!1),this.onChangeContrato()},o=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Pesquisa \xdaltimo Contratos ${(0,c.bZ)(o)}`,"OK"),this.lastContratos=[]})}getProjetos(){let a=new z.m;a.id_empresa=1,a.orderby="Fantasia",a.so_ativos="S",a.tem_atividade="S",this.globalService.setSpin(!0),this.inscricaoGetContratos=this.projetosServices.getProjetos_01(a).subscribe(o=>{this.globalService.setSpin(!1),this.tempoContratos=o,this.getLastProjects()},o=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Pesquisa Contratos ${(0,c.bZ)(o)}`,"OK"),this.contratos=[],this.tempoContratos=[]})}getAtividades(a){let o=new L.l;o.id_empresa=this.globalService.getIdEmpresa(),o.id_projeto=this.contrato.id,o.orderby="projeto","C"==a?(o.so_abertas_ex="S",o.nivel=1,o.tipo="C"):"G"==a?(o.so_abertas_ex="S",o.conta=this.estrutura.conta,o.nivel=2,o.tipo="S"):(o.so_abertas_ex="S",o.conta=this.grupo.conta,o.subconta=this.grupo.subconta.trim(),o.subconta_nivel="S",o.nivel_filtro=this.grupo.nivel,o.nivel=3,o.tipo="O"),this.globalService.setSpin(!0),this.inscricaoAtividades=this.atividadesService.getAtividades_01(o).subscribe(e=>{this.globalService.setSpin(!1),this.atividades=e,"C"==a?(this.estruturas=e,this.parametro.patchValue({id_estrutura:this.estruturas[0].id}),this.onChangeEstruturas()):"G"==a?(this.grupos=e,this.parametro.patchValue({id_grupo:this.grupos[0].id}),this.onChangeGrupos()):(this.atividades=e,this.parametro.patchValue({id_atividade:this.atividades[0].id}),this.atividade=this.atividades.filter(s=>s.id===this.parametro.value.id_atividade)[0],this.loaded=!0)},e=>{this.globalService.setSpin(!1),"C"==a?this.estruturas=[]:"G"==a?this.grupos=[]:this.atividades=[]})}getMotivos(){let a=new Q.V;a.id_empresa=1,a.analitico="S",a.orderby="C\xf3digo",16==this.globalService.getUsuario().id&&(a.controle=""),this.globalService.setSpin(!0),this.inscricaoMotivos=this.motivoApoService.getMotivoApos_01(a).subscribe(o=>{this.globalService.setSpin(!1),this.motivos=o},o=>{this.globalService.setSpin(!1),this.motivos=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Motivos Apontamentos ${(0,c.bZ)(o)}`,"OK")})}setValue(){this.formulario.setValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16),grupo:`${this.apontamento.conta_descricao}/${this.apontamento.grupo_descricao}`,atividade:this.apontamento.estru_descricao,cliente:`${this.apontamento.cli_razao}(${this.apontamento.id_projeto}) ${this.apontamento.proj_descricao} `,id_motivo:this.apontamento.id_motivo,encerra:"S"==this.apontamento.encerramento,obs:this.apontamento.obs})}setParametro(){this.parametro.setValue({usuario:this.usuario.razao,data:""==this.parData?new Date:new Date(`${(0,c.kT)(this.parData)}T00:00:00`),id_estrutura:0,id_contrato:0,id_grupo:0,id_atividade:0})}setAcao(a){switch(this.focusEntrada=!1,this.focusCancelar=!1,+a){case m.I.Inclusao:this.acao="Gravar",this.labelCadastro=`Inclus\xe3o - ${(0,c.qS)(this.apontamento.inicial)}`,this.readOnly=!1,this.focusEntrada=!0;break;case m.I.Edicao:this.acao="Gravar",this.labelCadastro=`Altera\xe7\xe3o - ${(0,c.qS)(this.apontamento.inicial)}`,this.readOnly=!1,this.focusEntrada=!0;break;case m.I.Consulta:this.acao="Voltar",this.labelCadastro=`Consulta - ${(0,c.qS)(this.apontamento.inicial)}`,this.readOnly=!0,this.focusCancelar=!0;break;case m.I.Exclusao:this.acao="Excluir",this.labelCadastro=`Exclus\xe3o - ${(0,c.qS)(this.apontamento.inicial)}`,this.readOnly=!0;break;default:this.acao="",this.labelCadastro=""}}setFiltro(){this.filtro=!this.filtro}onSubmit(){this.gravando=!0;try{this.formulario.valid?this.executaAcao():(this.formulario.markAllAsTouched(),this.gravando=!1,this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}catch(a){a instanceof R.i?this.appSnackBar.openSuccessSnackBar(`Lan\xe7amento Conflitando: ${a.message}`,"OK"):console.log(a)}}onRefresh(){this.parametro.valid?this.atividade=this.atividades.filter(a=>a.id===this.parametro.value.id_atividade)[0]:this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}adicao(a){this.gravando=!1;let o="";0==this.apontamentos.length?o=this.globalService.getUsuario().man_hora_entrada:(o=this.apontamentos[this.apontamentos.length-1].final.substring(this.apontamentos[this.apontamentos.length-1].final.indexOf(" ")+1,16),o===this.globalService.getUsuario().man_hora_saida&&(o=this.globalService.getUsuario().tard_hora_entrada)),this.parametro.valid?(this.atividade=this.atividades.filter(s=>s.id===this.parametro.value.id_atividade)[0],this.idAcao=a,this.setAcao(this.idAcao),this.apontamento=new f.o,new Date((0,c.mu)(`${(0,c.JS)(this.parametro.value.data)} ${o}`)),this.apontamento.id_empresa=this.usuario.id_empresa,this.apontamento.id=0,this.apontamento.id_projeto=this.atividade.id_projeto,this.apontamento.id_conta=this.atividade.conta,this.apontamento.id_subconta=this.atividade.subconta,this.apontamento.id_conta_versao=this.atividade.versao,this.apontamento.id_subcliente=this.atividade.id_subcliente,this.apontamento.proj_descricao=this.atividade.proj_descri,this.apontamento.cli_razao=this.atividade.subcliente_razao,this.apontamento.id_resp=this.atividade.id_resp,this.apontamento.id_exec=this.usuario.id,this.apontamento.inicial=(0,c.mu)(`${(0,c.JS)(this.parametro.value.data)} ${o}`),this.apontamento.final=(0,c.mu)((0,c.JS)(this.parametro.value.data)+" 00:00:00"),this.apontamento.horasapon=0,this.apontamento.id_motivo=this.globalService.codigoMotivo,this.apontamento.produtivo="S",this.apontamento.obs="",this.apontamento.encerramento="N",this.apontamento.user_insert=this.usuario.id,this.apontamento.user_update=0,this.apontamento.resp_razao=this.atividade.resp_razao,this.apontamento.exec_razao=this.atividade.exec_razao,this.apontamento.conta_descricao=this.estrutura.estru_descri,this.apontamento.grupo_descricao=this.grupo.estru_descri,this.apontamento.estru_descricao=this.atividade.estru_descri,this.idAcao=a,this.setAcao(this.idAcao),this.setValue()):(this.parametro.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Favor Preencher Os Par\xe2metros","OK"))}outras(a,o){this.gravando=!1,this.apontamento=new f.o,this.apontamento.id_empresa=this.usuario.id_empresa,this.apontamento.id=o.id,this.apontamento.id_projeto=o.id_projeto,this.apontamento.id_conta=o.id_conta,this.apontamento.id_subconta=o.id_subconta,this.apontamento.id_conta_versao=o.id_conta_versao,this.apontamento.id_subcliente=o.id_subcliente,this.apontamento.cli_razao=o.cli_razao,this.apontamento.id_resp=o.id_resp,this.apontamento.id_exec=o.id_exec,this.apontamento.inicial=o.inicial,this.apontamento.final=o.final,this.apontamento.horasapon=0,this.apontamento.id_motivo=a==m.I.Inclusao?this.globalService.codigoMotivo:o.id_motivo,this.apontamento.produtivo="S",this.apontamento.obs=o.obs,this.apontamento.encerramento=o.encerramento,this.apontamento.user_insert=o.user_insert,this.apontamento.user_update=o.user_update,this.apontamento.resp_razao=o.resp_razao,this.apontamento.exec_razao=o.exec_razao,this.apontamento.conta_descricao=o.conta_descricao,this.apontamento.grupo_descricao=o.grupo_descricao,this.apontamento.estru_descricao=o.estru_descricao,this.idAcao=a,this.setAcao(this.idAcao),this.setValue()}executaAcao(){var a=this;let o=new Date;switch(o.setTime(Date.parse(this.apontamento.inicial)),this.apontamento.inicial=(0,c.B9)(o,(0,c.Lv)(this.formulario.value.entrada),(0,c.lj)(this.formulario.value.entrada)),this.apontamento.final=(0,c.B9)(o,(0,c.Lv)(this.formulario.value.saida),(0,c.lj)(this.formulario.value.saida)),this.apontamento.horasapon=(0,c.KB)((0,c.Hh)(this.apontamento.inicial,this.apontamento.final)),this.apontamento.id_motivo=this.formulario.value.id_motivo,this.apontamento.obs=this.formulario.value.obs,this.apontamento.encerramento=this.formulario.value.encerra?"S":"N",+this.idAcao){case m.I.Inclusao:this.apontamento.user_insert=this.globalService.getUsuario().id,this.apontamento.id_conta_versao="0101",this.inscricaoAcao=this.aponExecucaoService.ApoExecucaoInsert(this.apontamento).subscribe(function(){var e=(0,g.Z)(function*(s){a.onCancel()});return function(s){return e.apply(this,arguments)}}(),e=>{this.gravando=!1,console.log("erro=>",e),this.appSnackBar.openFailureSnackBar(`${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")});break;case m.I.Edicao:this.apontamento.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.aponExecucaoService.ApoExecucaoUpdate(this.apontamento).subscribe(function(){var e=(0,g.Z)(function*(s){a.onCancel()});return function(s){return e.apply(this,arguments)}}(),e=>{this.gravando=!1,this.appSnackBar.openFailureSnackBar(`${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")});break;case m.I.Exclusao:this.inscricaoAcao=this.aponExecucaoService.ApoExecucaoDelete(this.apontamento.id_empresa,this.apontamento.id).subscribe(function(){var e=(0,g.Z)(function*(s){a.onCancel()});return function(s){return e.apply(this,arguments)}}(),e=>{this.gravando=!1,this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}}onCancel(){this.idAcao!=this.getAcoes().Consulta&&(this.getApontamentosExecucao(),this.getApontamentosBancoHoras()),this.idAcao=99,this.setAcao(99)}getLabelCancel(){return this.idAcao==m.I.Consulta?"Voltar":"Cancelar"}getAcoes(){return m.I}touchedOrDirty(a){var o,e;return!(!(null===(o=this.formulario.get(a))||void 0===o?void 0:o.touched)&&!(null===(e=this.formulario.get(a))||void 0===e?void 0:e.dirty))}getTexto(){return c.fd}onChangeData(){this.getApontamentosExecucao(),this.getApontamentosBancoHoras()}onParametrosChange(){this.onRefresh()}getTitulo(){return"Apontamentos de execu\xe7\xe3o "}showDadosProjetoAgendamento(a){let o="";return o=`Projeto: ${a.id_projeto} Diretor: ${a.diretor_razao} Resp.: ${a.resp_razao}`,o}showDadosProjetoApontamento(a){let o="";return o=`Projeto: ${a.id_projeto} Descricao: ${a.proj_descricao} Resp.: ${a.resp_razao}`,o}onShowAtividades(){this.showAtividades=!this.showAtividades}onCancelarAtividades(){this.onShowAtividades()}onOkAtividades(){this.onShowAtividades()}onChangeContrato(){let a=this.contratos.findIndex(o=>{var e;return o.id===(null===(e=this.parametro.value)||void 0===e?void 0:e.id_contrato)});a>=0&&(this.contrato=this.contratos[a],this.estruturas=[],this.grupos=[],this.atividades=[],this.getAtividades("C"))}onChangeEstruturas(){let a=this.estruturas.findIndex(o=>{var e;return o.id===(null===(e=this.parametro.value)||void 0===e?void 0:e.id_estrutura)});a>=0&&(this.grupos=[],this.atividades=[],this.estrutura=this.estruturas[a],this.getAtividades("G"))}onChangeGrupos(){let a=this.grupos.findIndex(o=>{var e;return o.id===(null===(e=this.parametro.value)||void 0===e?void 0:e.id_grupo)});a>=0&&(this.atividades=[],this.grupo=this.grupos[a],this.getAtividades(""))}onManha(){this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.final.indexOf(" ")+1)+this.globalService.getUsuario().man_hora_entrada,this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+this.globalService.getUsuario().man_hora_saida,this.formulario.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}onTarde(){let a="";a=5==new Date(this.apontamento.inicial).getDay()?"16:33":this.globalService.getUsuario().tard_hora_saida,this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.inicial.indexOf(" ")+1)+this.globalService.getUsuario().tard_hora_entrada,this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+a,this.formulario.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}onAlmoco(){this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.inicial.indexOf(" ")+1)+"12:00",this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+"13:00",this.formulario.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}onDiaTodo(){}getfirstName(a){return(0,c.S4)(a)}filtroContratos(a){}onChangeContrato2(a){console.log(a)}onRetorno(){this.router.navigate(["/"])}onLancaMulti(){console.log("Chamando componente!",this.parametro.value.data),this.router.navigate(["/execucao/execucoesv2multi",(0,c.zp)(this.parametro.value.data)])}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(l.qu),t.Y36(G.J),t.Y36(K.G),t.Y36(W.A),t.Y36(X.a),t.Y36(tt.s),t.Y36(at.T),t.Y36(H.U),t.Y36(_.F0),t.Y36(_.gz),t.Y36($.W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crud-Execucao"]],decls:7,vars:5,consts:[[4,"ngIf"],[1,"rodape"],[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo Apontamento","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo Apontamento","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-2"],["appearance","outline",1,"col-max"],["matInput","","formControlName","usuario","readonly","true"],["matInput","","formControlName","data",3,"matDatepicker","dateChange"],["matSuffix","",3,"for"],["dataDatePicker",""],[1,"col-med-1"],["field","","appearance","outline",1,"col-max"],["formControlName","id_contrato",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","id_estrutura",3,"selectionChange"],["formControlName","id_grupo",3,"selectionChange"],["formControlName","id_atividade",3,"selectionChange"],[3,"value"],["CorUltimosProjetos","",3,"last","index"],["mat-tab-label",""],["class","moldura",4,"ngIf"],[1,"moldura"],[1,"Browse_Lanc"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],[1,"wrapper"],[1,"first"],[1,"Browse_Lanc_td"],["class","second",4,"ngIf"],[1,"acoes"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Alterar Apontamento","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Excluir Apontamento","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"second"],[1,"green-icon"],["class","modura",4,"ngIf"],[1,"modura"],[1,"button-container-right"],["mat-button","","class","green-icon",3,"click",4,"ngIf"],[1,"col-med-5"],["matInput","","formControlName","entrada","placeholder","HH:MM","mask","00:00",3,"readonly","Setfocus"],["matInput","","formControlName","saida","placeholder","HH:MM","mask","00:00",3,"readonly"],[1,"col-max"],["formControlName","encerra",1,"encerramento",3,"disableRipple"],["matInput","","formControlName","grupo","readonly","true"],["matInput","","formControlName","atividade","readonly","true"],["matInput","","formControlName","cliente","readonly","true"],["field","","appearance","outline","class","col-max",4,"ngIf"],["matInput","","formControlName","obs","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["mat-raised-button","","color","primary",1,"buttons",3,"disabled","click"],["mat-raised-button","","color","accent",1,"buttons",3,"Setfocus","click"],["mat-button","",1,"green-icon",3,"click"],["formControlName","id_motivo"]],template:function(a,o){1&a&&(t.YNc(0,lt,10,5,"div",0),t.YNc(1,mt,37,7,"div",0),t.TgZ(2,"mat-tab-group"),t.YNc(3,Zt,3,1,"mat-tab",0),t.YNc(4,Tt,3,1,"mat-tab",0),t.qZA(),t._UZ(5,"div",1),t.YNc(6,It,49,15,"div",0)),2&a&&(t.Q6J("ngIf",99==o.idAcao),t.xp6(1),t.Q6J("ngIf",99==o.idAcao),t.xp6(2),t.Q6J("ngIf",99==o.idAcao&&!o.showAtividades),t.xp6(1),t.Q6J("ngIf",99==o.idAcao&&!o.showAtividades),t.xp6(2),t.Q6J("ngIf",99!==o.idAcao))},directives:[u.O5,k.SP,J.Ye,w.lW,D.Hw,ot.gM,l._Y,l.JL,l.sg,S.KE,S.hX,y.Nt,l.Fj,l.JJ,l.u,M.hl,M.nW,S.R9,M.Mq,it.gD,u.sg,et.ey,st,k.uX,k.uD,N.hx,B.b,nt.oG],pipes:[F.X,u.uU,rt.z],styles:["tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.moldura[_ngcontent-%COMP%]{margin-top:5px;width:99%;margin-bottom:10px}"]}),i})();class A{constructor(){this.hora_inicial=new Date,this.hora_final=new Date,this.id_motivo=""}}function kt(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){const a=r.$implicit;t.xp6(1),t.hij(" ",a,"\n")}}function Mt(i,r){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.ALo(3,"date"),t.qZA()),2&i){const a=r.$implicit;t.xp6(1),t.lnq(" ",t.xi3(2,3,a.hora_inicial,"HH:mm")," - ",t.xi3(3,6,a.hora_final,"HH:mm"),"-",a.id_motivo,"\n")}}const Nt=[{path:"",redirectTo:"execucoesv2",pathMatch:"full"},{path:"execucoesv2",component:P},{path:"execucoesv2/:data",component:P},{path:"execucoesv2multi/:data",component:(()=>{class i{constructor(a,o,e,s,p){this.formBuilder=a,this.globalService=o,this.router=e,this.route=s,this.appSnackBar=p,this.labelCadastro="",this.id_empresa=0,this.apontamentos=[],this.apontamento=new f.o,this.atividades=[],this.atividade=new d.o,this.motivos=[],this.usuario=new Z.g,this.readOnly=!0,this.contrato=new j.w,this.contratos=[],this.tempoContratos=[],this.lastContratosFiltrados=[],this.lastContratos=[],this.last=0,this.grupo=new d.o,this.grupos=[],this.estrutura=new d.o,this.estruturas=[],this.focusEntrada=!1,this.focusCancelar=!1,this.gravando=!1,this.totalHoras=0,this.totalHorasBanco=0,this.cortes=[],this.lancaHoras=[],this.data="",this.parametro=a.group({entrada:[{value:""},[l.kI.required]],saida:[{value:""},[l.kI.required]]}),this.inscricaoRota=s.params.subscribe(b=>{this.data=b.data})}ngOnInit(){}setValue(){this.parametro.setValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16),grupo:`${this.apontamento.conta_descricao}/${this.apontamento.grupo_descricao}`,atividade:this.apontamento.estru_descricao,cliente:`${this.apontamento.cli_razao}(${this.apontamento.id_projeto}) ${this.apontamento.proj_descricao} `,id_motivo:this.apontamento.id_motivo,encerra:"S"==this.apontamento.encerramento,obs:this.apontamento.obs})}onRetorno(){this.router.navigate(["execucao/execucoesv2"])}onManha(){this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.final.indexOf(" ")+1)+this.globalService.getUsuario().man_hora_entrada,this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+this.globalService.getUsuario().man_hora_saida,this.parametro.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}onTarde(){let a="";a=5==new Date(this.apontamento.inicial).getDay()?"16:33":this.globalService.getUsuario().tard_hora_saida,this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.inicial.indexOf(" ")+1)+this.globalService.getUsuario().tard_hora_entrada,this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+a,this.parametro.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}onAlmoco(){this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.inicial.indexOf(" ")+1)+"12:00",this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+"13:00",this.parametro.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)})}onDiaTodo(){this.apontamento.inicial=this.apontamento.inicial.substring(0,this.apontamento.final.indexOf(" ")+1)+"06:30",this.apontamento.final=this.apontamento.final.substring(0,this.apontamento.final.indexOf(" ")+1)+"21:00",this.parametro.patchValue({entrada:this.apontamento.inicial.substring(this.apontamento.inicial.indexOf(" ")+1,16),saida:this.apontamento.final.substring(this.apontamento.final.indexOf(" ")+1,16)}),this.loadCortes(),this.gerarHorarios()}onCalculo(){this.loadCortes(),this.gerarHorarios()}gerarHorarios(){this.lancaHoras=[];let a=!1,o=new Date(`${(0,c.kT)(this.data)}T${this.parametro.value.entrada}`),e=new Date(`${(0,c.kT)(this.data)}T${this.parametro.value.saida}`);for(;!a;)if(o<this.cortes[0]&&e>this.cortes[0]){const s=new A;s.hora_inicial=o,s.hora_final=this.cortes[0],s.id_motivo="998002",o=this.cortes[0],this.lancaHoras.push(s),o==e&&(a=!0)}else if(o>=this.cortes[0]&&o<=this.cortes[1]&&e>this.cortes[1]){const s=new A;s.hora_inicial=o,s.hora_final=this.cortes[1],s.id_motivo=this.globalService.codigoMotivo,o=this.cortes[2],this.lancaHoras.push(s),o==e&&(a=!0)}else if(o>=this.cortes[0]&&e<=this.cortes[1]){const s=new A;s.hora_inicial=o,s.hora_final=e,s.id_motivo=this.globalService.codigoMotivo,this.lancaHoras.push(s),a=!0}else if(o>=this.cortes[2]&&e<=this.cortes[3]){const s=new A;s.hora_inicial=o,s.hora_final=e,s.id_motivo=this.globalService.codigoMotivo,this.lancaHoras.push(s),a=!0}else if(o>=this.cortes[2]&&o<=this.cortes[3]&&e<=this.cortes[3]){let s=new A;s.hora_inicial=o,s.hora_final=e,s.id_motivo=this.globalService.codigoMotivo,this.lancaHoras.push(s),a=!0}else if(o>=this.cortes[2]&&o<=this.cortes[3]&&e>this.cortes[2]){let s=new A;if(s.hora_inicial=o,s.hora_final=this.cortes[3],s.id_motivo=this.globalService.codigoMotivo,o=this.cortes[3],this.lancaHoras.push(s),o.getTime()===e.getTime()){a=!0;continue}s=new A,s.hora_inicial=o,s.hora_final=e,s.id_motivo="998002",this.lancaHoras.push(s),a=!0}a=!0}loadCortes(){this.cortes=[];let o=new Date(`${(0,c.kT)(this.data)}T${this.globalService.getUsuario().man_hora_entrada.trim()}`);this.cortes.push(o),o=new Date(`${(0,c.kT)(this.data)}T${this.globalService.getUsuario().man_hora_saida.trim()}`),this.cortes.push(o),o=new Date(`${(0,c.kT)(this.data)}T${this.globalService.getUsuario().tard_hora_entrada.trim()}`),this.cortes.push(o),o=new Date(`${(0,c.kT)(this.data)}T${this.globalService.getUsuario().tard_hora_saida.trim()}`),this.cortes.push(o)}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(l.qu),t.Y36(H.U),t.Y36(_.F0),t.Y36(_.gz),t.Y36($.W))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crud-execucao-multi"]],decls:31,vars:8,consts:[[1,"div-barra"],[1,"example-spacer"],[1,"button-container-right"],["mat-button","",1,"green-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-5"],["appearance","outline",1,"col-max"],["matInput","","formControlName","entrada","placeholder","HH:MM","mask","00:00",3,"Setfocus"],["matInput","","formControlName","saida","placeholder","HH:MM","mask","00:00"],[4,"ngFor","ngForOf"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.ALo(4,"horaSexagenal"),t.qZA(),t.TgZ(5,"div",2),t.TgZ(6,"button",3),t.NdJ("click",function(){return o.onManha()}),t._uU(7,"Manh\xe3"),t.qZA(),t.TgZ(8,"button",3),t.NdJ("click",function(){return o.onTarde()}),t._uU(9,"Tarde"),t.qZA(),t.TgZ(10,"button",3),t.NdJ("click",function(){return o.onDiaTodo()}),t._uU(11,"Dia Todo"),t.qZA(),t.TgZ(12,"button",3),t.NdJ("click",function(){return o.onCalculo()}),t._uU(13,"Calculo"),t.qZA(),t.qZA(),t.TgZ(14,"button",4),t.NdJ("click",function(){return o.onRetorno()}),t.TgZ(15,"mat-icon"),t._uU(16,"arrow_back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"form",5),t.TgZ(18,"div",6),t.TgZ(19,"mat-form-field",7),t.TgZ(20,"mat-label"),t._uU(21,"Entrada"),t.qZA(),t._UZ(22,"input",8),t.qZA(),t.TgZ(23,"mat-form-field",7),t.TgZ(24,"mat-label"),t._uU(25,"Sa\xedda"),t.qZA(),t._UZ(26,"input",9),t.qZA(),t.qZA(),t.qZA(),t.YNc(27,kt,2,1,"div",10),t.TgZ(28,"h1"),t._uU(29),t.qZA(),t.YNc(30,Mt,4,9,"div",10)),2&a&&(t.xp6(3),t.hij("Apontamentos De - Horas Total de Horas ",t.lcZ(4,6,o.totalHoras),""),t.xp6(14),t.Q6J("formGroup",o.parametro),t.xp6(5),t.Q6J("Setfocus",o.focusEntrada),t.xp6(5),t.Q6J("ngForOf",o.cortes),t.xp6(2),t.hij("Horarios ",o.data,""),t.xp6(1),t.Q6J("ngForOf",o.lancaHoras))},directives:[J.Ye,w.lW,D.Hw,l._Y,l.JL,l.sg,S.KE,S.hX,y.Nt,l.Fj,N.hx,l.JJ,l.u,B.b,u.sg],pipes:[F.X,u.uU],styles:[""]}),i})()}];let jt=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[_.Bz.forChild(Nt)],_.Bz]}),i})();var Ht=n(5426),$t=n(4466);let Jt=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,jt,Ht.q,l.u5,l.UX,$t.m,N.yI.forChild()]]}),i})()},9648:(C,v,n)=>{n.d(v,{W:()=>u});class u{constructor(){this.id_empresa=0,this.id="",this.id_projeto=0,this.id_conta="",this.id_subconta="",this.id_resp=0,this.id_exec=0,this.id_dir=0,this.data="",this.controle="N",this.orderby="",this.sharp=!0}}},3914:(C,v,n)=>{n.d(v,{V:()=>u});class u{constructor(){this.id_empresa=0,this.codigo="",this.motivo="",this.sintetico="",this.analitico="",this.controle="N",this.pagina=1,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},4307:(C,v,n)=>{n.d(v,{s:()=>Z});var u=n(2340),_=n(7716),g=n(1841);let Z=(()=>{class d{constructor(h){this.http=h,this.apiURL=u.N.apiURL}getMotivoApos(){return this.http.get(`${this.apiURL}motivoapos`)}getMotivoApos_01(h){return this.http.post(`${this.apiURL}motivoapos`,h)}getMotivoApo(h,x){return this.http.get(`${this.apiURL}motivoapo/${h}/${x}`)}MotivoApoInsert(h){return this.http.post(`${this.apiURL}motivoapo`,h)}MotivoApoUpdate(h){return this.http.put(`${this.apiURL}motivoapo`,h)}MotivoApoDelete(h,x){return this.http.delete(`${this.apiURL}motivoapo/${h}/${x}`)}}return d.\u0275fac=function(h){return new(h||d)(_.LFG(g.eN))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},9930:(C,v,n)=>{n.d(v,{b:()=>_});var u=n(7716);let _=(()=>{class g{constructor(d,f){this.hostElement=d,this.renderer=f,this.isFocused=!1}ngOnInit(){this.isFocused&&this.renderer.selectRootElement(this.hostElement.nativeElement).focus()}}return g.\u0275fac=function(d){return new(d||g)(u.Y36(u.SBq),u.Y36(u.Qsj))},g.\u0275dir=u.lG2({type:g,selectors:[["","Setfocus",""]],inputs:{isFocused:["Setfocus","isFocused"]}}),g})()},8239:(C,v,n)=>{function u(g,Z,d,f,h,x,l){try{var m=g[x](l),c=m.value}catch(I){return void d(I)}m.done?Z(c):Promise.resolve(c).then(f,h)}function _(g){return function(){var Z=this,d=arguments;return new Promise(function(f,h){var x=g.apply(Z,d);function l(c){u(x,f,h,l,m,"next",c)}function m(c){u(x,f,h,l,m,"throw",c)}l(void 0)})}}n.d(v,{Z:()=>_})}}]);