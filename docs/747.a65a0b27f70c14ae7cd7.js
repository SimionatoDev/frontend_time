"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[747],{5747:(X,Z,s)=>{s.r(Z),s.d(Z,{AgendaDiretorModule:()=>K});var p=s(8583),h=s(4655),_=s(141),m=s(3639),A=s(8673),u=s(4453),T=s(7265),g=s(6468),D=s(3563),C=s(7117),e=s(7716),d=s(3679),S=s(1209),x=s(1843),b=s(7006),w=s(789),y=s(2522),J=s(1095),N=s(1436),q=s(6627),f=s(8295),U=s(7441),V=s(2458),j=s(7094),O=s(2225);function Q(t,l){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.razao," ")}}function F(t,l){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.razao," ")}}function M(t,l){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.razao," ")}}function Y(t,l){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.Q6J("value",a),e.xp6(1),e.hij(" ",a," ")}}function E(t,l){if(1&t&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&t){const a=l.$implicit;e.Q6J("value",a.nro),e.xp6(1),e.hij(" ",a.nome," ")}}function B(t,l){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",16),e.TgZ(2,"mat-label",17),e._uU(3,"DOM"),e.qZA(),e.TgZ(4,"mat-label",18),e._uU(5,"SEG"),e.qZA(),e.TgZ(6,"mat-label",18),e._uU(7,"TER"),e.qZA(),e.TgZ(8,"mat-label",18),e._uU(9,"QUA"),e.qZA(),e.TgZ(10,"mat-label",18),e._uU(11,"QUI"),e.qZA(),e.TgZ(12,"mat-label",18),e._uU(13,"SEX"),e.qZA(),e.TgZ(14,"mat-label",18),e._uU(15,"SAB"),e.qZA(),e.qZA(),e.qZA())}function $(t,l){if(1&t){const a=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"app-cel-calendar",20),e.NdJ("onClickDay",function(r){return e.CHM(a),e.oxw(2).onDay(r)}),e.qZA(),e.qZA(),e.TgZ(3,"div",21),e.TgZ(4,"app-cel-calendar",20),e.NdJ("onClickDay",function(r){return e.CHM(a),e.oxw(2).onDay(r)}),e.qZA(),e.qZA(),e.TgZ(5,"div",21),e.TgZ(6,"app-cel-calendar",20),e.NdJ("onClickDay",function(r){return e.CHM(a),e.oxw(2).onDay(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",21),e.TgZ(8,"app-cel-calendar",20),e.NdJ("onClickDay",function(r){return e.CHM(a),e.oxw(2).onDay(r)}),e.qZA(),e.qZA(),e.TgZ(9,"div",21),e.TgZ(10,"app-cel-calendar",20),e.NdJ("onClickDay",function(r){return e.CHM(a),e.oxw(2).onDay(r)}),e.qZA(),e.qZA(),e.TgZ(11,"div",21),e.TgZ(12,"app-cel-calendar",20),e.NdJ("onClickDay",function(r){return e.CHM(a),e.oxw(2).onDay(r)}),e.qZA(),e.qZA(),e.TgZ(13,"div",21),e.TgZ(14,"app-cel-calendar",20),e.NdJ("onClickDay",function(r){return e.CHM(a),e.oxw(2).onDay(r)}),e.qZA(),e.qZA(),e.qZA()}if(2&t){const a=l.$implicit;e.xp6(2),e.Q6J("celula",a.line[0]),e.xp6(2),e.Q6J("celula",a.line[1]),e.xp6(2),e.Q6J("celula",a.line[2]),e.xp6(2),e.Q6J("celula",a.line[3]),e.xp6(2),e.Q6J("celula",a.line[4]),e.xp6(2),e.Q6J("celula",a.line[5]),e.xp6(2),e.Q6J("celula",a.line[6])}}function z(t,l){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,$,15,7,"div",19),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.linhas)}}function H(t,l){1&t&&e._UZ(0,"app-cel-apontamentos-execucao")}const R=[{path:"",redirectTo:"agendaprojeto",pathMatch:"full"},{path:"agendaprojeto",component:(()=>{class t{constructor(a,i,r,n,c,o){this.usuariosService=i,this.projetosService=r,this.globalService=n,this.router=c,this.appSnackBar=o,this.diretor=0,this.diretores=[],this.coordenador=0,this.coordenadores=[],this.auditor=0,this.auditores=[],this.agendas=[],this.calendario=[],this.linhas=[],this.anos=[2022,2023,2024],this.meses=new T.Y,this.hoje=new Date,this.showLancamento=!1,this.celulaDia=new u.N,this.parametro=a.group({diretores:[{value:""}],coordenadores:[{value:""}],auditores:[{value:""}],ano:[{value:""}],mes:[{value:""}]}),this.getDiretores(),this.getCoordenadores(),this.getAuditores(),this.setParametro()}ngOnInit(){}ngOnDestroy(){var a,i,r,n;null===(a=this.inscricaoDiretor)||void 0===a||a.unsubscribe(),null===(i=this.inscricaoAuditor)||void 0===i||i.unsubscribe(),null===(r=this.inscricaoCoordenador)||void 0===r||r.unsubscribe(),null===(n=this.inscricaoAgenda)||void 0===n||n.unsubscribe()}onSubmit(){console.log(this.diretores),this.diretor=this.parametro.value.diretores,this.coordenador=this.parametro.value.coordenadores,this.auditor=this.parametro.value.auditores,console.log(this.parametro.value.diretores,this.parametro.value.coordenadores,this.parametro.value.auditores),console.log(this.diretor,this.coordenador,this.auditor),this.celulaDia=new u.N,this.showLancamento=!0,this.globalService.setRefreshLan\u00e7amentos(this.celulaDia),this.getAgenda()}setParametro(){this.parametro.setValue({diretores:this.diretor,coordenadores:this.coordenador,auditores:this.auditor,ano:this.hoje.getFullYear(),mes:this.hoje.getMonth()})}getDiretores(){const a=new g.w;a.id_empresa=this.globalService.id_empresa,a.grupo=this.usuariosService.getGruposDiretoria(),a.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoDiretor=this.usuariosService.getusuarios_01(a).subscribe(i=>{this.globalService.setSpin(!1),this.diretor=0;const r=new m.j;r.id=0,r.razao="TODOS",this.diretores.push(r),i.forEach(n=>{this.diretores.push(n)}),this.usuariosService.isDiretoria(this.globalService.getUsuario().grupo)?this.parametro.patchValue({diretores:this.globalService.getUsuario().id}):this.parametro.patchValue({diretores:0})},i=>{this.globalService.setSpin(!1),this.diretor=0,this.appSnackBar.openFailureSnackBar(`Falha Ao Carregar Tabela Diretores ${(0,C.bZ)(i)}`,"OK")})}getCoordenadores(){const a=new g.w;a.id_empresa=this.globalService.id_empresa,a.grupo=this.usuariosService.getGruposCoordenador(),a.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoCoordenador=this.usuariosService.getusuarios_01(a).subscribe(i=>{this.globalService.setSpin(!1),this.coordenador=0;const r=new m.j;r.id=0,r.razao="TODOS",this.coordenadores.push(r),i.forEach(n=>{this.coordenadores.push(n)}),this.parametro.patchValue({coordenadores:this.coordenador})},i=>{this.globalService.setSpin(!1),this.coordenador=0,this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}getAuditores(){const a=new g.w,i=this.usuariosService.getGruposCoordenador(),r=this.usuariosService.getGruposAuditor();a.id_empresa=this.globalService.id_empresa,i.forEach(n=>{a.grupo.push(n)}),r.forEach(n=>{a.grupo.push(n)}),this.globalService.setSpin(!0),this.inscricaoAuditor=this.usuariosService.getusuarios_01(a).subscribe(n=>{this.globalService.setSpin(!1),this.auditor=0;const c=new m.j;c.id=0,c.razao="TODOS",this.auditores.push(c),n.forEach(o=>{this.auditores.push(o)}),this.parametro.patchValue({auditores:this.auditor})},n=>{this.globalService.setSpin(!1),this.auditor=0,this.appSnackBar.openFailureSnackBar(`${n.error.tabela} - ${n.error.erro} - ${n.error.message}`,"OK")})}getAgenda(){const a=new D.t;a.id_empresa=this.globalService.id_empresa,a.id_exec=this.auditor,a.id_resp=this.coordenador,a.id_dir=this.diretor,a.ano=this.parametro.value.ano,a.mes=this.adicionaZero(this.parametro.value.mes+1),console.log("ParametroAgeHoras01 ==>",a),this.globalService.setSpin(!0),this.inscricaoAgenda=this.projetosService.getParametroAgeHorasAgeHoras01(a).subscribe(i=>{this.globalService.setSpin(!1),this.agendas=[],i.forEach(r=>{const n=new _.n;n.dia=parseInt(r.dia),n.horas_plan=Number(r.horas_plan),n.horas_exec=Number(r.horas_exec),this.agendas.push(n)}),this.loadCalendario(),0==this.agendas.length&&this.appSnackBar.openSuccessSnackBar("Nenhuma Informa\xe7\xe3o Para Esta Consulta!","OK")},i=>{this.globalService.setSpin(!1),this.agendas=[],this.loadCalendario(),this.appSnackBar.openFailureSnackBar(`${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}onRetorno(){this.router.navigate(["/"])}loadCalendario(){var n,a=new Date(this.parametro.value.ano,this.parametro.value.mes,1,0),i=a.getMonth(),r=0;const c=a.getDay();for(this.calendario=[],a.setDate(a.getDate()-a.getDay());a.getDay()<c;){const o=new u.N;o.dia=a.getDate(),o.data=new Date(a),o.semana=a.getDay(),o.tipo=3,o.horasplanejadas=60,o.horasexecutadas=70,o.descricao="Antes",o.id_resp=this.coordenador,o.id_exec=this.auditor,o.id_diretor=this.diretor,o.id_projeto=0,this.calendario.push(o),a.setDate(a.getDate()+1)}for(a=new Date(this.parametro.value.ano,this.parametro.value.mes,1,0);i==a.getMonth();){const o=new u.N;o.dia=a.getDate();const v=this.agendas.find(P=>P.dia===o.dia);o.data=new Date(a),o.semana=a.getDay(),o.tipo=0==a.getDay()?0:1,null==v?(o.horasplanejadas=0,o.horasexecutadas=0):(o.horasplanejadas=v.horas_plan,o.horasexecutadas=v.horas_exec),o.descricao="Dias do m\xeas",o.id_resp=this.coordenador,o.id_exec=this.auditor,o.id_diretor=this.diretor,o.id_projeto=0,this.calendario.push(o),a.setDate(a.getDate()+1)}if(this.linhas=[],n=new A.u,r=0,this.calendario.forEach(o=>{r>6&&(this.linhas.push(n),r=0,n=new A.u),n.line.push(o),r++}),r>0){for(;r<7;){const o=new u.N;o.dia=a.getDate(),o.data=new Date(a),o.semana=a.getDay(),o.tipo=3,o.horasplanejadas=90,o.horasexecutadas=70,o.descricao="Depois",o.id_resp=this.coordenador,o.id_exec=this.auditor,o.id_diretor=this.diretor,o.id_projeto=0,this.calendario.push(o),a.setDate(a.getDate()+1),n.line.push(o),r++}this.linhas.push(n)}console.log("Linha:",this.linhas)}onDay(a){console.log("onDay",a),this.celulaDia=a,this.globalService.setRefreshLan\u00e7amentos(this.celulaDia),this.showLancamento=!0}adicionaZero(a){return a<=9?"0"+a:""+a}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(d.qu),e.Y36(S.J),e.Y36(x.T),e.Y36(b.U),e.Y36(h.F0),e.Y36(w.W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-agenda-view"]],decls:43,vars:9,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Atualizar","matTooltipPosition","above",1,"button",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-6"],["field","","appearance","outline",1,"col-max"],["formControlName","diretores"],[3,"value",4,"ngFor","ngForOf"],["formControlName","coordenadores"],["formControlName","auditores"],["formControlName","ano"],["formControlName","mes"],[4,"ngIf"],[1,"rodape"],[3,"value"],[1,"col-med-7"],[1,"col-max","dia-semana","cabec-car-dom"],[1,"col-max","dia-semana","cabec-car"],["class","col-med-7",4,"ngFor","ngForOf"],[3,"celula","onClickDay"],[1,"col-max","dia-semana"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-toolbar"),e.TgZ(2,"span",1),e._uU(3,"AGENDA-DIRETORIA"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return i.onSubmit()}),e.TgZ(5,"mat-icon"),e._uU(6,"rotate_right"),e.qZA(),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){return i.onRetorno()}),e.TgZ(8,"mat-icon"),e._uU(9,"arrow_back"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div"),e.TgZ(11,"form",4),e.TgZ(12,"div",5),e.TgZ(13,"mat-form-field",6),e.TgZ(14,"mat-label"),e._uU(15,"Diretores"),e.qZA(),e.TgZ(16,"mat-select",7),e.YNc(17,Q,2,2,"mat-option",8),e.qZA(),e.qZA(),e.TgZ(18,"mat-form-field",6),e.TgZ(19,"mat-label"),e._uU(20,"Coordenadores"),e.qZA(),e.TgZ(21,"mat-select",9),e.YNc(22,F,2,2,"mat-option",8),e.qZA(),e.qZA(),e.TgZ(23,"mat-form-field",6),e.TgZ(24,"mat-label"),e._uU(25,"Auditores"),e.qZA(),e.TgZ(26,"mat-select",10),e.YNc(27,M,2,2,"mat-option",8),e.qZA(),e.qZA(),e.TgZ(28,"mat-form-field",6),e.TgZ(29,"mat-label"),e._uU(30,"Ano"),e.qZA(),e.TgZ(31,"mat-select",11),e.YNc(32,Y,2,2,"mat-option",8),e.qZA(),e.qZA(),e.TgZ(33,"mat-form-field",6),e.TgZ(34,"mat-label"),e._uU(35,"M\xeas"),e.qZA(),e.TgZ(36,"mat-select",12),e.YNc(37,E,2,2,"mat-option",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(38,B,16,0,"div",13),e.YNc(39,z,2,1,"div",13),e.TgZ(40,"div"),e.YNc(41,H,1,0,"app-cel-apontamentos-execucao",13),e.qZA(),e._UZ(42,"div",14)),2&a&&(e.xp6(11),e.Q6J("formGroup",i.parametro),e.xp6(6),e.Q6J("ngForOf",i.diretores),e.xp6(5),e.Q6J("ngForOf",i.coordenadores),e.xp6(5),e.Q6J("ngForOf",i.auditores),e.xp6(5),e.Q6J("ngForOf",i.anos),e.xp6(5),e.Q6J("ngForOf",i.meses.meses),e.xp6(1),e.Q6J("ngIf",i.calendario.length>0),e.xp6(1),e.Q6J("ngIf",i.calendario.length>0),e.xp6(2),e.Q6J("ngIf",i.showLancamento))},directives:[y.Ye,J.lW,N.gM,q.Hw,d._Y,d.JL,d.sg,f.KE,f.hX,U.gD,d.JJ,d.u,p.sg,p.O5,V.ey,j.H,O.T],styles:[""]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[h.Bz.forChild(R)],h.Bz]}),t})();var k=s(5426),G=s(2559),L=s(4466);let K=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez,I,k.q,d.u5,d.UX,L.m,G.yI.forChild()]]}),t})()}}]);