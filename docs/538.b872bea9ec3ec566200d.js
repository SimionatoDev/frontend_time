"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[538],{61:(k,S,s)=>{s.d(S,{o:()=>h});class h{constructor(){this.id_empresa=0,this.id=0,this.id_projeto=0,this.id_conta="",this.id_conta_versao="0101",this.id_subconta="",this.id_subcliente=0,this.id_resp=0,this.id_exec=0,this.id_motivo="",this.produtivo="",this.inicial="",this.final="",this.obs="",this.horasapon=0,this.encerramento="N",this.nlanc=0,this.user_insert=0,this.user_update=0,this.conta_descricao="",this.grupo_descricao="",this.estru_descricao="",this.resp_razao="",this.exec_razao="",this.proj_descricao="",this.motivo_descricao="",this.motivo_produtivo="",this.ativ_inicial="",this.ativ_final="",this.cli_razao=""}}},5553:(k,S,s)=>{s.r(S),s.d(S,{FeriadoModule:()=>pa});var h=s(8583),A=s(4553),u=s(3032),v=s(9071),J=s(9267),l=s(7117),j=s(2401),a=s(7716),c=s(3679),Z=s(1558),w=s(1209),C=s(6748),f=s(4655),T=s(789),F=s(2522),g=s(8295),U=s(9983),B=s(932),O=s(1095),P=s(6627),I=s(7441),N=s(2458);function V(i,n){if(1&i&&(a.TgZ(0,"mat-error"),a._uU(1),a.qZA()),2&i){const e=a.oxw();let o;a.xp6(1),a.hij(" ",null==(o=e.formulario.get("data"))||null==o.errors?null:o.errors.message,"")}}function Y(i,n){if(1&i&&(a.TgZ(0,"mat-option",17),a._uU(1),a.qZA()),2&i){const e=n.$implicit;a.Q6J("value",e.id),a.xp6(1),a.hij(" ",e.descricao," ")}}function M(i,n){if(1&i&&(a.TgZ(0,"mat-form-field",14),a.TgZ(1,"mat-label"),a._uU(2,"Nivel"),a.qZA(),a.TgZ(3,"mat-select",15),a.YNc(4,Y,2,2,"mat-option",16),a.qZA(),a.qZA()),2&i){const e=a.oxw();a.xp6(4),a.Q6J("ngForOf",e.niveis_data)}}function R(i,n){if(1&i&&(a.TgZ(0,"mat-form-field",14),a.TgZ(1,"mat-label"),a._uU(2,"Nivel"),a.qZA(),a._UZ(3,"input",18),a.qZA()),2&i){const e=a.oxw();a.xp6(3),a.Q6J("readonly",e.readOnly)}}function Q(i,n){if(1&i&&(a.TgZ(0,"mat-error"),a._uU(1),a.qZA()),2&i){const e=a.oxw();let o;a.xp6(1),a.hij(" ",null==(o=e.formulario.get("descricao"))||null==o.errors?null:o.errors.message,"")}}function G(i,n){if(1&i){const e=a.EpF();a.TgZ(0,"button",19),a.NdJ("click",function(){return a.CHM(e),a.oxw().onSubmit()}),a.TgZ(1,"mat-icon"),a._uU(2,"check"),a.qZA(),a._uU(3),a.qZA()}if(2&i){const e=a.oxw();a.xp6(3),a.hij(" ",e.acao," ")}}let K=(()=>{class i{constructor(e,o,t,r,d,p,D){this.formBuilder=e,this.feriadosService=o,this.usuariosService=t,this.globalService=r,this.route=d,this.router=p,this.appSnackBar=D,this.tipos_data=this.globalService.getlsTiposData(),this.niveis_data=this.globalService.getlsNiveisData(),this.feriado=new v.u,this.acao="Sem Defini\xe7\xe3o",this.idAcao=u.I.Inclusao,this.readOnly=!0,this.labelCadastro="Cadastro De Datas Especiais",this.id_empresa=0,this.id_usuario=0,this.id_tipo=0,this.data="",this.formulario=e.group({data:[{value:""},[(0,j.K)(!0)]],nivel:[{value:""}],nivel_:[{value:""}],descricao:[{value:""},[(0,J.S)(1,50,!0)]]}),this.feriado=new v.u,this.feriado.id_empresa=this.globalService.getIdEmpresa(),this.feriado.id_tipo=1,this.feriado.id_nivel=3,this.inscricaoRota=d.params.subscribe(m=>{this.id_empresa=m.id_empresa,this.id_usuario=m.id_usuario,this.id_tipo=m.id_tipo,this.data=m.data,this.idAcao=m.acao,this.setAcao(m.acao)}),this.setValue()}ngOnInit(){this.idAcao!=u.I.Inclusao&&(console.log("Buscando getFeriado!",this.idAcao),this.getFeriado())}ngOnDestroy(){var e,o,t;null===(e=this.inscricaoGetFeriado)||void 0===e||e.unsubscribe(),null===(o=this.inscricaoRota)||void 0===o||o.unsubscribe(),null===(t=this.inscricaoAcao)||void 0===t||t.unsubscribe()}onSubmit(){this.formulario.valid?this.executaAcao():this.appSnackBar.openFailureSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}setValue(){this.formulario.setValue({data:this.feriado.data,nivel:this.feriado.id_nivel,nivel_:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao?this.niveis_data[this.feriado.id_nivel].descricao:"",descricao:this.feriado.descricao})}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}onRetorno(){const e=this.globalService.estadoFind("feriado");if(null!=e){let o=e.getParametro();Object(o).new=this.idAcao==u.I.Inclusao,Object(o).id_retorno=this.feriado.data,e.parametro=JSON.stringify(o),this.globalService.estadoSave(e)}this.router.navigate(["/feriados/feriados","SIM"])}onCancel(){const e=this.globalService.estadoFind("grupo-user");if(null!=e){let o=e.getParametro();Object(o).new=!1,Object(o).id_retorno=this.idAcao==u.I.Consulta?this.feriado.data:"",e.parametro=JSON.stringify(o),this.globalService.estadoSave(e)}this.router.navigate(["/feriados/feriados","SIM"])}getFeriado(){this.globalService.setSpin(!0),this.inscricaoGetFeriado=this.feriadosService.getFeriado(this.id_empresa,this.id_usuario,this.id_tipo,this.data).subscribe(e=>{this.globalService.setSpin(!1),this.feriado=e,this.setValue()},e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,l.bZ)(e)}`,"OK")})}setAcao(e){switch(+e){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="Feriados - Inclus\xe3o.",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="Feriados - Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="Feriados - Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="Feriados - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var e=this;switch(this.feriado.data=this.formulario.value.data,this.feriado.id_nivel=this.formulario.value.nivel,this.feriado.descricao=this.formulario.value.descricao,+this.idAcao){case u.I.Inclusao:this.globalService.setSpin(!1),this.feriado.user_insert=this.globalService.getUsuario().id,this.inscricaoAcao=this.feriadosService.FeriadoInsert(this.feriado).subscribe(function(){var o=(0,A.Z)(function*(t){e.globalService.setSpin(!1),e.onRetorno()});return function(t){return o.apply(this,arguments)}}(),o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na INclus\xe3o ${(0,l.bZ)(o)}`,"OK")});break;case u.I.Edicao:this.globalService.setSpin(!0),this.feriado.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.feriadosService.FeriadoUpdate(this.feriado).subscribe(function(){var o=(0,A.Z)(function*(t){e.globalService.setSpin(!1),e.onRetorno()});return function(t){return o.apply(this,arguments)}}(),o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${(0,l.bZ)(o)}`,"OK")});break;case u.I.Exclusao:this.globalService.setSpin(!0),this.inscricaoAcao=this.feriadosService.FeriadoDelete(this.feriado.id_empresa,this.feriado.id_usuario,this.feriado.id_tipo,this.feriado.data).subscribe(function(){var o=(0,A.Z)(function*(t){e.globalService.setSpin(!1),e.onRetorno()});return function(t){return o.apply(this,arguments)}}(),o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${(0,l.bZ)(o)}`,"OK")})}}getAcoes(){return u.I}touchedOrDirty(e){var o,t;return!(!(null===(o=this.formulario.get(e))||void 0===o?void 0:o.touched)&&!(null===(t=this.formulario.get(e))||void 0===t?void 0:t.dirty))}getValidfield(e){var o,t;return(null===(t=null===(o=this.formulario.get(e))||void 0===o?void 0:o.errors)||void 0===t?void 0:t.ValidatorStringLen)&&this.touchedOrDirty(e)}getMensafield(e){var o,t;return null===(t=null===(o=this.formulario.get(e))||void 0===o?void 0:o.errors)||void 0===t?void 0:t.message}readOnlyKey(){return this.idAcao!=u.I.Inclusao}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(c.qu),a.Y36(Z.v),a.Y36(w.J),a.Y36(C.U),a.Y36(f.gz),a.Y36(f.F0),a.Y36(T.W))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-feriado-view"]],decls:27,vars:10,consts:[[1,"div-barra"],[1,"example-spacer"],["autocomplete","off",3,"formGroup"],[1,"moldura"],[1,"col-med-2"],["appearance","outline",1,"col-max"],["matInput","","formControlName","data","mask","00/00/0000","placeholder","DD/MM/AAAA",3,"readonly"],[4,"ngIf"],["field","","appearance","outline","class","col-max",4,"ngIf"],[1,"col-med-1"],["matInput","","formControlName","descricao","oninput","this.value = this.value.toUpperCase()",3,"readonly"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["field","","appearance","outline",1,"col-max"],["formControlName","nivel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","nivel_",3,"readonly"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,o){if(1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"mat-toolbar"),a.TgZ(2,"span",1),a.TgZ(3,"mat-label"),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"form",2),a.TgZ(6,"div",3),a.TgZ(7,"div",4),a.TgZ(8,"mat-form-field",5),a.TgZ(9,"mat-label"),a._uU(10,"Data"),a.qZA(),a._UZ(11,"input",6),a.YNc(12,V,2,1,"mat-error",7),a.qZA(),a.YNc(13,M,5,1,"mat-form-field",8),a.YNc(14,R,4,1,"mat-form-field",8),a.qZA(),a.TgZ(15,"div",9),a.TgZ(16,"mat-form-field",5),a.TgZ(17,"mat-label"),a._uU(18,"Descri\xe7\xe3o"),a.qZA(),a._UZ(19,"input",10),a.YNc(20,Q,2,1,"mat-error",7),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"div",11),a.YNc(22,G,4,1,"button",12),a.TgZ(23,"button",13),a.NdJ("click",function(){return o.onCancel()}),a.TgZ(24,"mat-icon"),a._uU(25,"cancel"),a.qZA(),a._uU(26),a.qZA(),a.qZA(),a.qZA()),2&e){let t,r;a.xp6(4),a.Oqu(o.labelCadastro),a.xp6(1),a.Q6J("formGroup",o.formulario),a.xp6(6),a.Q6J("readonly",o.readOnlyKey()),a.xp6(1),a.Q6J("ngIf",(null==(t=o.formulario.get("data"))||null==t.errors?null:t.errors.ValidatorDate)&&o.touchedOrDirty("data")),a.xp6(1),a.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao),a.xp6(1),a.Q6J("ngIf",o.idAcao==o.getAcoes().Consulta||o.idAcao==o.getAcoes().Exclusao),a.xp6(5),a.Q6J("readonly",o.readOnly),a.xp6(1),a.Q6J("ngIf",(null==(r=o.formulario.get("descricao"))||null==r.errors?null:r.errors.ValidatorStringLen)&&o.touchedOrDirty("descricao")),a.xp6(2),a.Q6J("ngIf",3!=o.idAcao),a.xp6(4),a.hij(" ",o.getLabelCancel()," ")}},directives:[F.Ye,g.hX,c._Y,c.JL,c.sg,g.KE,U.Nt,c.Fj,B.Z6,c.JJ,c.u,h.O5,O.lW,P.Hw,g.TO,I.gD,h.sg,N.ey],styles:[""]}),i})();var b=s(9243),_=s(2238),y=s(1441),q=s(320),$=s(5062),x=s(3430);class L{constructor(){this.processar=!1,this.titulo="",this.ano=""}}function z(i,n){if(1&i&&(a.TgZ(0,"mat-option",10),a._uU(1),a.qZA()),2&i){const e=n.$implicit;a.Q6J("value",e),a.xp6(1),a.hij(" ",e," ")}}let H=(()=>{class i{constructor(e,o,t,r,d,p){this.dialogRef=e,this.data=o,this.formBuilder=t,this.globalService=r,this.appSnackBar=d,this.feriadoService=p,this.anos=[2024,2025,2026],this.formulario=t.group({ano:[{value:""},[(0,J.S)(1,4)]]})}ngOnInit(){this.data.processar=!1,this.setValue()}ngOnDestroy(){var e;null===(e=this.inscricaoGetAll)||void 0===e||e.unsubscribe()}actionFunction(){this.data.processar=!0,this.data.ano=this.formulario.value.ano,this.closeModal()}setValue(){this.formulario.setValue({ano:this.data.ano})}closeModal(){this.dialogRef.close()}touchedOrDirty(e){var o,t;return!(!(null===(o=this.formulario.get(e))||void 0===o?void 0:o.touched)&&!(null===(t=this.formulario.get(e))||void 0===t?void 0:t.dirty))}getValidfield(e){var o,t;return(null===(t=null===(o=this.formulario.get(e))||void 0===o?void 0:o.errors)||void 0===t?void 0:t.ValidatorStringLen)&&this.touchedOrDirty(e)}getMensafield(e){var o,t;return null===(t=null===(o=this.formulario.get(e))||void 0===o?void 0:o.errors)||void 0===t?void 0:t.message}onChangeParametros(){this.getFeriadosContador()}getFeriadosContador(){let e=new q.$;e.id_empresa=1,e.ano=this.formulario.value.ano,e.orderby="Data",e.id_tipo=1,e.orderby="",e.contador="S",this.globalService.setSpin(!0),this.inscricaoGetAll=this.feriadoService.getFeriados_01(e).subscribe(o=>{this.globalService.setSpin(!1);let t=0;try{t=parseInt(o.total)}catch(r){t=0}0!==t&&(this.formulario.patchValue({ano:""}),this.appSnackBar.openFailureSnackBar(`Este Ano J\xe1 Possui ${o.total} Feriado(s) `,"OK"))},o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,l.bZ)(o)}`,"OK")})}itsOK(){return""!=this.formulario.value.ano}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(_.so),a.Y36(_.WI),a.Y36(c.qu),a.Y36(C.U),a.Y36(T.W),a.Y36(Z.v))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-novo-ano-dialog"]],decls:20,vars:4,consts:[[1,"div-barra"],[1,"example-spacer"],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["field","","appearance","outline",1,"col-max"],["formControlName","ano",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"mat-dialog-close","disabled","click"],[3,"value"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"mat-toolbar"),a.TgZ(2,"span",1),a._uU(3,"Importa\xe7\xe3o De Feriados De Um Determinado Ano"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(4,"form",2),a.TgZ(5,"div",3),a.TgZ(6,"mat-form-field",4),a.TgZ(7,"mat-label"),a._uU(8,"Ano"),a.qZA(),a.TgZ(9,"mat-select",5),a.NdJ("selectionChange",function(){return o.onChangeParametros()}),a.YNc(10,z,2,2,"mat-option",6),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",7),a.TgZ(12,"button",8),a.NdJ("click",function(){return o.closeModal()}),a.TgZ(13,"mat-icon"),a._uU(14,"cancel"),a.qZA(),a._uU(15," Cancelar "),a.qZA(),a.TgZ(16,"button",9),a.NdJ("click",function(){return o.actionFunction()}),a.TgZ(17,"mat-icon"),a._uU(18,"check"),a.qZA(),a._uU(19," Gravar "),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Q6J("formGroup",o.formulario),a.xp6(6),a.Q6J("ngForOf",o.anos),a.xp6(6),a.Q6J("mat-dialog-close",o.data)("disabled",!o.itsOK()))},directives:[F.Ye,c._Y,c.JL,c.sg,g.KE,g.hX,I.gD,c.JJ,c.u,h.sg,O.lW,P.Hw,_.ZT,N.ey],styles:[""]}),i})();var X=s(5626),W=s(1841);let aa=(()=>{class i{constructor(e){this.http=e}getFeriados(e){return this.http.get(`https://brasilapi.com.br/api/feriados/v1/${e}`)}}return i.\u0275fac=function(e){return new(e||i)(a.LFG(W.eN))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ea=s(3968),oa=s(1436),ta=s(7234),ia=s(5224);function ra(i,n){if(1&i&&(a.TgZ(0,"mat-option",20),a._uU(1),a.qZA()),2&i){const e=n.$implicit;a.Q6J("value",e),a.xp6(1),a.hij(" ",e," ")}}function sa(i,n){if(1&i&&(a.TgZ(0,"mat-option",20),a._uU(1),a.qZA()),2&i){const e=n.$implicit;a.Q6J("value",e),a.xp6(1),a.hij(" ",e," ")}}function na(i,n){if(1&i){const e=a.EpF();a.TgZ(0,"tr"),a.TgZ(1,"td"),a.TgZ(2,"div"),a.TgZ(3,"mat-label",21),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.TgZ(5,"td"),a.TgZ(6,"div"),a.TgZ(7,"mat-label",21),a._uU(8),a.ALo(9,"feriadoNivel"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(10,"td"),a.TgZ(11,"div"),a.TgZ(12,"mat-label",21),a._uU(13),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"td",22),a.TgZ(15,"barra-acoes",23),a.NdJ("changeOpcao",function(t){const d=a.CHM(e).$implicit;return a.oxw().escolha(t,d)}),a.qZA(),a.qZA(),a.qZA()}if(2&i){const e=n.$implicit;a.xp6(4),a.Oqu(e.data),a.xp6(4),a.AsE("",e.id_nivel,"-",a.lcZ(9,6,e.id_nivel),""),a.xp6(5),a.Oqu(e.descricao),a.xp6(2),a.Q6J("BARRA_ATIVIDADES",!1)("EXCLUIR",!1)}}let E=(()=>{class i{constructor(e,o,t,r,d,p,D,m,ma){this.formBuilder=e,this.feriadoService=o,this.router=t,this.route=r,this.appSnackBar=d,this.globalService=p,this.parametrosService=D,this.apiBrasilService=m,this.novoAnoDialog=ma,this.lsFeriadosBrasilApi=[],this.feriados=[],this.erro="",this.opcoesOrdenacao=[],this.opcoesCampo=[],this.tamPagina=50,this.controlePaginas=new x.e(this.tamPagina,0),this.retorno=!1,this.parametro=new y.M,this.parametros=e.group({ordenacao:[null],campo:[null],filtro:[null]}),this.inscricaoRota=r.params.subscribe(ha=>{void 0===ha.retorno?this.retorno=!1:(this.retorno=!0,this.globalService.estadoFind("feriado"))})}ngOnInit(){this.loadParametros()}ngOnDestroy(){var e,o,t,r,d;null===(e=this.inscricaoGetAll)||void 0===e||e.unsubscribe(),null===(o=this.inscricaoParametro)||void 0===o||o.unsubscribe(),null===(t=this.inscricaoRota)||void 0===t||t.unsubscribe(),null===(r=this.inscricaoApiBrasil)||void 0===r||r.unsubscribe(),null===(d=this.inscricaoSaveFeriado)||void 0===d||d.unsubscribe()}escolha(e,o){if(void 0!==o){let t=this.parametro.getParametro();Object(t).new=!1,Object(t).id_retorno=o.data.toString(),Object(t).page=this.controlePaginas.getPaginalAtual(),Object(t).op_ordenacao=this.opcoesOrdenacao.findIndex(r=>this.parametros.value.ordenacao==r),Object(t).op_pesquisar=this.opcoesCampo.findIndex(r=>this.parametros.value.campo==r),Object(t).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(t),this.globalService.estadoSave(this.parametro),this.router.navigate(["/feriados/feriado",o.id_empresa,o.id_usuario,o.id_tipo,o.data,e])}else{let t=this.parametro.getParametro();Object(t).new=!1,Object(t).id_retorno=0,Object(t).page=this.controlePaginas.getPaginalAtual(),Object(t).op_ordenacao=this.opcoesOrdenacao.findIndex(r=>this.parametros.value.ordenacao==r),Object(t).op_pesquisar=this.opcoesCampo.findIndex(r=>this.parametros.value.campo==r),Object(t).descricao=this.parametros.value.filtro,this.parametro.parametro=JSON.stringify(t),this.globalService.estadoSave(this.parametro),this.router.navigate(["/feriados/feriado",this.globalService.getIdEmpresa,this.globalService.getUsuario().id,0,"",e])}}getAcoes(){return u.I}getFeriados(){let e=new q.$;e.id_empresa=1,e.id_tipo=1,e.orderby="Data","Data"==this.parametros.value.campo&&(e.data=this.parametros.value.filtro),"Descri\xe7\xe3o"==this.parametros.value.campo&&(e.descricao=this.parametros.value.filtro.toUpperCase()),"Ano"==this.parametros.value.campo&&(e.ano=this.parametros.value.filtro),"Tipo"==this.parametros.value.campo&&(e.id_tipo=0),e.orderby=this.parametros.value.ordenacao,e.contador="N",e.tamPagina=this.tamPagina,e.pagina=this.controlePaginas.getPaginalAtual(),this.globalService.setSpin(!0),this.inscricaoGetAll=this.feriadoService.getFeriados_01(e).subscribe(o=>{this.globalService.setSpin(!1),this.feriados=o;const t=this.feriados.findIndex(d=>d.data==(0,l.SL)(this.parametro.getParametro(),"id_retorno"));setTimeout(()=>this.viewPort.scrollToIndex(t),10),this.retorno=!1;let r=this.parametro.getParametro();Object(r).id_retorno=0,Object(r).new=!1,this.parametro.parametro=JSON.stringify(r)},o=>{let t=this.parametro.getParametro();Object(t).id_retorno=0,Object(t).new=!1,this.retorno=!1,this.globalService.setSpin(!1),this.feriados=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,l.bZ)(o)}`,"OK")})}getFeriadosContador(){let e=new q.$;e.id_empresa=1,e.id_tipo=1,e.orderby="Data","Data"==this.parametros.value.campo&&(e.data=this.parametros.value.filtro),"Descri\xe7\xe3o"==this.parametros.value.campo&&(e.descricao=this.parametros.value.filtro.toUpperCase()),"Ano"==this.parametros.value.campo&&(e.ano=this.parametros.value.filtro),"Tipo"==this.parametros.value.campo&&(e.id_tipo=0),e.ano=this.parametros.value.filtro,e.orderby=this.parametros.value.ordenacao,e.contador="S",e.tamPagina=this.tamPagina,this.globalService.setSpin(!0),this.inscricaoGetAll=this.feriadoService.getFeriados_01(e).subscribe(o=>{if(this.globalService.setSpin(!1),this.controlePaginas=new x.e(this.tamPagina,0==o.total?1:o.total),this.retorno)if((0,l.xc)(this.parametro.getParametro(),"new"))this.controlePaginas.goLast();else{let t=this.parametro.getParametro();this.controlePaginas.setPaginaAtual(Object(t).page)}this.getFeriados()},o=>{this.globalService.setSpin(!1),this.controlePaginas=new x.e(this.tamPagina,0),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Feriados ${(0,l.bZ)(o)}`,"OK")})}getParametro(){this.globalService.setSpin(!0);let e=new $.E;e.id_empresa=this.parametro.id_empresa,e.modulo=this.parametro.modulo,e.assinatura=this.parametro.assinatura,e.id_usuario=this.parametro.id_usuario,e.orderby="Usu\xe1rio",this.inscricaoParametro=this.parametrosService.getParametrosParametro01(e).subscribe(o=>{this.globalService.setSpin(!1),this.parametro=new y.M,this.parametro.id_empresa=o[0].id_empresa,this.parametro.modulo=o[0].modulo,this.parametro.id_usuario=o[0].id_usuario,this.parametro.assinatura=o[0].assinatura,this.parametro.parametro=o[0].parametro,this.parametro.user_insert=o[0].user_insert,this.parametro.user_update=o[0].user_update,this.opcoesOrdenacao=(0,l.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,l.FO)(this.parametro.getParametro(),"pesquisar"),this.setValues(),this.getFeriadosContador()},o=>{this.globalService.setSpin(!1),this.setValues(),this.getFeriadosContador()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id;let e=this.parametro.getParametro();Object(e).op_ordenacao=this.opcoesOrdenacao.findIndex(o=>this.parametros.value.ordenacao==o),Object(e).op_pesquisar=this.opcoesCampo.findIndex(o=>this.parametros.value.campo==o),Object(e).descricao=this.parametros.value.filtro,Object(e).page=0,Object(e).new=!1,this.parametro.parametro=JSON.stringify(e),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(o=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,l.bZ)(o)}`,"OK")})}setValues(){this.parametros.setValue({ordenacao:this.opcoesOrdenacao[(0,l.P0)(this.parametro.getParametro(),"op_ordenacao")],campo:this.opcoesCampo[(0,l.P0)(this.parametro.getParametro(),"op_pesquisar")],filtro:(0,l.SL)(this.parametro.getParametro(),"descricao")})}getTexto(){return l.fd}onChangePage(){this.getFeriados()}onChangeParametros(){this.getFeriadosContador()}onHome(){this.router.navigate([""])}onSaveConfig(){this.updateParametros()}onNovoAno(){const e=new L;e.titulo="FERIADOS ANUAIS";const o=new _.vA;o.disableClose=!0,o.id="question-dialog",o.width="600px",o.width="600px",o.data=e,this.novoAnoDialog.open(H,o).beforeClosed().subscribe(r=>{void 0!==r&&r.processar&&this.loadApiBrasilFeriados(r.ano)})}loadParametros(){if(this.parametro=new y.M,this.parametro.id_empresa=this.globalService.getIdEmpresa(),this.parametro.modulo="feriado",this.parametro.assinatura="V1.00 21/03/2024",this.parametro.id_usuario=this.globalService.usuario.id,this.parametro.parametro='\n    {\n      "op_ordenacao": 0,\n      "ordenacao": ["Data", "Descri\xe7\xe3o"],\n      "op_pesquisar": 1,\n      "pesquisar": ["Data", "Descri\xe7\xe3o", "Ano" , "Tipo"],\n      "descricao": "",\n      "page": 1,\n      "new": false,\n      "id_retorno":""\n    }',this.opcoesOrdenacao=(0,l.FO)(this.parametro.getParametro(),"ordenacao"),this.opcoesCampo=(0,l.FO)(this.parametro.getParametro(),"pesquisar"),this.retorno&&null!==this.globalService.estadoFind("feriado")){const e=this.globalService.estadoFind("feriado");if(null!=e){if((0,l.xc)(e.getParametro(),"new")){let o=this.parametro.getParametro();Object(o).id_retorno=(0,l.P0)(e.getParametro(),"id_retorno"),this.parametro.parametro=JSON.stringify(o),this.setPosicaoInclusao()}else this.controlePaginas.setPaginaAtual((0,l.P0)(e.getParametro(),"page")),this.parametro.setParametro(e.getParametro());this.globalService.estadoDelete(e)}this.setValues(),this.getFeriadosContador()}else this.getParametro()}setPosicaoInclusao(){const e=this.parametro.getParametro();Object(e).op_ordenacao=0,Object(e).op_pesquisar=0,Object(e).descricao="",Object(e).new=!0,this.parametro.setParametro(e)}loadApiBrasilFeriados(e){this.globalService.setSpin(!0),this.inscricaoApiBrasil=this.apiBrasilService.getFeriados(e).subscribe(o=>{this.globalService.setSpin(!1),this.lsFeriadosBrasilApi=o,console.log(this.lsFeriadosBrasilApi),this.saveFeriados(e)},o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa API BRASIL ${(0,l.bZ)(o)}`,"OK")})}saveFeriados(e){let o=[];this.globalService.setSpin(!0),this.lsFeriadosBrasilApi.forEach(d=>{const p=new v.u;p.id_empresa=this.globalService.id_empresa,p.id_usuario=0,p.id_tipo=1,p.id_nivel=3,p.data=(0,l.qS)(d.date),p.descricao=d.name.toUpperCase(),p.user_insert=this.globalService.usuario.id,o.push(p)});const t=new v.u;t.id_empresa=this.globalService.id_empresa,t.id_usuario=0,t.id_tipo=1,t.id_nivel=1,t.data="20/11/"+e,t.descricao="DIA DA CONCI\xcaNCIA NEGRA",t.user_insert=this.globalService.usuario.id,o.push(t);const r=new v.u;r.id_empresa=this.globalService.id_empresa,r.id_usuario=0,r.id_tipo=1,r.id_nivel=1,r.data="08/12/"+e,r.descricao="NOSSA SENHARA - PADROEIRA CPS",r.user_insert=this.globalService.usuario.id,o.push(r),this.inscricaoSaveFeriado=this.feriadoService.FeriadoinsertAllFeriados(o).subscribe(d=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`${d.message}`,"OK")},d=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Inclus\xe3o De Feriados ${(0,l.bZ)(d)}`,"OK")})}}return i.\u0275fac=function(e){return new(e||i)(a.Y36(c.qu),a.Y36(Z.v),a.Y36(f.F0),a.Y36(f.gz),a.Y36(T.W),a.Y36(C.U),a.Y36(X.u),a.Y36(aa),a.Y36(_.uw))},i.\u0275cmp=a.Xpm({type:i,selectors:[["app-crud-feriado"]],viewQuery:function(e,o){if(1&e&&a.Gf(b.N7,5),2&e){let t;a.iGM(t=a.CRH())&&(o.viewPort=t.first)}},decls:48,vars:7,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Novo Ano","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],[1,"parametros"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo",3,"selectionChange"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","filtro","oninput","this.value = this.value.toUpperCase()"],[1,"content",3,"itemSize"],[1,"Browse-Scroll"],[1,"coluna-cabec"],[4,"cdkVirtualFor","cdkVirtualForOf"],[3,"value"],[1,"Browse_Lanc_td"],[1,"acoes"],[3,"BARRA_ATIVIDADES","EXCLUIR","changeOpcao"]],template:function(e,o){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"mat-toolbar"),a.TgZ(2,"span",1),a._uU(3,"Feriados: "),a.qZA(),a.TgZ(4,"app-navegator",2),a.NdJ("changePage",function(){return o.onChangePage()}),a.qZA(),a.TgZ(5,"button",3),a.NdJ("click",function(){return o.getFeriadosContador()}),a.TgZ(6,"mat-icon"),a._uU(7,"rotate_right"),a.qZA(),a.qZA(),a.TgZ(8,"button",4),a.NdJ("click",function(){return o.onNovoAno()}),a.TgZ(9,"mat-icon"),a._uU(10,"calendar_today"),a.qZA(),a.qZA(),a.TgZ(11,"button",5),a.NdJ("click",function(){return o.onSaveConfig()}),a.TgZ(12,"mat-icon"),a._uU(13,"brightness_high"),a.qZA(),a.qZA(),a.TgZ(14,"button",6),a.NdJ("click",function(){return o.onHome()}),a.TgZ(15,"mat-icon"),a._uU(16,"home"),a.qZA(),a.qZA(),a.TgZ(17,"button",7),a.NdJ("click",function(){return o.escolha(o.getAcoes().Inclusao)}),a.TgZ(18,"mat-icon"),a._uU(19,"add_circle_outline"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(20,"div",8),a.TgZ(21,"form",9),a.TgZ(22,"mat-form-field",10),a.TgZ(23,"mat-label"),a._uU(24,"Ordena\xe7\xe3o"),a.qZA(),a.TgZ(25,"mat-select",11),a.NdJ("selectionChange",function(){return o.onChangeParametros()}),a.YNc(26,ra,2,2,"mat-option",12),a.qZA(),a.qZA(),a.TgZ(27,"mat-form-field",10),a.TgZ(28,"mat-label"),a._uU(29,"Pesquisar Por"),a.qZA(),a.TgZ(30,"mat-select",13),a.NdJ("selectionChange",function(){return o.onChangeParametros()}),a.YNc(31,sa,2,2,"mat-option",12),a.qZA(),a.qZA(),a.TgZ(32,"mat-form-field",14),a.TgZ(33,"mat-label"),a._uU(34,"Descri\xe7\xe3o"),a.qZA(),a._UZ(35,"input",15),a.qZA(),a.qZA(),a.qZA(),a.TgZ(36,"cdk-virtual-scroll-viewport",16),a.TgZ(37,"table",17),a.TgZ(38,"tr",18),a.TgZ(39,"th"),a._uU(40,"Data"),a.qZA(),a.TgZ(41,"th"),a._uU(42,"Nivel"),a.qZA(),a.TgZ(43,"th"),a._uU(44,"Descri\xe7\xe3o"),a.qZA(),a.TgZ(45,"th"),a._uU(46,"A\xc7\xd5ES"),a.qZA(),a.qZA(),a.YNc(47,na,16,8,"tr",19),a.qZA(),a.qZA()),2&e&&(a.xp6(4),a.Q6J("controle",o.controlePaginas),a.xp6(13),a.Q6J("matTooltip",o.getTexto().incluir),a.xp6(4),a.Q6J("formGroup",o.parametros),a.xp6(5),a.Q6J("ngForOf",o.opcoesOrdenacao),a.xp6(5),a.Q6J("ngForOf",o.opcoesCampo),a.xp6(5),a.Q6J("itemSize",50),a.xp6(11),a.Q6J("cdkVirtualForOf",o.feriados))},directives:[F.Ye,ea.J,O.lW,oa.gM,P.Hw,c._Y,c.JL,c.sg,g.KE,g.hX,I.gD,c.JJ,c.u,h.sg,U.Nt,c.Fj,b.N7,b.xd,b.x0,N.ey,ta.C],pipes:[ia.R],styles:['.content[_ngcontent-%COMP%]{height:60%;overflow:auto}.Browse-Scroll[_ngcontent-%COMP%]{border-collapse:collapse;margin-left:auto;margin-right:auto;width:100%;height:inherit}td[_ngcontent-%COMP%]{font-size:small;color:#00f;font-family:"Times New Roman",Times,serif}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.acoes[_ngcontent-%COMP%]{color:#8b0000;width:100px}.go-up[_ngcontent-%COMP%]{margin-top:-10px}']}),i})();const la=[{path:"",redirectTo:"feriados",pathMatch:"full"},{path:"feriados",component:E},{path:"feriados/:retorno",component:E},{path:"feriado/:id_empresa/:id_usuario/:id_tipo/:data/:acao",component:K}];let ca=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[f.Bz.forChild(la)],f.Bz]}),i})();var da=s(5426),ua=s(4466);let pa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=a.oAB({type:i}),i.\u0275inj=a.cJS({imports:[[h.ez,ca,da.q,c.u5,b.Cl,c.UX,ua.m,B.yI.forChild()]]}),i})()}}]);