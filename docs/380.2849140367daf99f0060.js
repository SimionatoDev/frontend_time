"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[380],{380:(S,b,r)=>{r.r(b),r.d(b,{GruEcoModule:()=>R});var f=r(8583),d=r(4553),p=r(317),s=r(3032),Z=r(9267),o=r(7716),n=r(3679),l=r(1324),v=r(6748),m=r(4655),h=r(789),T=r(2522),C=r(8295),G=r(1095),x=r(6627),_=r(9983);function y(a,c){if(1&a){const e=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){return o.CHM(e),o.oxw().onSubmit()}),o.TgZ(1,"mat-icon"),o._uU(2,"check"),o.qZA(),o._uU(3),o.qZA()}if(2&a){const e=o.oxw();o.xp6(3),o.hij(" ",e.acao," ")}}function O(a,c){if(1&a&&(o.TgZ(0,"mat-error"),o._uU(1),o.qZA()),2&a){const e=o.oxw();let t;o.xp6(1),o.Oqu(null==(t=e.formulario.get("razao"))||null==t.errors?null:t.errors.message)}}let I=(()=>{class a{constructor(e,t,i,g,u,P){this.formBuilder=e,this.grupoEconomicoService=t,this.globalService=i,this.route=g,this.router=u,this.appSnackBar=P,this.grupo=new p.n,this.acao="Sem Defini\xe7\xe3o",this.idAcao=s.I.Inclusao,this.readOnly=!0,this.durationInSeconds=2,this.labelCadastro="",this.formulario=e.group({id:[{value:"",disabled:!0}],razao:[{value:""},[(0,Z.S)(3,20,!0)]]}),this.grupo=new p.n,this.inscricaoRota=g.params.subscribe(A=>{this.grupo.id_empresa=A.id_empresa,this.grupo.id=A.id,this.idAcao=A.acao,this.setAcao(A.acao)})}ngOnInit(){this.idAcao==s.I.Inclusao?(this.grupo=new p.n,this.grupo.id_empresa=1):this.getGrupo(),this.setValue()}ngOnDestroy(){var e,t,i;null===(e=this.inscricaoGetEmpresa)||void 0===e||e.unsubscribe(),null===(t=this.inscricaoRota)||void 0===t||t.unsubscribe(),null===(i=this.inscricaoAcao)||void 0===i||i.unsubscribe()}onSubmit(){this.formulario.valid?this.executaAcao():this.appSnackBar.openFailureSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}setValue(){this.formulario.setValue({id:this.grupo.id,razao:this.grupo.razao})}getLabelCancel(){return this.idAcao==s.I.Consulta?"Voltar":"Cancelar"}onCancel(){this.router.navigate(["/economicos/economicos"])}getGrupo(){this.globalService.setSpin(!0),this.inscricaoGetEmpresa=this.grupoEconomicoService.getGrupoEco(this.grupo.id_empresa,this.grupo.id).subscribe(e=>{this.globalService.setSpin(!1),this.grupo=e,this.setValue()},e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Empresas ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}setAcao(e){switch(+e){case s.I.Inclusao:this.acao="Gravar",this.labelCadastro="Grupos Econ\xf4micos - Inclus\xe3o.",this.readOnly=!1;break;case s.I.Edicao:this.acao="Gravar",this.labelCadastro="Grupos Econ\xf4micos - Altera\xe7\xe3o.",this.readOnly=!1;break;case s.I.Consulta:this.acao="Voltar",this.labelCadastro="Grupos Econ\xf4micos - Consulta.",this.readOnly=!0;break;case s.I.Exclusao:this.acao="Excluir",this.labelCadastro="Grupos Econ\xf4micos - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var e=this;switch(this.grupo.razao=this.formulario.value.razao,+this.idAcao){case s.I.Inclusao:this.grupo.user_insert=this.globalService.getUsuario().id,this.globalService.setSpin(!0),this.inscricaoAcao=this.grupoEconomicoService.GrupoEcoInsert(this.grupo).subscribe(function(){var t=(0,d.Z)(function*(i){e.globalService.setSpin(!1),e.onCancel()});return function(i){return t.apply(this,arguments)}}(),t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na INclus\xe3o ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")});break;case s.I.Edicao:this.grupo.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.grupoEconomicoService.GrupoEcoUpdate(this.grupo).subscribe(function(){var t=(0,d.Z)(function*(i){e.globalService.setSpin(!1),e.onCancel()});return function(i){return t.apply(this,arguments)}}(),t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")});break;case s.I.Exclusao:this.globalService.setSpin(!0),this.inscricaoAcao=this.grupoEconomicoService.GrupoEcoDelete(this.grupo.id_empresa,this.grupo.id).subscribe(function(){var t=(0,d.Z)(function*(i){e.globalService.setSpin(!1),e.onCancel()});return function(i){return t.apply(this,arguments)}}(),t=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")})}}delay(e){return new Promise(t=>setTimeout(t,e))}getAcoes(){return s.I}touchedOrDirty(e){var t,i;return!(!(null===(t=this.formulario.get(e))||void 0===t?void 0:t.touched)&&!(null===(i=this.formulario.get(e))||void 0===i?void 0:i.dirty))}}return a.\u0275fac=function(e){return new(e||a)(o.Y36(n.qu),o.Y36(l.Z),o.Y36(v.U),o.Y36(m.gz),o.Y36(m.F0),o.Y36(h.W))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-gru-eco-view"]],decls:22,vars:6,consts:[[1,"div-barra"],[1,"example-spacer"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","id"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","razao","oninput","this.value = this.value.toUpperCase()","autofocus","",3,"readonly"],[4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){if(1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-toolbar"),o.TgZ(2,"span",1),o.TgZ(3,"mat-label"),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"div",2),o.YNc(6,y,4,1,"button",3),o.TgZ(7,"button",4),o.NdJ("click",function(){return t.onCancel()}),o.TgZ(8,"mat-icon"),o._uU(9,"cancel"),o.qZA(),o._uU(10),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(11,"form",5),o.TgZ(12,"div",6),o.TgZ(13,"mat-form-field",7),o.TgZ(14,"mat-label"),o._uU(15,"C\xd3DIGO"),o.qZA(),o._UZ(16,"input",8),o.qZA(),o.TgZ(17,"mat-form-field",9),o.TgZ(18,"mat-label"),o._uU(19,"Raz\xe3o Social"),o.qZA(),o._UZ(20,"input",10),o.YNc(21,O,2,1,"mat-error",11),o.qZA(),o.qZA(),o.qZA()),2&e){let i;o.xp6(4),o.Oqu(t.labelCadastro),o.xp6(2),o.Q6J("ngIf",3!=t.idAcao),o.xp6(4),o.hij(" ",t.getLabelCancel()," "),o.xp6(1),o.Q6J("formGroup",t.formulario),o.xp6(9),o.Q6J("readonly",t.readOnly),o.xp6(1),o.Q6J("ngIf",(null==(i=t.formulario.get("razao"))||null==i.errors?null:i.errors.ValidatorStringLen)&&t.touchedOrDirty("razao"))}},directives:[T.Ye,C.hX,f.O5,G.lW,x.Hw,n._Y,n.JL,n.sg,C.KE,_.Nt,n.Fj,n.JJ,n.u,C.TO],styles:[""]}),a})();var U=r(7117),q=r(1299),k=r(1436),N=r(7441),J=r(2458),E=r(3738);function F(a,c){if(1&a&&(o.TgZ(0,"mat-option",15),o._uU(1),o.qZA()),2&a){const e=c.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function $(a,c){if(1&a&&(o.TgZ(0,"mat-option",15),o._uU(1),o.qZA()),2&a){const e=c.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function V(a,c){if(1&a){const e=o.EpF();o.TgZ(0,"div",16),o.TgZ(1,"mat-card",17),o.NdJ("click",function(){const g=o.CHM(e).$implicit,u=o.oxw();return u.escolha(u.getAcoes().Consulta,g)}),o.TgZ(2,"mat-card-actions"),o.TgZ(3,"span",18),o.TgZ(4,"button",4),o.NdJ("click",function(){const g=o.CHM(e).$implicit,u=o.oxw();return u.escolha(u.getAcoes().Edicao,g)}),o.TgZ(5,"mat-icon"),o._uU(6,"edit"),o.qZA(),o.qZA(),o.TgZ(7,"button",4),o.NdJ("click",function(){const g=o.CHM(e).$implicit,u=o.oxw();return u.escolha(u.getAcoes().Exclusao,g)}),o.TgZ(8,"mat-icon"),o._uU(9,"delete"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(10,"mat-card-content"),o.TgZ(11,"mat-label",19),o._uU(12,"C\xd3DIGO:"),o.qZA(),o.TgZ(13,"mat-label",20),o._uU(14),o.qZA(),o.TgZ(15,"mat-label",21),o._uU(16,"Raz\xe3o Social:"),o.qZA(),o.TgZ(17,"mat-label",20),o._uU(18),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&a){const e=c.$implicit,t=o.oxw();o.xp6(4),o.Q6J("matTooltip",t.getTexto().alterar),o.xp6(3),o.Q6J("matTooltip",t.getTexto().excluir),o.xp6(7),o.Oqu(e.id),o.xp6(4),o.Oqu(e.razao)}}const B=[{path:"",redirectTo:"economicos",pathMatch:"full"},{path:"economicos",component:(()=>{class a{constructor(e,t,i,g,u){this.formBuilder=e,this.grupoEconomicoService=t,this.router=i,this.appSnackBar=g,this.globalService=u,this.grupos=[],this.erro="",this.opcoesOrdenacao=["C\xf3digo","Raz\xe3o"],this.opcoesCampo=["C\xf3digo","Raz\xe3o"],this.parametros=e.group({ordenacao:[null],campo:[null],filtro:[null]}),this.setValues(),this.getGrupos()}ngOnInit(){this.getGrupos()}ngOnDestroy(){var e,t;null===(e=this.inscricaoGetAll)||void 0===e||e.unsubscribe(),null===(t=this.inscricaoGetFiltro)||void 0===t||t.unsubscribe()}escolha(e,t){this.router.navigate(void 0!==t?["/economicos/economico",t.id_empresa,t.id,e]:["/economicos/economico",1,0,e])}getAcoes(){return s.I}getGrupos(){let e=new q.y;if(e.id_empresa=1,"C\xf3digo"==this.parametros.value.campo){let t=parseInt(this.parametros.value.filtro,10);console.log("key",t),e.id=isNaN(t)?0:t}"Raz\xe3o"==this.parametros.value.campo&&(e.razao=this.parametros.value.filtro.toUpperCase()),e.orderby=this.parametros.value.ordenacao,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.grupoEconomicoService.getGrupoEcos_01(e).subscribe(t=>{this.globalService.setSpin(!1),this.grupos=t},t=>{this.globalService.setSpin(!1),this.grupos=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Grupos Econ\xf4micos ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")})}setValues(){this.parametros.setValue({ordenacao:"C\xf3digo",campo:"C\xf3digo",filtro:""})}getTexto(){return U.fd}onHome(){this.router.navigate([""])}}return a.\u0275fac=function(e){return new(e||a)(o.Y36(n.qu),o.Y36(l.Z),o.Y36(m.F0),o.Y36(h.W),o.Y36(v.U))},a.\u0275cmp=o.Xpm({type:a,selectors:[["app-crud-grupo-eco"]],decls:31,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],[1,"parametros"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","filtro"],[1,"Browse"],["class","linha",4,"ngFor","ngForOf"],[3,"value"],[1,"linha"],[1,"example-card",3,"click"],[1,"button-container-right"],[1,"labelTitleFirst"],[1,"labelData"],[1,"labelTitle"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-toolbar"),o.TgZ(2,"span",1),o._uU(3,"Grp Econ\xf4micos: "),o.qZA(),o.TgZ(4,"button",2),o.NdJ("click",function(){return t.onHome()}),o.TgZ(5,"mat-icon"),o._uU(6,"home"),o.qZA(),o.qZA(),o.TgZ(7,"button",3),o.NdJ("click",function(){return t.getGrupos()}),o.TgZ(8,"mat-icon"),o._uU(9,"rotate_right"),o.qZA(),o.qZA(),o.TgZ(10,"button",4),o.NdJ("click",function(){return t.escolha(t.getAcoes().Inclusao)}),o.TgZ(11,"mat-icon"),o._uU(12,"add_circle_outline"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"div",5),o.TgZ(14,"form",6),o.TgZ(15,"mat-form-field",7),o.TgZ(16,"mat-label"),o._uU(17,"Ordena\xe7\xe3o"),o.qZA(),o.TgZ(18,"mat-select",8),o.YNc(19,F,2,2,"mat-option",9),o.qZA(),o.qZA(),o.TgZ(20,"mat-form-field",7),o.TgZ(21,"mat-label"),o._uU(22,"Pesquisar Por"),o.qZA(),o.TgZ(23,"mat-select",10),o.YNc(24,$,2,2,"mat-option",9),o.qZA(),o.qZA(),o.TgZ(25,"mat-form-field",11),o.TgZ(26,"mat-label"),o._uU(27,"Descri\xe7\xe3o"),o.qZA(),o._UZ(28,"input",12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(29,"div",13),o.YNc(30,V,19,4,"div",14),o.qZA()),2&e&&(o.xp6(10),o.Q6J("matTooltip",t.getTexto().incluir),o.xp6(4),o.Q6J("formGroup",t.parametros),o.xp6(5),o.Q6J("ngForOf",t.opcoesOrdenacao),o.xp6(5),o.Q6J("ngForOf",t.opcoesCampo),o.xp6(6),o.Q6J("ngForOf",t.grupos))},directives:[T.Ye,G.lW,k.gM,x.Hw,n._Y,n.JL,n.sg,C.KE,C.hX,N.gD,n.JJ,n.u,f.sg,_.Nt,n.Fj,J.ey,E.a8,E.hq,E.dn],styles:[""]}),a})()},{path:"economico/:id_empresa/:id/:acao",component:I,canActivate:[r(1759).C]}];let D=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[m.Bz.forChild(B)],m.Bz]}),a})();var w=r(932),Q=r(5426),M=r(4466);let R=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[f.ez,D,Q.q,n.u5,n.UX,M.m,w.yI.forChild()]]}),a})()},9267:(S,b,r)=>{function f(d,p,s=!1){return Z=>{let o="",n=!0;const l=Z.value;return s||null!=l?s&&null==l||s&&0==l.length?{ValidatorStringLen:!0,message:"Dado Obrigat\xf3rio"}:s||0!=l.length?(d>0&&l.length<d&&(o=`Campo Dever\xe1 Ter No Minimo ${d} Caracteres.`,n=!1),p>0&&l.length>p&&(o=`Campo Dever\xe1 Ter No M\xe1ximo ${p} Caracteres.`,n=!1),n?null:{ValidatorStringLen:!0,message:o}):null:null}}r.d(b,{S:()=>f})},4553:(S,b,r)=>{function f(p,s,Z,o,n,l,v){try{var m=p[l](v),h=m.value}catch(T){return void Z(T)}m.done?s(h):Promise.resolve(h).then(o,n)}function d(p){return function(){var s=this,Z=arguments;return new Promise(function(o,n){var l=p.apply(s,Z);function v(h){f(l,o,n,v,m,"next",h)}function m(h){f(l,o,n,v,m,"throw",h)}v(void 0)})}}r.d(b,{Z:()=>d})}}]);