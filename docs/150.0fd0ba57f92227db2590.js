"use strict";(self.webpackChunktimer=self.webpackChunktimer||[]).push([[150],{5150:(Y,x,m)=>{m.r(x),m.d(x,{EstruturaModule:()=>_o});var d=m(8583),g=m(4655),f=m(8239);class E{constructor(){this.id=0,this.nome=""}}var h=m(34),c=m(3679),u=m(3032),C=m(9267),A=m(6468),t=m(7716),v=m(4343),J=m(1209),w=m(7006),N=m(789),S=m(2522),b=m(8295),I=m(1095),U=m(6627),q=m(9983),L=m(7539),k=m(7441),O=m(2458);function H(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSubmit()}),t.TgZ(1,"mat-icon"),t._uU(2,"check"),t.qZA(),t._uU(3),t.qZA()}if(2&a){const o=t.oxw();t.xp6(3),t.hij(" ",o.acao," ")}}function G(a,s){if(1&a&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.tipo),t.xp6(1),t.hij(" ",o.descricao," ")}}function K(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",11),t.TgZ(1,"mat-label"),t._uU(2,"Tipo:"),t.qZA(),t.TgZ(3,"mat-select",23),t.YNc(4,G,2,2,"mat-option",24),t.qZA(),t.qZA()),2&a){const o=t.oxw();t.xp6(4),t.Q6J("ngForOf",o.tipos)}}function j(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",11),t.TgZ(1,"mat-label"),t._uU(2,"Tipo:"),t.qZA(),t._UZ(3,"input",26),t.qZA()),2&a){const o=t.oxw();t.xp6(3),t.Q6J("readonly",o.readOnly)}}function R(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Descri\xe7\xe3o m\xe1ximo 300 letras"),t.qZA())}function z(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"li"),t.TgZ(1,"mat-checkbox",27),t.NdJ("ngModelChange",function(i){return t.CHM(o).$implicit.escolhido=i})("change",function(i){return t.CHM(o),t.oxw().updateAllComplete(i)}),t._uU(2),t.qZA(),t.qZA()}if(2&a){const o=s.$implicit;t.xp6(1),t.Q6J("ngModel",o.escolhido),t.xp6(1),t.hij(" ",o.nome," ")}}let W=(()=>{class a{constructor(o,e,i,r,n,l,p){this.formBuilder=o,this.estruturaService=e,this.usuariosService=i,this.globalService=r,this.route=n,this.router=l,this.appSnackBar=p,this.estrutura=new h.c,this.acao="Sem Defini\xe7\xe3o",this.idAcao=u.I.Inclusao,this.readOnly=!0,this.tipos=[{tipo:"C",descricao:"CONTA"},{tipo:"S",descricao:"SUBCONTA"},{tipo:"O",descricao:"OPERACIONAL"}],this.respostas=[{sigla:"S",descricao:"SIM"},{sigla:"N",descricao:"N\xc3O"}],this.durationInSeconds=2,this.labelCadastro="",this.choices={id:0,nome:"Todos",escolhido:!1,users:[]},this.lsUsuarios=[],this.formulario=o.group({conta:[{value:""}],versao:[{value:""}],subconta:[{value:""},[c.kI.required,c.kI.minLength(2),c.kI.maxLength(14)]],descricao:[{value:""},[c.kI.required,c.kI.minLength(1),c.kI.maxLength(300)]],nivel:[{value:""}],tipo:[{value:""},[(0,C.S)(1,2,!0)]],tipo_:[{value:""}],controle:[{value:""}]}),this.estrutura=new h.c,this.inscricaoRota=n.params.subscribe(_=>{console.log("==>",_),this.estrutura.id_empresa=_.id_empresa,this.estrutura.conta=_.conta,this.estrutura.versao=_.versao,this.estrutura.subconta=_.subconta,this.idAcao=_.acao,this.setAcao(_.acao)})}ngOnInit(){this.idAcao==u.I.Inclusao?(this.estrutura=new h.c,this.estrutura.id_empresa=1,this.estrutura.conta="NOVA",this.estrutura.versao="0101",this.estrutura.subconta="NOVA",this.estrutura.nivel=1,this.estrutura.nivel_maxi=7,this.estrutura.tipo="C",this.estrutura.controle="N",this.estrutura.user_insert=1,this.estrutura.status=1,this.setValue()):this.getEstrutura(),this.getAuditores()}ngOnDestroy(){var o,e,i,r;null===(o=this.inscricaoGetEstrutura)||void 0===o||o.unsubscribe(),null===(e=this.inscricaoRota)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoAcao)||void 0===i||i.unsubscribe(),null===(r=this.inscricaoAuditor)||void 0===r||r.unsubscribe()}onSubmit(){this.hasUsers()?this.formulario.valid?this.executaAcao():this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"):this.appSnackBar.openSuccessSnackBar("Pelo Menos Um Usu\xe1rio Deve Ser Escolhido.","OK")}onCancel(){this.router.navigate(["/estruturas"])}getEstrutura(){this.globalService.setSpin(!0),this.inscricaoGetEstrutura=this.estruturaService.getConta(this.estrutura.id_empresa,this.estrutura.conta,this.estrutura.versao).subscribe(o=>{this.globalService.setSpin(!1),this.estrutura=o,this.setValue()},o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nas EStruturas ${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")})}getAuditores(){const o=new A.w,e=this.usuariosService.getGruposDiretoria(),i=this.usuariosService.getGruposCoordenador(),r=this.usuariosService.getGruposAuditor();o.id_empresa=this.globalService.id_empresa,e.forEach(n=>{o.grupo.push(n)}),i.forEach(n=>{o.grupo.push(n)}),r.forEach(n=>{o.grupo.push(n)}),o.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoAuditor=this.usuariosService.getusuarios_01(o).subscribe(n=>{this.globalService.setSpin(!1),this.choices.users=[],n.forEach(l=>{var p;null===(p=this.choices.users)||void 0===p||p.push({id:l.id,nome:l.razao,escolhido:!1})}),this.choices.escolhido=!0,this.setAllUsers(!0)},n=>{this.globalService.setSpin(!1),this.choices.escolhido=!1,this.choices.users=[],this.setAllUsers(!1),this.appSnackBar.openFailureSnackBar(`${n.error.tabela} - ${n.error.erro} - ${n.error.message}`,"OK")})}setValue(){this.formulario.setValue({conta:this.estrutura.conta,versao:this.estrutura.versao,subconta:this.estrutura.subconta,descricao:this.estrutura.descricao,nivel:this.estrutura.nivel,tipo:this.estrutura.tipo,tipo_:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao?this.tipos[this.tipos.findIndex(o=>o.tipo==this.estrutura.tipo)].descricao:"",controle:"S"==this.estrutura.controle?"SIM":"N\xc3O"})}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}setAcao(o){switch(+o){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="Estrutura - Sem Controle Inclus\xe3o.",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="Estrutura - Sem Controle Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="Estrutura - Sem Controle Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="Estrutura - Sem Controle Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var e,o=this;switch(this.estrutura.conta=this.formulario.value.conta,this.estrutura.subconta=this.formulario.value.subconta,this.estrutura.descricao=this.formulario.value.descricao,this.estrutura.nivel=this.formulario.value.nivel,this.estrutura.tipo=this.formulario.value.tipo,console.log("registro",this.estrutura),+this.idAcao){case u.I.Inclusao:this.estrutura.conta="",this.estrutura.subconta="",this.lsUsuarios=[],null===(e=this.choices.users)||void 0===e||e.forEach(i=>{const r=new E;i.escolhido&&(r.id=i.id,r.nome=i.nome,this.lsUsuarios.push(r))}),this.inscricaoAcao=this.estruturaService.EstruturaInsert(this.estrutura,this.lsUsuarios.length>0?this.lsUsuarios:null).subscribe(function(){var i=(0,f.Z)(function*(r){o.onCancel()});return function(r){return i.apply(this,arguments)}}(),i=>{this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xe3o ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")});break;case u.I.Edicao:this.inscricaoAcao=this.estruturaService.EstruturaUpdate(this.estrutura).subscribe(function(){var i=(0,f.Z)(function*(r){o.onCancel()});return function(r){return i.apply(this,arguments)}}(),i=>{console.log("Error",i.error),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")});break;case u.I.Exclusao:this.inscricaoAcao=this.estruturaService.EstruturaAllDelete(this.estrutura.id_empresa,this.estrutura.conta,this.estrutura.versao).subscribe(function(){var i=(0,f.Z)(function*(r){o.onCancel()});return function(r){return i.apply(this,arguments)}}(),i=>{this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${i.error.tabela} - ${i.error.erro} - ${i.error.message}`,"OK")})}}delay(o){return new Promise(e=>setTimeout(e,o))}getAcoes(){return u.I}touchedOrDirty(o){var e,i;return!(!(null===(e=this.formulario.get(o))||void 0===e?void 0:e.touched)&&!(null===(i=this.formulario.get(o))||void 0===i?void 0:i.dirty))}hasUsers(){var o;let e=!1;return null===(o=this.choices.users)||void 0===o||o.forEach(i=>{i.escolhido&&(e=!0)}),e}setAllUsers(o){var e;this.choices.escolhido=o,null===(e=this.choices.users)||void 0===e||e.forEach(i=>{i.escolhido=o})}updateAllComplete(o){console.log(o)}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(c.qu),t.Y36(v.K),t.Y36(J.J),t.Y36(w.U),t.Y36(g.gz),t.Y36(g.F0),t.Y36(N.W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-crud-estrutura-sem-controle"]],decls:51,vars:13,consts:[[1,"div-barra"],[1,"example-spacer"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-6"],["appearance","outline",1,"col-max"],["matInput","","formControlName","conta","readonly","true"],["matInput","","formControlName","versao","readonly","true"],["matInput","","formControlName","subconta","readonly","true"],["field","","appearance","outline",1,"col-max"],["matInput","","formControlName","nivel",3,"readonly"],["field","","appearance","outline","class","col-max",4,"ngIf"],["matInput","","formControlName","controle",3,"readonly"],[1,"col-med-1"],["matInput","","formControlName","descricao",3,"readonly"],[4,"ngIf"],[1,"example-section"],[1,"example-list-section"],[1,"example-margin",3,"checked","change"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["formControlName","tipo"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","tipo_",3,"readonly"],[3,"ngModel","ngModelChange","change"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t.TgZ(3,"mat-label"),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,H,4,1,"button",3),t.TgZ(7,"button",4),t.NdJ("click",function(){return e.onCancel()}),t.TgZ(8,"mat-icon"),t._uU(9,"cancel"),t.qZA(),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"form",5),t.TgZ(12,"div",6),t.TgZ(13,"mat-form-field",7),t.TgZ(14,"mat-label"),t._uU(15,"Conta"),t.qZA(),t._UZ(16,"input",8),t.qZA(),t.TgZ(17,"mat-form-field",7),t.TgZ(18,"mat-label"),t._uU(19,"Vers\xe3o"),t.qZA(),t._UZ(20,"input",9),t.qZA(),t.TgZ(21,"mat-form-field",7),t.TgZ(22,"mat-label"),t._uU(23,"SubConta"),t.qZA(),t._UZ(24,"input",10),t.qZA(),t.TgZ(25,"mat-form-field",11),t.TgZ(26,"mat-label"),t._uU(27,"Nivel:"),t.qZA(),t._UZ(28,"input",12),t.qZA(),t.YNc(29,K,5,1,"mat-form-field",13),t.YNc(30,j,4,1,"mat-form-field",13),t.TgZ(31,"mat-form-field",11),t.TgZ(32,"mat-label"),t._uU(33,"Controle:"),t.qZA(),t._UZ(34,"input",14),t.qZA(),t.qZA(),t.TgZ(35,"div",15),t.TgZ(36,"mat-form-field",7),t.TgZ(37,"mat-label"),t._uU(38,"Descri\xe7\xe3o"),t.qZA(),t._UZ(39,"input",16),t.YNc(40,R,2,0,"mat-error",17),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"span"),t.TgZ(42,"h1"),t._uU(43,"LISTA DE USU\xc1RIOS"),t.qZA(),t.TgZ(44,"section",18),t.TgZ(45,"span",19),t.TgZ(46,"mat-checkbox",20),t.NdJ("change",function(r){return e.setAllUsers(r.checked)}),t._uU(47),t.qZA(),t.qZA(),t.TgZ(48,"span",19),t.TgZ(49,"ul"),t.YNc(50,z,3,2,"li",21),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){let i;t.xp6(4),t.Oqu(e.labelCadastro),t.xp6(2),t.Q6J("ngIf",3!=e.idAcao),t.xp6(4),t.hij(" ",e.getLabelCancel()," "),t.xp6(1),t.Q6J("formGroup",e.formulario),t.xp6(17),t.Q6J("readonly",e.readOnly),t.xp6(1),t.Q6J("ngIf",e.idAcao!=e.getAcoes().Consulta&&e.idAcao!=e.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",e.idAcao==e.getAcoes().Consulta||e.idAcao==e.getAcoes().Exclusao),t.xp6(4),t.Q6J("readonly",!0),t.xp6(5),t.Q6J("readonly",e.readOnly),t.xp6(1),t.Q6J("ngIf","INVALID"==(null==(i=e.formulario.get("descricao"))?null:i.status)&&e.touchedOrDirty("descricao")),t.xp6(6),t.Q6J("checked",e.choices.escolhido),t.xp6(1),t.hij(" ",e.choices.nome," "),t.xp6(3),t.Q6J("ngForOf",e.choices.users)}},directives:[S.Ye,b.hX,d.O5,I.lW,U.Hw,c._Y,c.JL,c.sg,b.KE,q.Nt,c.Fj,c.JJ,c.u,L.oG,d.sg,k.gD,O.ey,b.TO,c.On],styles:[".example-section[_ngcontent-%COMP%]{margin:12px 0}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}h1[_ngcontent-%COMP%]{text-align:center;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}"]}),a})();var X=m(4705),tt=m(4560),Q=m(7117),F=m(7183),$=m(2238),y=m(3935),V=m(1436),T=m(3738);let M=(()=>{class a{transform(o){return"C"==o?"CONTA":"S"==o?"SUBCONTA":"O"==o?"OPERACIONAL":o}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275pipe=t.Yjl({name:"tipoConta",type:a,pure:!0}),a})(),ot=(()=>{class a{transform(o){return 1==o?"ATIVA":"INATIVA"}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275pipe=t.Yjl({name:"ativo",type:a,pure:!0}),a})();function et(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSetStatus(1,"Ativas")}),t._uU(1,"Ativas"),t.qZA(),t.TgZ(2,"button",9),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSetStatus(2,"Inativas")}),t._uU(3,"Inativas"),t.qZA(),t.TgZ(4,"button",9),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSetStatus(0,"Todas")}),t._uU(5,"Todas"),t.qZA()}}function at(a,s){if(1&a&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function it(a,s){if(1&a&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}function rt(a,s){1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-card",21),t.TgZ(2,"mat-card-content"),t.TgZ(3,"mat-label",22),t._uU(4,"Nenhuma Informa\xe7\xe3o Para Esta Consulta Ou Tabela Vazia!"),t.qZA(),t.qZA(),t.qZA(),t.qZA())}function st(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"div",25),t.TgZ(1,"mat-card",21),t.TgZ(2,"mat-card-actions"),t.TgZ(3,"span",26),t.TgZ(4,"button",27),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw(2).onCopia(r)}),t.TgZ(5,"mat-icon"),t._uU(6,"file_copy"),t.qZA(),t.qZA(),t.TgZ(7,"button",28),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw(2).tree(r)}),t.TgZ(8,"mat-icon"),t._uU(9,"fullscreen"),t.qZA(),t.qZA(),t.TgZ(10,"button",29),t.NdJ("click",function(){const r=t.CHM(o).$implicit;return t.oxw(2).escolha(r,99)}),t.TgZ(11,"mat-icon"),t._uU(12,"assignment"),t.qZA(),t.qZA(),t.TgZ(13,"button",29),t.NdJ("click",function(){const r=t.CHM(o).$implicit,n=t.oxw(2);return n.escolha(r,n.getAcoes().Edicao)}),t.TgZ(14,"mat-icon"),t._uU(15,"edit"),t.qZA(),t.qZA(),t.TgZ(16,"button",29),t.NdJ("click",function(){const r=t.CHM(o).$implicit,n=t.oxw(2);return n.escolha(r,n.getAcoes().Exclusao)}),t.TgZ(17,"mat-icon"),t._uU(18,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"mat-card-content"),t.TgZ(20,"mat-label",22),t._uU(21,"Tipo:"),t.qZA(),t.TgZ(22,"mat-label",30),t._uU(23),t.ALo(24,"tipoConta"),t.qZA(),t.qZA(),t.TgZ(25,"mat-card-content"),t.TgZ(26,"mat-label",22),t._uU(27,"Conta:"),t.qZA(),t.TgZ(28,"mat-label",30),t._uU(29),t.qZA(),t.TgZ(30,"mat-label",31),t._uU(31,"Ativa:"),t.qZA(),t.TgZ(32,"mat-label",32),t._uU(33),t.ALo(34,"ativo"),t.qZA(),t.TgZ(35,"mat-label",31),t._uU(36,"Vers\xe3o:"),t.qZA(),t.TgZ(37,"mat-label",30),t._uU(38),t.qZA(),t.TgZ(39,"mat-label",31),t._uU(40,"Descri\xe7\xe3o:"),t.qZA(),t.TgZ(41,"mat-label",30),t._uU(42),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const o=s.$implicit,e=t.oxw(2);t.xp6(10),t.Q6J("matTooltip",e.getTexto().sub_conta),t.xp6(3),t.Q6J("matTooltip",e.getTexto().alterar),t.xp6(3),t.Q6J("matTooltip",e.getTexto().excluir),t.xp6(7),t.Oqu(t.lcZ(24,8,o.tipo)),t.xp6(6),t.Oqu(o.subconta),t.xp6(4),t.Oqu(t.lcZ(34,10,o.status)),t.xp6(5),t.Oqu(o.versao),t.xp6(4),t.Oqu(o.descricao)}}function nt(a,s){if(1&a&&(t.TgZ(0,"div",23),t.YNc(1,st,43,12,"div",24),t.qZA()),2&a){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.estruturas)}}let ut=(()=>{class a{constructor(o,e,i,r,n,l){this.formBuilder=o,this.questionDialog=e,this.estruturaService=i,this.router=r,this.appSnackBar=n,this.globalService=l,this.estruturas=[],this.erro="",this.opcoesOrdenacao=["Conta","SubConta","Descri\xe7\xe3o"],this.opcoesCampo=["Conta","SubConta","Descri\xe7\xe3o"],this.statusEstruturas=["ATIVA","INATIVA","TODAS"],this.status=1,this.status_descricao="Ativas",this.durationInSeconds=2,this.parametros=o.group({ordenacao:[null],campo:[null],filtro:[null]}),this.setValues()}ngOnInit(){this.getEstruturas()}setValues(){this.parametros.setValue({ordenacao:"Conta",campo:"Conta",filtro:""})}ngOnDestroy(){var o,e,i;null===(o=this.inscricaoGetAll)||void 0===o||o.unsubscribe(),null===(e=this.inscricaoGetFiltro)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoCopiaEstrutura)||void 0===i||i.unsubscribe()}getEstruturas(){let o=new F.W;o.id_empresa=1,"Conta"==this.parametros.value.campo&&(o.conta=this.parametros.value.filtro.toUpperCase()),"SubConta"==this.parametros.value.campo&&(o.subconta=this.parametros.value.filtro.toUpperCase()),"Descri\xe7\xe3o"==this.parametros.value.campo&&(o.descricao=this.parametros.value.filtro.toUpperCase()),o.nivel=1,o.tipo="",o.status=this.status,16==this.globalService.getUsuario().id&&(o.controle=""),o.orderby=this.parametros.value.ordenacao,this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.estruturaService.getEstruturas(o).subscribe(e=>{this.globalService.setSpin(!1),this.estruturas=e,console.log(this.estruturas)},e=>{this.globalService.setSpin(!1),this.estruturas=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Estruturas ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}getTexto(){return Q.fd}escolha(o,e){this.router.navigate(99==e?["estruturas/subconta",o.id_empresa,o.conta,o.versao,o.subconta,o.descricao,o.nivel,o.controle,e]:["estruturas/estrutura",o.id_empresa,o.conta,o.versao,o.subconta,e])}inclusao(){this.router.navigate(["estruturas/estrutura",1,"00","0101","00",this.getAcoes().Inclusao])}inclusaSemControle(){this.router.navigate(["estruturas/estruturasemcontrole",1,"00","0101","00",this.getAcoes().Inclusao])}getAcoes(){return u.I}tree(o){this.router.navigate(["estruturas/treeconta",o.id_empresa,o.conta,o.versao,o.subconta,o.descricao,o.nivel])}onCopia(o){const e=new tt.Z;e.mensagem01="Confirma C\xf3pia Da Estrutura:",e.mensagem02=o.descricao;const i=new $.vA;i.disableClose=!0,i.id="question-dialog",i.width="600px",i.data=e,this.questionDialog.open(X.h,i).beforeClosed().subscribe(n=>{"S"===n.resposta&&this.Copia(o)})}Copia(o){this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.estruturaService.copiaEstrutura(o).subscribe(e=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Estrutura Copiada!","OK"),this.getEstruturas()},e=>{this.globalService.setSpin(!1),this.estruturas=[],this.appSnackBar.openFailureSnackBar(`Copia Das Estruturas ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}onHome(){this.router.navigate([""])}getClassAtiva(o){return 1==o?"conta-ativa":"conta-inativa"}onSetStatus(o,e){this.status=o,this.status_descricao=e}addControlControle(){this.inclusao()}addControlSemControle(){this.inclusaSemControle()}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(c.qu),t.Y36($.uw),t.Y36(v.K),t.Y36(g.F0),t.Y36(N.W),t.Y36(w.U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-crud-estrutura"]],decls:49,vars:8,consts:[[1,"div-barra"],[1,"example-spacer"],["appMenu","matMenu"],["matMenuContent",""],["mat-icon-button","","aria-label","Example icon-button with share icon ",3,"matMenuTriggerFor"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"parametros"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","ordenacao"],[3,"value",4,"ngFor","ngForOf"],["formControlName","campo"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","filtro"],[4,"ngIf"],["class","Browse",4,"ngIf"],[3,"value"],[1,"example-card"],[1,"labelTitleFirst"],[1,"Browse"],["class","linha",4,"ngFor","ngForOf"],[1,"linha"],[1,"button-container-right"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Copiar A Estrutura","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Visualizar Estrtutura","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"],[1,"labelData"],[1,"labelTitle"],["ngClass","{getClassAtiva(estru.status)}"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Estruturas: "),t.qZA(),t.TgZ(4,"span",1),t.TgZ(5,"mat-menu",null,2),t.YNc(7,et,6,0,"ng-template",3),t.qZA(),t.TgZ(8,"button",4),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){return e.onHome()}),t.TgZ(11,"mat-icon"),t._uU(12,"home"),t.qZA(),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(){return e.getEstruturas()}),t.TgZ(14,"mat-icon"),t._uU(15,"rotate_right"),t.qZA(),t.qZA(),t.TgZ(16,"button",7),t.TgZ(17,"mat-icon"),t._uU(18,"add_circle_outline"),t.qZA(),t.qZA(),t.TgZ(19,"mat-menu",null,8),t.TgZ(21,"button",9),t.NdJ("click",function(){return e.addControlControle()}),t.TgZ(22,"mat-icon"),t._uU(23,"assignment"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"Com Controle"),t.qZA(),t.qZA(),t.TgZ(26,"button",9),t.NdJ("click",function(){return e.addControlSemControle()}),t.TgZ(27,"mat-icon"),t._uU(28,"assignment_ind"),t.qZA(),t.TgZ(29,"span"),t._uU(30,"Sem Controle"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",10),t.TgZ(32,"form",11),t.TgZ(33,"mat-form-field",12),t.TgZ(34,"mat-label"),t._uU(35,"Ordena\xe7\xe3o"),t.qZA(),t.TgZ(36,"mat-select",13),t.YNc(37,at,2,2,"mat-option",14),t.qZA(),t.qZA(),t.TgZ(38,"mat-form-field",12),t.TgZ(39,"mat-label"),t._uU(40,"Pesquisar Por"),t.qZA(),t.TgZ(41,"mat-select",15),t.YNc(42,it,2,2,"mat-option",14),t.qZA(),t.qZA(),t.TgZ(43,"mat-form-field",16),t.TgZ(44,"mat-label"),t._uU(45,"Descri\xe7\xe3o"),t.qZA(),t._UZ(46,"input",17),t.qZA(),t.qZA(),t.qZA(),t.YNc(47,rt,5,0,"div",18),t.YNc(48,nt,2,1,"div",19)),2&o){const i=t.MAs(6),r=t.MAs(20);t.xp6(8),t.Q6J("matMenuTriggerFor",i),t.xp6(1),t.hij(" Status:",e.status_descricao," "),t.xp6(7),t.Q6J("matMenuTriggerFor",r),t.xp6(16),t.Q6J("formGroup",e.parametros),t.xp6(5),t.Q6J("ngForOf",e.opcoesOrdenacao),t.xp6(5),t.Q6J("ngForOf",e.opcoesCampo),t.xp6(5),t.Q6J("ngIf",0==e.estruturas.length),t.xp6(1),t.Q6J("ngIf",e.estruturas.length>0)}},directives:[S.Ye,y.VK,y.KA,I.lW,y.p6,V.gM,U.Hw,y.OP,c._Y,c.JL,c.sg,b.KE,b.hX,k.gD,c.JJ,c.u,d.sg,q.Nt,c.Fj,d.O5,O.ey,T.a8,T.dn,T.hq,d.mk],pipes:[M,ot],styles:[""]}),a})();class P{constructor(){this.nivel=0,this.id_empresa=0,this.conta="",this.versao="",this.subconta="",this.descricao=""}}var B=m(2613),D=m(1488);function ct(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().onHome()}),t.TgZ(1,"mat-icon"),t._uU(2,"home"),t.qZA(),t.qZA()}}function lt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return i.escolha(i.subconta,i.getAcoes().Inclusao,"1")}),t.TgZ(1,"mat-icon"),t._uU(2,"add_circle_outline"),t.qZA(),t.qZA()}}function mt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(o),t.oxw().onRetorno()}),t.TgZ(1,"mat-icon"),t._uU(2,"arrow_back"),t.qZA(),t.qZA()}}function pt(a,s){if(1&a&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.descricao," ")}}function ht(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",16),t.TgZ(1,"mat-label"),t._uU(2,"Tipo"),t.qZA(),t.TgZ(3,"mat-select",28),t.YNc(4,pt,2,2,"mat-option",29),t.qZA(),t.qZA()),2&a){const o=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",o.tipos)}}function dt(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",16),t.TgZ(1,"mat-label"),t._uU(2,"Tipo"),t.qZA(),t._UZ(3,"input",31),t.qZA()),2&a){const o=t.oxw(2);t.xp6(3),t.Q6J("readonly",o.readOnly)}}function _t(a,s){if(1&a&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function gt(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",16),t.TgZ(1,"mat-label"),t._uU(2,"Controle:"),t.qZA(),t.TgZ(3,"mat-select",32),t.YNc(4,_t,2,2,"mat-option",29),t.qZA(),t.qZA()),2&a){const o=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",o.respostas)}}function ft(a,s){1&a&&(t.TgZ(0,"mat-form-field",16),t.TgZ(1,"mat-label"),t._uU(2,"Controle:"),t.qZA(),t._UZ(3,"input",33),t.qZA()),2&a&&(t.xp6(3),t.Q6J("readonly",!0))}function bt(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Descri\xe7\xe3o m\xe1ximo 300 letras"),t.qZA())}function vt(a,s){if(1&a&&(t.TgZ(0,"div",34),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3,"Descri\xe7\xe3o"),t.qZA(),t._UZ(4,"input",35),t.YNc(5,bt,2,0,"mat-error",36),t.qZA(),t.qZA()),2&a){const o=t.oxw(2);let e;t.xp6(4),t.Q6J("readonly",o.readOnly),t.xp6(1),t.Q6J("ngIf","INVALID"==(null==(e=o.formulario.get("descricao"))?null:e.status)&&o.touchedOrDirty("descricao"))}}function Ct(a,s){1&a&&(t.TgZ(0,"div",34),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3,"Descri\xe7\xf5es"),t.qZA(),t._UZ(4,"textarea",37),t.qZA(),t.qZA())}function Zt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).onSubmit()}),t._uU(1),t.qZA()}if(2&a){const o=t.oxw(2);t.xp6(1),t.Oqu(o.acao)}}function At(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"form",10),t.TgZ(1,"div",11),t.TgZ(2,"mat-form-field",12),t.TgZ(3,"mat-label"),t._uU(4,"Conta"),t.qZA(),t._UZ(5,"input",13),t.qZA(),t.TgZ(6,"mat-form-field",12),t.TgZ(7,"mat-label"),t._uU(8,"Vers\xe3o"),t.qZA(),t._UZ(9,"input",14),t.qZA(),t.TgZ(10,"mat-form-field",12),t.TgZ(11,"mat-label"),t._uU(12,"SubConta"),t.qZA(),t._UZ(13,"input",15),t.qZA(),t.TgZ(14,"mat-form-field",16),t.TgZ(15,"mat-label"),t._uU(16,"Nivel:"),t.qZA(),t._UZ(17,"input",17),t.qZA(),t.YNc(18,ht,5,1,"mat-form-field",18),t.YNc(19,dt,4,1,"mat-form-field",18),t.YNc(20,gt,5,1,"mat-form-field",18),t.YNc(21,ft,4,1,"mat-form-field",18),t.qZA(),t.TgZ(22,"div",19),t.TgZ(23,"label",20),t._uU(24,"Qtd Descri\xe7\xf5es:"),t.qZA(),t.TgZ(25,"mat-radio-group",21),t.NdJ("change",function(){return t.CHM(o),t.oxw().onChangeLinhas()}),t.TgZ(26,"mat-radio-button",22),t._uU(27,"Uma Descri\xe7\xe3o"),t.qZA(),t.TgZ(28,"mat-radio-button",23),t._uU(29,"V\xe1rias Descri\xe7\xf5es"),t.qZA(),t.qZA(),t.qZA(),t.YNc(30,vt,6,2,"div",24),t.YNc(31,Ct,5,0,"div",24),t.TgZ(32,"div",25),t.YNc(33,Zt,2,1,"button",26),t.TgZ(34,"button",27),t.NdJ("click",function(){return t.CHM(o),t.oxw().onCancel()}),t._uU(35),t.qZA(),t.qZA(),t.qZA()}if(2&a){const o=t.oxw();t.Q6J("formGroup",o.formulario),t.xp6(18),t.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",o.idAcao==o.getAcoes().Consulta||o.idAcao==o.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao&&o.idAcao!=o.getAcoes().Edicao),t.xp6(1),t.Q6J("ngIf",o.idAcao==o.getAcoes().Consulta||o.idAcao==o.getAcoes().Exclusao||o.idAcao==o.getAcoes().Edicao),t.xp6(9),t.Q6J("ngIf","one"==o.descricoes),t.xp6(1),t.Q6J("ngIf","many"==o.descricoes),t.xp6(2),t.Q6J("ngIf",3!=o.idAcao),t.xp6(2),t.Oqu(o.getLabelCancel())}}function Tt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit;return t.oxw(2).escolha(i,99,"C")}),t.TgZ(1,"mat-icon"),t._uU(2,"trending_down"),t.qZA(),t.qZA()}}function xt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw(2);return r.escolha(i,r.getAcoes().Edicao,"")}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}if(2&a){const o=t.oxw(3);t.Q6J("matTooltip",o.getTexto().alterar)}}function Et(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,r=t.oxw(2);return r.escolha(i,r.getAcoes().Exclusao,"")}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA(),t.qZA()}if(2&a){const o=t.oxw(3);t.Q6J("matTooltip",o.getTexto().excluir)}}function Nt(a,s){if(1&a&&(t.TgZ(0,"div",41),t.TgZ(1,"mat-card",42),t.TgZ(2,"mat-card-subtitle"),t.TgZ(3,"mat-label",43),t._uU(4,"Tipo:"),t.qZA(),t.TgZ(5,"mat-label",44),t._uU(6),t.ALo(7,"tipoConta"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-actions"),t.TgZ(9,"span",25),t.YNc(10,Tt,3,0,"button",45),t.YNc(11,xt,3,1,"button",46),t.YNc(12,Et,3,1,"button",46),t.qZA(),t.qZA(),t.TgZ(13,"mat-card-content"),t.TgZ(14,"mat-label",43),t._uU(15,"SubConta:"),t.qZA(),t.TgZ(16,"mat-label",44),t._uU(17),t.ALo(18,"subconta"),t.qZA(),t.TgZ(19,"mat-label",47),t._uU(20,"Descri\xe7\xe3o:"),t.qZA(),t.TgZ(21,"mat-label",44),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a){const o=s.$implicit;t.xp6(6),t.Oqu(t.lcZ(7,6,o.tipo)),t.xp6(4),t.Q6J("ngIf",""!=o.descricao&&"O"!=o.tipo),t.xp6(1),t.Q6J("ngIf",""!=o.descricao),t.xp6(1),t.Q6J("ngIf",""!=o.descricao),t.xp6(5),t.Oqu(t.lcZ(18,8,o.subconta)),t.xp6(5),t.Oqu(o.descricao)}}function St(a,s){if(1&a&&(t.TgZ(0,"div",39),t.YNc(1,Nt,23,10,"div",40),t.qZA()),2&a){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.subcontas)}}let It=(()=>{class a{constructor(o,e,i,r,n,l){this.formBuilder=o,this.subContasService=e,this.route=i,this.router=r,this.appSnackBar=n,this.globalService=l,this.subcontas=[],this.subconta=new h.c,this.erro="",this.id_empresa_pai=0,this.conta_pai="",this.versao_pai="",this.subconta_pai="",this.descricao_pai="",this.nivel_pai=1,this.controle_pai="S",this.durationInSeconds=3,this.historico=[],this.tipos=[{id:"C",descricao:"CONTA"},{id:"S",descricao:"SUBCONTA"},{id:"O",descricao:"OPERACIONAL"}],this.acao="Sem Defini\xe7\xe3o",this.idAcao=u.I.Inclusao,this.readOnly=!0,this.readOnlyKey=!0,this.labelCadastro="",this.respostas=[{sigla:"S",descricao:"SIM"},{sigla:"N",descricao:"N\xc3O"}],this.labelDescricao="one",this.descricoes="one",this.linhas="",this.formulario=this.formBuilder.group({conta:[{value:""}],versao:[{value:""}],subconta:[{value:""},[c.kI.required,c.kI.minLength(2),c.kI.maxLength(14)]],nivel:[{value:""}],tipo:[{value:""}],tipo_:[{value:""}],controle:[{value:""},[(0,C.S)(1,2,!0)]],controle_:[{value:""}],nLinhas:[{value:"one"}],descricao:[{value:""},[c.kI.minLength(0),c.kI.maxLength(300)]],linhas:[{value:""}]}),this.subconta=new h.c,this.inscricaoRota=this.route.params.subscribe(p=>{this.id_empresa_pai=p.id_empresa,this.conta_pai=p.conta,this.versao_pai=p.versao,this.subconta_pai=p.subconta,this.descricao_pai=p.descricao,this.nivel_pai=parseInt(p.nivel),this.controle_pai=p.controle;const _=new P;_.id_empresa=this.id_empresa_pai,_.conta=this.conta_pai,_.versao=this.versao_pai,_.subconta=this.subconta_pai,_.nivel=this.nivel_pai,_.descricao=this.descricao_pai,this.setHistorico(_),this.idAcao=p.acao,this.setAcao(p.acao)})}ngOnInit(){this.getSubContas()}ngOnDestroy(){var o,e,i,r;null===(o=this.inscricaoGetAll)||void 0===o||o.unsubscribe(),null===(e=this.inscricaoGetFiltro)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoAcao)||void 0===i||i.unsubscribe(),null===(r=this.inscricaoRota)||void 0===r||r.unsubscribe()}getSubContas(){let o=new F.W;o.id_empresa=this.id_empresa_pai,o.conta=this.conta_pai,o.versao=this.versao_pai,o.subconta=this.subconta_pai,o.descricao="",o.nivel=this.nivel_pai,o.tipo="",o.orderby="",o.subcontas=!0,16==this.globalService.getUsuario().id&&(o.controle=""),this.inscricaoGetFiltro=this.subContasService.getEstruturas(o).subscribe(e=>{this.subcontas=e,console.log(this.subcontas)},e=>{this.subcontas=[],this.appSnackBar.openSuccessSnackBar("Nenhuma SubConta Para Esta Consulta!","OK")})}setValue(){this.formulario.setValue({conta:this.idAcao==u.I.Inclusao?"NOVA":this.subconta.conta,versao:this.subconta.versao,subconta:this.idAcao==u.I.Inclusao?"NOVA":this.subconta.subconta,nLinhas:this.descricoes,descricao:this.subconta.descricao,nivel:this.subconta.nivel,tipo:this.subconta.tipo,tipo_:this.getTipo(this.subconta.tipo),controle:this.subconta.controle,controle_:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao||this.idAcao==u.I.Edicao?this.respostas[this.respostas.findIndex(o=>o.sigla==this.subconta.controle)].descricao:"",linhas:this.linhas})}onSubmit(){console.log("this.formulario",this.formulario),this.formulario.valid?this.executaAcao():this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}onCancel(){this.idAcao=99,this.setAcao(this.idAcao)}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}onRetorno(){if(this.nivel_pai-1<=0)this.onHome();else{console.log("historico==>",this.historico);const o=this.getHistorico(this.nivel_pai-1);console.log("estru==>",o),this.id_empresa_pai=o.id_empresa,this.conta_pai=o.conta,this.versao_pai=o.versao,this.subconta_pai=o.subconta,this.descricao_pai=o.descricao,this.nivel_pai=o.nivel,this.getSubContas(),this.idAcao=99,this.setAcao(this.idAcao)}}onHome(){this.router.navigate(["estruturas"])}getAcoes(){return u.I}touchedOrDirty(o){var e,i;return!(!(null===(e=this.formulario.get(o))||void 0===e?void 0:e.touched)&&!(null===(i=this.formulario.get(o))||void 0===i?void 0:i.dirty))}setAcao(o){switch(+o){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="SubConta - Inclus\xe3o.",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="SubConta - Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="SubConta - Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="SubConta - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var o=this;switch(this.subconta.conta=this.formulario.value.conta,this.subconta.versao=this.formulario.value.versao,this.subconta.subconta=this.formulario.value.subconta,this.subconta.descricao=this.formulario.value.descricao,this.subconta.nivel=this.formulario.value.nivel,this.subconta.tipo=this.formulario.value.tipo,this.subconta.controle=this.controle_pai,console.log("registro",this.subconta),+this.idAcao){case u.I.Inclusao:this.subconta.conta=this.conta_pai,this.subconta.subconta=this.subconta_pai;var e=[];if(0==(e=""==this.formulario.value.linhas.trim()?[]:this.formulario.value.linhas.split(/\r|\r\n|\n/)).length)this.inscricaoAcao=this.subContasService.EstruturaInsert(this.subconta).subscribe(function(){var r=(0,f.Z)(function*(n){o.getSubContas(),o.onCancel()});return function(n){return r.apply(this,arguments)}}(),r=>{this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xe3o ${r.error.tabela} - ${r.error.erro} - ${r.error.message}`,"OK")});else{var i=[];for(let r=0;r<e.length;r++)if(""!=e[r].trim()){let n=new h.c;n.conta=this.subconta.conta,n.controle=this.subconta.controle,n.descricao=e[r],n.id_empresa=this.subconta.id_empresa,n.nivel=this.subconta.nivel,n.nivel_maxi=this.subconta.nivel_maxi,n.status=this.subconta.status,n.subconta=this.subconta.subconta,n.tipo=this.subconta.tipo,n.user_insert=this.subconta.user_insert,n.user_update=r,n.versao=this.subconta.versao,i.push(n)}this.inscricaoAcao=this.subContasService.multiEstrutura(i).subscribe(function(){var r=(0,f.Z)(function*(n){o.getSubContas(),o.onCancel()});return function(n){return r.apply(this,arguments)}}(),r=>{this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xe3o ${r.error.tabela} - ${r.error.erro} - ${r.error.message}`,"OK")})}break;case u.I.Edicao:this.inscricaoAcao=this.subContasService.EstruturaUpdate(this.subconta).subscribe(function(){var r=(0,f.Z)(function*(n){o.getSubContas(),o.onCancel()});return function(n){return r.apply(this,arguments)}}(),r=>{console.log("Error",r.error),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${r.error.tabela} - ${r.error.erro} - ${r.error.message}`,"OK")});break;case u.I.Exclusao:this.inscricaoAcao=this.subContasService.EstruturaDelete(this.subconta.id_empresa,this.subconta.conta,this.subconta.versao,this.subconta.subconta).subscribe(function(){var r=(0,f.Z)(function*(n){o.getSubContas(),o.onCancel(),o.appSnackBar.openSuccessSnackBar("Item Exclu\xeddo Com Sucesso!","OK")});return function(n){return r.apply(this,arguments)}}(),r=>{this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${r.error.tabela} - ${r.error.erro} - ${r.error.message}`,"OK")})}}escolha(o,e,i){if(99==e){this.id_empresa_pai=o.id_empresa,this.conta_pai=o.conta,this.versao_pai=o.versao,this.subconta_pai=o.subconta,this.descricao_pai=o.descricao,this.nivel_pai=o.nivel;const r=new P;r.id_empresa=this.id_empresa_pai,r.conta=this.conta_pai,r.versao=this.versao_pai,r.subconta=this.subconta_pai,r.nivel=this.nivel_pai,r.descricao=this.descricao_pai,this.setHistorico(r),this.getSubContas(),this.idAcao=99,this.setAcao(this.idAcao)}else e==u.I.Inclusao?(this.subconta=new h.c,this.subconta.id_empresa=this.id_empresa_pai,this.subconta.conta=this.conta_pai,this.subconta.versao=this.versao_pai,this.subconta.subconta=this.subconta_pai,this.subconta.nivel=this.nivel_pai+1,this.subconta.tipo="S",this.subconta.user_insert=1,this.subconta.user_update=0,this.subconta.status=1):(console.log("subconta",o),this.subconta=o),this.idAcao=e,this.setAcao(this.idAcao),this.setValue()}getTexto(){return Q.fd}getTipo(o){let e="";return this.tipos.forEach(i=>{i.id==o&&(e=i.descricao)}),e}getHistorico(o){return o<=P.length?(console.log("Retorno anterior =>",this.historico[o-2],"nivel==>",o),this.historico[o-2]):(console.log("Retorno pai =>",this.historico[this.nivel_pai-2],"nivel==>",this.nivel_pai),this.historico[this.nivel_pai-2])}setHistorico(o){o.nivel>this.historico.length&&(this.historico.push(o),console.log("historico",this.historico))}itsMany(){return console.log("==>",this.formulario.value.nLinhas),"one"!=this.formulario.value.nLinhas}onChangeLinhas(){this.descricoes=this.formulario.value.nLinhas}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(c.qu),t.Y36(v.K),t.Y36(g.gz),t.Y36(g.F0),t.Y36(N.W),t.Y36(w.U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-crud-subestrutura"]],decls:9,vars:8,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Cadastro De Contas","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Cadastrar Novas SubContas","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon",3,"click",4,"ngIf"],["autocomplete","off",3,"formGroup",4,"ngIf"],["class","Browse",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Cadastro De Contas","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Cadastrar Novas SubContas","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,"example-icon",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-6"],["appearance","outline",1,"col-max"],["matInput","","formControlName","conta","readonly","true"],["matInput","","formControlName","versao","readonly","true"],["matInput","","formControlName","subconta","readonly","true"],["field","","appearance","outline",1,"col-max"],["matInput","","formControlName","nivel","readonly","true"],["field","","appearance","outline","class","col-max",4,"ngIf"],[1,"example-section"],[1,"example-margin"],["formControlName","nLinhas",3,"change"],["value","one",1,"example-margin"],["value","many",1,"example-margin"],["class","col-med-1",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["formControlName","tipo"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","tipo_",3,"readonly"],["formControlName","controle"],["matInput","","formControlName","controle_",3,"readonly"],[1,"col-med-1"],["matInput","","formControlName","descricao",3,"readonly"],[4,"ngIf"],["matInput","","placeholder","Coloque aqui a descri\xe7\xe3o das tarefas","formControlName","linhas"],["mat-raised-button","","color","primary",3,"click"],[1,"Browse"],["class","linha",4,"ngFor","ngForOf"],[1,"linha"],[1,"example-card"],[1,"labelTitleFirst"],[1,"labelData"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Subniveis","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"labelTitle"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Subniveis","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"matTooltip","click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t.YNc(4,ct,3,0,"button",2),t.YNc(5,lt,3,0,"button",3),t.YNc(6,mt,3,0,"button",4),t.qZA(),t.qZA(),t.YNc(7,At,36,9,"form",5),t.YNc(8,St,2,1,"div",6)),2&o&&(t.xp6(3),t.lnq("SubConta: ",e.subconta_pai,"-",e.descricao_pai," Nivel:",e.nivel_pai,""),t.xp6(1),t.Q6J("ngIf",99==e.idAcao),t.xp6(1),t.Q6J("ngIf",99==e.idAcao),t.xp6(1),t.Q6J("ngIf",99==e.idAcao),t.xp6(1),t.Q6J("ngIf",99!=e.idAcao),t.xp6(1),t.Q6J("ngIf",99==e.idAcao))},directives:[S.Ye,d.O5,I.lW,V.gM,U.Hw,c._Y,c.JL,c.sg,b.KE,b.hX,q.Nt,c.Fj,c.JJ,c.u,B.VQ,B.U0,k.gD,d.sg,O.ey,b.TO,T.a8,T.$j,T.hq,T.dn],pipes:[M,D.M],styles:[".cad-container[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.SmallWidth[_ngcontent-%COMP%]{width:40px}.MidleWidth[_ngcontent-%COMP%]{width:140px}.LargeWidth[_ngcontent-%COMP%]{width:350px}.LargerWidth[_ngcontent-%COMP%]{width:500px}.example-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.buttons[_ngcontent-%COMP%]{margin-left:10px;align-items:center}.button-container-right[_ngcontent-%COMP%]{display:flex;justify-content:right;height:min-content}.button-container-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}.cabecalho[_ngcontent-%COMP%]{font:blue;font-size:15px;font-weight:300;justify-content:left}.Browse[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;overflow-y:scroll;width:100%;height:500px}table[_ngcontent-%COMP%]{width:100%;cursor:pointer}.Cabecalho[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;height:30px;background-color:coral;text-align:center}.Detalhe[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;height:30px;color:#000}.linha[_ngcontent-%COMP%]{background-color:#fff}.linha[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#cc9}.labelTitleFirst[_ngcontent-%COMP%]{font-size:large;color:#00c}.labelTitle[_ngcontent-%COMP%]{font-size:large;color:#00c;margin-left:5px}.labelData[_ngcontent-%COMP%]{font-size:large;color:#000;margin-left:5px}.notIE[_ngcontent-%COMP%]{position:relative;display:inline-block}.select_tb[_ngcontent-%COMP%]{display:inline-block;height:30px;width:150px;padding:2px 10px 2px 2px;outline:none;color:#74646e;border:1px solid #C8BFC4;border-radius:4px;box-shadow:inset 1px 1px 2px #ddd8dc;background:#fff;margin-left:10px;margin-right:5px}.notIE[_ngcontent-%COMP%]   .fancyArrow[_ngcontent-%COMP%]{width:23px;height:28px;position:absolute;display:inline-block;top:1px;right:3px;background:url(https://stackoverflow.com/favicon.ico) right / 90% no-repeat #fff;pointer-events:none;margin-left:10px;margin-right:5px}@media screen and (min-width:0\\fffd){.notIE[_ngcontent-%COMP%]   .fancyArrow[_ngcontent-%COMP%]{display:none}}.input_tb[_ngcontent-%COMP%]{display:inline-block;height:30px;width:400px;padding:2px 10px 2px 2px;outline:none;color:#74646e;border:1px solid #C8BFC4;border-radius:4px;box-shadow:inset 1px 1px 2px #ddd8dc;background:#fff;margin-left:10px;margin-right:5px;text-transform:uppercase}.label_tb[_ngcontent-%COMP%]{margin-left:10px;margin-right:5px;vertical-align:middle;font-size:small}.button-right[_ngcontent-%COMP%]{display:flex;justify-content:right}.bordas[_ngcontent-%COMP%]{border:#0000CC solid 1px;padding-top:10px}.example-margin[_ngcontent-%COMP%]{margin:0 10px}.example-section[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}"]}),a})();function qt(a,s){if(1&a&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.tipo),t.xp6(1),t.hij(" ",o.descricao," ")}}function kt(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",7),t.TgZ(1,"mat-label"),t._uU(2,"Tipo:"),t.qZA(),t.TgZ(3,"mat-select",17),t.YNc(4,qt,2,2,"mat-option",18),t.qZA(),t.qZA()),2&a){const o=t.oxw();t.xp6(4),t.Q6J("ngForOf",o.tipos)}}function Ot(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",7),t.TgZ(1,"mat-label"),t._uU(2,"Tipo:"),t.qZA(),t._UZ(3,"input",20),t.qZA()),2&a){const o=t.oxw();t.xp6(3),t.Q6J("readonly",o.readOnly)}}function wt(a,s){if(1&a&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function Ut(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",7),t.TgZ(1,"mat-label"),t._uU(2,"Controle:"),t.qZA(),t.TgZ(3,"mat-select",21),t.YNc(4,wt,2,2,"mat-option",18),t.qZA(),t.qZA()),2&a){const o=t.oxw();t.xp6(4),t.Q6J("ngForOf",o.respostas)}}function yt(a,s){1&a&&(t.TgZ(0,"mat-form-field",7),t.TgZ(1,"mat-label"),t._uU(2,"Controle:"),t.qZA(),t._UZ(3,"input",22),t.qZA()),2&a&&(t.xp6(3),t.Q6J("readonly",!0))}function Jt(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Descri\xe7\xe3o m\xe1ximo 300 letras"),t.qZA())}function Ft(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSubmit()}),t._uU(1),t.qZA()}if(2&a){const o=t.oxw();t.xp6(1),t.Oqu(o.acao)}}let Vt=(()=>{class a{constructor(o,e,i,r,n){this.formBuilder=o,this.estruturaService=e,this.route=i,this.router=r,this.appSnackBar=n,this.estrutura=new h.c,this.acao="Sem Defini\xe7\xe3o",this.idAcao=u.I.Inclusao,this.readOnly=!0,this.tipos=[{tipo:"C",descricao:"CONTA"},{tipo:"S",descricao:"SUBCONTA"},{tipo:"O",descricao:"OPERACIONAL"}],this.respostas=[{sigla:"S",descricao:"SIM"},{sigla:"N",descricao:"N\xc3O"}],this.durationInSeconds=2,this.labelCadastro="",this.formulario=o.group({conta:[{value:""}],versao:[{value:""}],subconta:[{value:""},[c.kI.required,c.kI.minLength(2),c.kI.maxLength(14)]],descricao:[{value:""},[c.kI.required,c.kI.minLength(1),c.kI.maxLength(300)]],nivel:[{value:""}],tipo:[{value:""},[(0,C.S)(1,2,!0)]],tipo_:[{value:""}],controle:[{value:""},[(0,C.S)(1,2,!0)]],controle_:[{value:""}]}),this.estrutura=new h.c,this.inscricaoRota=i.params.subscribe(l=>{console.log("==>",l),this.estrutura.id_empresa=l.id_empresa,this.estrutura.conta=l.conta,this.estrutura.versao=l.versao,this.estrutura.subconta=l.subconta,this.idAcao=l.acao,this.setAcao(l.acao)})}ngOnInit(){this.idAcao==u.I.Inclusao?(this.estrutura=new h.c,this.estrutura.id_empresa=1,this.estrutura.conta="NOVA",this.estrutura.versao="0101",this.estrutura.subconta="NOVA",this.estrutura.nivel=1,this.estrutura.nivel_maxi=7,this.estrutura.tipo="C",this.estrutura.user_insert=1,this.estrutura.status=1,this.setValue()):this.getEstrutura()}ngOnDestroy(){var o,e,i;null===(o=this.inscricaoGetEstrutura)||void 0===o||o.unsubscribe(),null===(e=this.inscricaoRota)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoAcao)||void 0===i||i.unsubscribe()}onSubmit(){console.log("this.formulario",this.formulario),this.formulario.valid?this.executaAcao():this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}onCancel(){this.router.navigate(["/estruturas"])}getEstrutura(){this.inscricaoGetEstrutura=this.estruturaService.getConta(this.estrutura.id_empresa,this.estrutura.conta,this.estrutura.versao).subscribe(o=>{this.estrutura=o,this.setValue()},o=>{this.appSnackBar.openFailureSnackBar(`Pesquisa Nas EStruturas ${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")})}setValue(){this.formulario.setValue({conta:this.estrutura.conta,versao:this.estrutura.versao,subconta:this.estrutura.subconta,descricao:this.estrutura.descricao,nivel:this.estrutura.nivel,tipo:this.estrutura.tipo,tipo_:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao?this.tipos[this.tipos.findIndex(o=>o.tipo==this.estrutura.tipo)].descricao:"",controle:this.estrutura.controle,controle_:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao||this.idAcao==u.I.Edicao?this.respostas[this.respostas.findIndex(o=>o.sigla==this.estrutura.controle)].descricao:""})}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}setAcao(o){switch(+o){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="Estrutura - Inclus\xe3o.",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="Estrutura - Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="Estrutura - Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="Estrutura - Exclus\xe3o.",this.readOnly=!0}}executaAcao(){var o=this;switch(this.estrutura.conta=this.formulario.value.conta,this.estrutura.subconta=this.formulario.value.subconta,this.estrutura.descricao=this.formulario.value.descricao,this.estrutura.nivel=this.formulario.value.nivel,this.estrutura.tipo=this.formulario.value.tipo,this.estrutura.controle=this.formulario.value.controle,console.log("registro",this.estrutura),+this.idAcao){case u.I.Inclusao:this.estrutura.conta="",this.estrutura.subconta="",this.inscricaoAcao=this.estruturaService.EstruturaInsert(this.estrutura).subscribe(function(){var e=(0,f.Z)(function*(i){o.onCancel()});return function(i){return e.apply(this,arguments)}}(),e=>{this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xe3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")});break;case u.I.Edicao:this.inscricaoAcao=this.estruturaService.EstruturaUpdate(this.estrutura).subscribe(function(){var e=(0,f.Z)(function*(i){o.onCancel()});return function(i){return e.apply(this,arguments)}}(),e=>{console.log("Error",e.error),this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xe7\xe3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")});break;case u.I.Exclusao:this.inscricaoAcao=this.estruturaService.EstruturaAllDelete(this.estrutura.id_empresa,this.estrutura.conta,this.estrutura.versao).subscribe(function(){var e=(0,f.Z)(function*(i){o.onCancel()});return function(i){return e.apply(this,arguments)}}(),e=>{this.appSnackBar.openFailureSnackBar(`Erro Na Exclusao ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}}delay(o){return new Promise(e=>setTimeout(e,o))}getAcoes(){return u.I}touchedOrDirty(o){var e,i;return!(!(null===(e=this.formulario.get(o))||void 0===e?void 0:e.touched)&&!(null===(i=this.formulario.get(o))||void 0===i?void 0:i.dirty))}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(c.qu),t.Y36(v.K),t.Y36(g.gz),t.Y36(g.F0),t.Y36(N.W))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-crud-view-estrutura"]],decls:38,vars:11,consts:[[1,"div-barra"],["autocomplete","off",3,"formGroup"],[1,"col-med-4"],["appearance","outline",1,"col-max"],["matInput","","formControlName","conta","readonly","true"],["matInput","","formControlName","versao","readonly","true"],["matInput","","formControlName","subconta","readonly","true"],["field","","appearance","outline",1,"col-max"],["matInput","","formControlName","nivel",3,"readonly"],[1,"col-med-2"],["field","","appearance","outline","class","col-max",4,"ngIf"],[1,"col-med-1"],["matInput","","formControlName","descricao",3,"readonly"],[4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["formControlName","tipo"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","tipo_",3,"readonly"],["formControlName","controle"],["matInput","","formControlName","controle_",3,"readonly"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,e){if(1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span"),t.TgZ(3,"mat-label"),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"form",1),t.TgZ(6,"div",2),t.TgZ(7,"mat-form-field",3),t.TgZ(8,"mat-label"),t._uU(9,"Conta"),t.qZA(),t._UZ(10,"input",4),t.qZA(),t.TgZ(11,"mat-form-field",3),t.TgZ(12,"mat-label"),t._uU(13,"Vers\xe3o"),t.qZA(),t._UZ(14,"input",5),t.qZA(),t.TgZ(15,"mat-form-field",3),t.TgZ(16,"mat-label"),t._uU(17,"SubConta"),t.qZA(),t._UZ(18,"input",6),t.qZA(),t.TgZ(19,"mat-form-field",7),t.TgZ(20,"mat-label"),t._uU(21,"Nivel:"),t.qZA(),t._UZ(22,"input",8),t.qZA(),t.qZA(),t.TgZ(23,"div",9),t.YNc(24,kt,5,1,"mat-form-field",10),t.YNc(25,Ot,4,1,"mat-form-field",10),t.YNc(26,Ut,5,1,"mat-form-field",10),t.YNc(27,yt,4,1,"mat-form-field",10),t.qZA(),t.TgZ(28,"div",11),t.TgZ(29,"mat-form-field",3),t.TgZ(30,"mat-label"),t._uU(31,"Descri\xe7\xe3o"),t.qZA(),t._UZ(32,"input",12),t.YNc(33,Jt,2,0,"mat-error",13),t.qZA(),t.qZA(),t.TgZ(34,"div",14),t.YNc(35,Ft,2,1,"button",15),t.TgZ(36,"button",16),t.NdJ("click",function(){return e.onCancel()}),t._uU(37),t.qZA(),t.qZA(),t.qZA()),2&o){let i;t.xp6(4),t.Oqu(e.labelCadastro),t.xp6(1),t.Q6J("formGroup",e.formulario),t.xp6(17),t.Q6J("readonly",e.readOnly),t.xp6(2),t.Q6J("ngIf",e.idAcao!=e.getAcoes().Consulta&&e.idAcao!=e.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",e.idAcao==e.getAcoes().Consulta||e.idAcao==e.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",e.idAcao!=e.getAcoes().Consulta&&e.idAcao!=e.getAcoes().Exclusao&&e.idAcao!=e.getAcoes().Edicao),t.xp6(1),t.Q6J("ngIf",e.idAcao==e.getAcoes().Consulta||e.idAcao==e.getAcoes().Exclusao||e.idAcao==e.getAcoes().Edicao),t.xp6(5),t.Q6J("readonly",e.readOnly),t.xp6(1),t.Q6J("ngIf","INVALID"==(null==(i=e.formulario.get("descricao"))?null:i.status)&&e.touchedOrDirty("descricao")),t.xp6(2),t.Q6J("ngIf",3!=e.idAcao),t.xp6(2),t.Oqu(e.getLabelCancel())}},directives:[S.Ye,b.hX,c._Y,c.JL,c.sg,b.KE,q.Nt,c.Fj,c.JJ,c.u,d.O5,I.lW,k.gD,d.sg,O.ey,b.TO],styles:[""]}),a})();class Z{constructor(){this.nivel=0,this.subNivelOld="",this.subNivelNew="",this.ct=0}}let Mt=(()=>{class a{transform(o){return o.length>=4?o.substring(0,2)+"."+o.substring(2,4):o}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275pipe=t.Yjl({name:"versaopipe",type:a,pure:!0}),a})();function Pt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(o),t.oxw().onOrdenar()}),t.TgZ(1,"mat-icon",9),t._uU(2,"sort"),t.qZA(),t.qZA()}}function Yt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(o),t.oxw().onUpdateAll()}),t.TgZ(1,"mat-icon",11),t._uU(2,"check_box"),t.qZA(),t.qZA()}}function Qt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSaveAll()}),t.TgZ(1,"mat-icon",13),t._uU(2,"check"),t.qZA(),t.qZA()}}function $t(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){return t.CHM(o),t.oxw().onRetorno()}),t.TgZ(1,"mat-icon",11),t._uU(2,"cancel"),t.qZA(),t.qZA()}}function Bt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(o),t.oxw().onRetorno()}),t.TgZ(1,"mat-icon"),t._uU(2,"arrow_back"),t.qZA(),t.qZA()}}function Dt(a,s){if(1&a&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.nivel),t.xp6(1),t.hij(" ",o.descricao," ")}}function Lt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"td",29),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(),r=i.$implicit,n=i.index,l=t.oxw(2);return l.escolha(r,l.getAcoes().Consulta,n)}),t._uU(1),t.ALo(2,"subconta"),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o.subconta)," ")}}function Ht(a,s){if(1&a&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"versaopipe"),t.qZA()),2&a){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o.versao)," ")}}function Gt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"td",31),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(),r=i.$implicit,n=i.index,l=t.oxw(2);return l.escolha(r,l.getAcoes().Consulta,n)}),t._uU(1),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.descricao," ")}}function Kt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"td",32),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(),r=i.$implicit,n=i.index,l=t.oxw(2);return l.escolha(r,l.getAcoes().Consulta,n)}),t._uU(1),t.ALo(2,"tipoConta"),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o.tipo)," ")}}function jt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2),r=i.$implicit,n=i.index;return t.oxw(2).onIncluirSubConta(r,n)}),t.TgZ(1,"mat-icon"),t._uU(2,"trending_down"),t.qZA(),t.qZA()}}function Rt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"td",33),t.TgZ(1,"button",34),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(),r=i.$implicit,n=i.index;return t.oxw(2).onIncluirConta(r,n)}),t.TgZ(2,"mat-icon"),t._uU(3,"add_circle_outline"),t.qZA(),t.qZA(),t.YNc(4,jt,3,0,"button",35),t.TgZ(5,"button",36),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(),r=i.$implicit,n=i.index,l=t.oxw(2);return l.escolha(r,l.getAcoes().Exclusao,n)}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t.qZA(),t.TgZ(8,"button",37),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(),r=i.$implicit,n=i.index,l=t.oxw(2);return l.escolha(r,l.getAcoes().Edicao,n)}),t.TgZ(9,"mat-icon"),t._uU(10,"edit"),t.qZA(),t.qZA(),t.qZA()}if(2&a){const o=t.oxw().$implicit;t.xp6(4),t.Q6J("ngIf","O"!=o.tipo&&o.nivel>=1&&o.nivel<=6)}}function zt(a,s){if(1&a&&(t.TgZ(0,"tr"),t.YNc(1,Lt,3,3,"td",24),t.YNc(2,Ht,3,3,"td",25),t.YNc(3,Gt,2,1,"td",26),t.YNc(4,Kt,3,3,"td",27),t.YNc(5,Rt,11,1,"td",28),t.qZA()),2&a){const o=s.$implicit,e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.showNivel(o.nivel)),t.xp6(1),t.Q6J("ngIf",e.showNivel(o.nivel)),t.xp6(1),t.Q6J("ngIf",e.showNivel(o.nivel)),t.xp6(1),t.Q6J("ngIf",e.showNivel(o.nivel)),t.xp6(1),t.Q6J("ngIf",e.showNivel(o.nivel))}}function Wt(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",16),t.TgZ(2,"form",17),t.TgZ(3,"mat-form-field",18),t.TgZ(4,"mat-label"),t._uU(5,"Nivel"),t.qZA(),t.TgZ(6,"mat-select",19),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onFiltrar()}),t.YNc(7,Dt,2,2,"mat-option",20),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"table"),t.TgZ(9,"tr",21),t.TgZ(10,"th"),t._uU(11,"Conta"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Vers\xe3o"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Descri\xe7\xe3o"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Tipo"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"A\xe7\xe3o"),t.qZA(),t.qZA(),t.YNc(20,zt,6,5,"tr",22),t.qZA(),t.qZA()}if(2&a){const o=t.oxw();t.xp6(2),t.Q6J("formGroup",o.parametros),t.xp6(5),t.Q6J("ngForOf",o.niveis),t.xp6(13),t.Q6J("ngForOf",o.estruturas)}}function Xt(a,s){if(1&a&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.tipo),t.xp6(1),t.hij(" ",o.descricao," ")}}function to(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",18),t.TgZ(1,"mat-label"),t._uU(2,"Tipo:"),t.qZA(),t.TgZ(3,"mat-select",52),t.YNc(4,Xt,2,2,"mat-option",20),t.qZA(),t.qZA()),2&a){const o=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",o.tipos)}}function oo(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",18),t.TgZ(1,"mat-label"),t._uU(2,"Tipo:"),t.qZA(),t._UZ(3,"input",53),t.qZA()),2&a){const o=t.oxw(2);t.xp6(3),t.Q6J("readonly",o.readOnly)}}function eo(a,s){if(1&a&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&a){const o=s.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function ao(a,s){if(1&a&&(t.TgZ(0,"mat-form-field",18),t.TgZ(1,"mat-label"),t._uU(2,"Controle:"),t.qZA(),t.TgZ(3,"mat-select",54),t.YNc(4,eo,2,2,"mat-option",20),t.qZA(),t.qZA()),2&a){const o=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",o.respostas)}}function io(a,s){1&a&&(t.TgZ(0,"mat-form-field",18),t.TgZ(1,"mat-label"),t._uU(2,"Controle:"),t.qZA(),t._UZ(3,"input",55),t.qZA()),2&a&&(t.xp6(3),t.Q6J("readonly",!0))}function ro(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Descri\xe7\xe3o m\xe1ximo 300 letras"),t.qZA())}function so(a,s){1&a&&(t.TgZ(0,"div"),t.TgZ(1,"mat-label",56),t._uU(2,"Aten\xe7\xe3o!!"),t.qZA(),t._UZ(3,"br"),t._UZ(4,"br"),t.TgZ(5,"mat-label",57),t._uU(6,"Todos Os SubN\xedveis Ser\xe3o Excluidos Tamb\xe9m."),t.qZA(),t.qZA())}function no(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).onSubmit()}),t._uU(1),t.qZA()}if(2&a){const o=t.oxw(2);t.xp6(1),t.Oqu(o.acao)}}function uo(a,s){if(1&a){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"form",39),t.TgZ(2,"div",40),t.TgZ(3,"mat-form-field",41),t.TgZ(4,"mat-label"),t._uU(5,"Conta"),t.qZA(),t._UZ(6,"input",42),t.qZA(),t.TgZ(7,"mat-form-field",41),t.TgZ(8,"mat-label"),t._uU(9,"Vers\xe3o"),t.qZA(),t._UZ(10,"input",43),t.qZA(),t.TgZ(11,"mat-form-field",41),t.TgZ(12,"mat-label"),t._uU(13,"SubConta"),t.qZA(),t._UZ(14,"input",44),t.qZA(),t.TgZ(15,"mat-form-field",18),t.TgZ(16,"mat-label"),t._uU(17,"Nivel:"),t.qZA(),t._UZ(18,"input",45),t.qZA(),t.YNc(19,to,5,1,"mat-form-field",46),t.YNc(20,oo,4,1,"mat-form-field",46),t.YNc(21,ao,5,1,"mat-form-field",46),t.YNc(22,io,4,1,"mat-form-field",46),t.qZA(),t.TgZ(23,"div",47),t.TgZ(24,"mat-form-field",41),t.TgZ(25,"mat-label"),t._uU(26,"Descri\xe7\xe3o"),t.qZA(),t._UZ(27,"input",48),t.YNc(28,ro,2,0,"mat-error",7),t.qZA(),t.qZA(),t.YNc(29,so,7,0,"div",7),t.TgZ(30,"div",49),t.YNc(31,no,2,1,"button",50),t.TgZ(32,"button",51),t.NdJ("click",function(){return t.CHM(o),t.oxw().onCancel()}),t._uU(33),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const o=t.oxw();let e;t.xp6(1),t.Q6J("formGroup",o.formulario),t.xp6(17),t.Q6J("readonly",o.readOnly),t.xp6(1),t.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",o.idAcao==o.getAcoes().Consulta||o.idAcao==o.getAcoes().Exclusao),t.xp6(1),t.Q6J("ngIf",o.idAcao!=o.getAcoes().Consulta&&o.idAcao!=o.getAcoes().Exclusao&&o.idAcao!=o.getAcoes().Edicao),t.xp6(1),t.Q6J("ngIf",o.idAcao==o.getAcoes().Consulta||o.idAcao==o.getAcoes().Exclusao||o.idAcao==o.getAcoes().Edicao),t.xp6(5),t.Q6J("readonly",o.readOnly),t.xp6(1),t.Q6J("ngIf","INVALID"==(null==(e=o.formulario.get("descricao"))?null:e.status)&&o.touchedOrDirty("descricao")),t.xp6(1),t.Q6J("ngIf",o.idAcao==o.getAcoes().Exclusao),t.xp6(2),t.Q6J("ngIf",3!=o.idAcao),t.xp6(2),t.Oqu(o.getLabelCancel())}}const co=[{path:"",redirectTo:"estruturas",pathMatch:"full"},{path:"estruturas",component:ut},{path:"estrutura/:id_empresa/:conta/:versao/:subconta/:acao",component:Vt},{path:"estruturasemcontrole/:id_empresa/:conta/:versao/:subconta/:acao",component:W},{path:"subconta/:id_empresa/:conta/:versao/:subconta/:descricao/:nivel/:controle/:acao",component:It},{path:"treeconta/:id_empresa/:conta/:versao/:subconta/:descricao/:nivel",component:(()=>{class a{constructor(o,e,i,r,n,l){this.estruturaService=o,this.route=e,this.router=i,this.appSnackBar=r,this.formBuilder=n,this.globalService=l,this.estrutura=new h.c,this.acao="Sem Defini\xe7\xe3o",this.idAcao=99,this.readOnly=!0,this.tipos=[{tipo:"C",descricao:"CONTA"},{tipo:"S",descricao:"SUBCONTA"},{tipo:"O",descricao:"OPERACIONAL"}],this.respostas=[{sigla:"S",descricao:"SIM"},{sigla:"N",descricao:"N\xc3O"}],this.durationInSeconds=2,this.labelCadastro="",this.id_empresa=0,this.conta="",this.versao="",this.subconta="",this.descricao="",this.nivel=0,this.maxNivel=7,this.estruturas=[],this.estru=new h.c,this.index=0,this.contadores=[0,0,0,0,0,0,0,0,0],this.niveis=[{nivel:1,descricao:"NIvel 01"},{nivel:2,descricao:"NIvel 02"},{nivel:3,descricao:"NIvel 03"},{nivel:4,descricao:"NIvel 04"},{nivel:5,descricao:"NIvel 05"},{nivel:6,descricao:"NIvel 06"},{nivel:7,descricao:"Todos Os N\xedveis"}],this.log=!1,this.log2=!0,this.lsEstruturas=[],this.lsNIveis=[],this.indexEstrutura=0,this.inscricaoRota=this.route.params.subscribe(p=>{this.id_empresa=p.id_empresa,this.conta=p.conta,this.versao=p.versao,this.subconta=p.subconta,this.descricao=p.descricao,this.nivel=p.nivel}),this.formulario=n.group({conta:[{value:""}],versao:[{value:""}],subconta:[{value:""},[c.kI.required,c.kI.minLength(2),c.kI.maxLength(14)]],descricao:[{value:""},[c.kI.required,c.kI.minLength(1),c.kI.maxLength(300)]],nivel:[{value:""}],tipo:[{value:""},[(0,C.S)(1,2,!0)]],tipo_:[{value:""}],controle:[{value:""},[(0,C.S)(1,2,!0)]],controle_:[{value:""}]}),this.parametros=n.group({nivel:[null]}),this.estrutura=new h.c,this.contadores[0]=1,this.contadores[1]=+this.conta,this.setParametros()}ngOnInit(){this.idAcao=99,this.setAcao(this.idAcao),this.getEstruturas()}ngOnDestroy(){var o,e,i;null===(o=this.inscricaoRota)||void 0===o||o.unsubscribe(),null===(e=this.inscricaoGetFiltro)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoSaveAll)||void 0===i||i.unsubscribe()}getEstruturas(){let o=new F.W;o.id_empresa=this.id_empresa,o.conta=this.conta,o.versao=this.versao,o.orderby="SubConta",16==this.globalService.getUsuario().id&&(o.controle=""),this.globalService.setSpin(!0),this.inscricaoGetFiltro=this.estruturaService.getEstruturas(o).subscribe(e=>{this.globalService.setSpin(!1),this.estruturas=e},e=>{this.globalService.setSpin(!1),this.estruturas=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Estruturas ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}onRetorno(){this.router.navigate(["/estruturas"])}setValue(){this.formulario.setValue({conta:this.estrutura.conta,versao:this.estrutura.versao,subconta:this.estrutura.subconta,descricao:this.estrutura.descricao,nivel:this.estrutura.nivel,tipo:this.estrutura.tipo,tipo_:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao?this.tipos[this.tipos.findIndex(o=>o.tipo==this.estrutura.tipo)].descricao:"",controle:this.estrutura.controle,controle_:this.idAcao==u.I.Consulta||this.idAcao==u.I.Exclusao||this.idAcao==u.I.Edicao?this.respostas[this.respostas.findIndex(o=>o.sigla==this.estrutura.controle)].descricao:""})}setParametros(){this.parametros.setValue({nivel:this.maxNivel})}getAcoes(){return u.I}touchedOrDirty(o){var e,i;return!(!(null===(e=this.formulario.get(o))||void 0===e?void 0:e.touched)&&!(null===(i=this.formulario.get(o))||void 0===i?void 0:i.dirty))}onSubmit(){this.formulario.valid?this.executaAcao():this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK")}onCancel(){this.idAcao=99}executaAcao(){switch(this.estrutura.conta=this.formulario.value.conta,this.estrutura.versao=this.formulario.value.versao,this.estrutura.subconta=this.formulario.value.subconta,this.estrutura.descricao=this.formulario.value.descricao,this.estrutura.nivel=this.formulario.value.nivel,this.estrutura.tipo=this.formulario.value.tipo,this.estrutura.controle=this.formulario.value.controle,+this.idAcao){case u.I.Inclusao:this.IncluirConta(),this.idAcao=99,this.setAcao(this.idAcao);break;case u.I.Edicao:this.estruturas[this.indexEstrutura]=this.estrutura,this.idAcao=99,this.setAcao(this.idAcao);break;case u.I.Exclusao:this.deleteEstrutura(this.estrutura.subconta),this.idAcao=99,this.setAcao(this.idAcao)}}onFiltrar(){this.maxNivel=this.parametros.value.nivel}delay(o){return new Promise(e=>setTimeout(e,o))}getLabelCancel(){return this.idAcao==u.I.Consulta?"Voltar":"Cancelar"}escolha(o,e,i){99==e?this.idAcao=e:(this.estrutura=new h.c,this.estrutura.id_empresa=o.id_empresa,this.estrutura.conta=o.conta,this.estrutura.versao=o.versao,this.estrutura.subconta=o.subconta,this.estrutura.nivel=o.nivel,this.estrutura.nivel_maxi=o.nivel_maxi,this.estrutura.tipo=o.tipo,this.estrutura.descricao=o.descricao,this.estrutura.user_insert=o.user_insert,this.estrutura.user_update=o.user_update,this.estrutura.status=o.status,this.idAcao=e,this.indexEstrutura=i,this.setValue(),this.setAcao(this.idAcao))}setAcao(o){if(99==o)this.labelCadastro="Estruturas: "+this.descricao+" Vers\xe3o: "+this.versao.substring(0,2)+"."+this.versao.substring(2,4);else switch(+o){case u.I.Inclusao:this.acao="Gravar",this.labelCadastro="Estruturas - Inclus\xe3o Novo T\xf3pico",this.readOnly=!1;break;case u.I.Edicao:this.acao="Gravar",this.labelCadastro="Estruturas - Altera\xe7\xe3o.",this.readOnly=!1;break;case u.I.Consulta:this.acao="Voltar",this.labelCadastro="Estruturas - Consulta.",this.readOnly=!0;break;case u.I.Exclusao:this.acao="Excluir",this.labelCadastro="Estruturas - Exclus\xe3o.",this.readOnly=!0}}addLeadingZeros(o,e){return String(o).padStart(e,"0")}showNivel(o){return o<=this.maxNivel}getSpace(o){for(var e="",i=0;i<o;i++)e+="&#160";return e}onIncluirSubConta(o,e){this.estru=o,this.index=e,this.idAcao=u.I.Inclusao,this.setAcao(this.idAcao),this.estrutura=new h.c,this.estrutura.id_empresa=o.id_empresa,this.estrutura.conta=o.conta,this.estrutura.versao=o.versao,this.estrutura.subconta=o.subconta.trim()+"XX",this.estrutura.nivel=o.nivel+1,this.estrutura.descricao="",this.estrutura.tipo=o.tipo,this.estrutura.status=o.status,this.estrutura.user_insert=1,this.setValue()}onIncluirConta(o,e){this.estru=o,this.index=e,this.idAcao=u.I.Inclusao,this.setAcao(this.idAcao),this.estrutura=new h.c,this.estrutura.id_empresa=o.id_empresa,this.estrutura.conta=o.conta,this.estrutura.versao=o.versao,this.estrutura.subconta=o.subconta.substring(0,2*(o.nivel-1))+"XX",this.estrutura.nivel=o.nivel,this.estrutura.descricao="",this.estrutura.tipo=o.tipo,this.estrutura.status=1,this.estrutura.user_insert=1,this.setValue()}IncluirConta(){var o=new Z,e=1;for(this.estruturas.splice(this.index+1,0,this.estrutura),this.lsNIveis=[],e=1;e<=7;e++)this.estruturas.forEach(r=>{r.nivel==e&&this.addNivel(r.subconta,r.nivel)});this.lsNIveis=this.lsNIveis.sort((r,n)=>r.subNivelOld<n.subNivelOld?-1:r.subNivelOld>n.subNivelOld?1:0),console.log("Tabela De Niveis Montada:"),this.lsNIveis.forEach(r=>{console.log("==>",r)});for(var i=0;i<this.estruturas.length;i++)-1==(o=this.searchNivel(this.estruturas[i].subconta.trim(),this.estruturas[i].nivel)).ct?console.log("Nao achei..",this.estruturas[i].subconta):(console.log(this.estruturas[i].subconta,"Old",o.subNivelOld,"New",o.subNivelNew),this.estruturas[i].subconta=o.subNivelNew);this.estruturas=this.estruturas.sort((r,n)=>r.subconta<n.subconta?-1:r.subconta>n.subconta?1:0)}addNivel(o,e){var i=new Z,n=new Z,l=o;return i.ct=-1,-1==i.ct&&(1==e?(i.ct=0,i.nivel=e,i.subNivelOld=o.trim(),i.subNivelNew=o.trim(),this.lsNIveis.push(i)):(i.ct=0,i.nivel=e,i.subNivelOld=l,n=this.searchContador(i.subNivelOld,i.nivel),i.ct=0,console.log("Existe..:",l,n),i.subNivelNew=n.subNivelNew+this.addLeadingZeros(n.ct,2),this.lsNIveis.push(i),console.log("Existe..:",l,n))),i}searchNivel(o,e){var i=new Z;return i.ct=-1,this.lsNIveis.forEach(r=>{r.nivel==e&&r.subNivelOld.trim()==o.trim()&&(i.nivel=r.nivel,i.subNivelOld=r.subNivelOld,i.subNivelNew=r.subNivelNew,i.ct=r.ct)}),i}searchContador(o,e){var i=new Z;return i.ct=-1,e--,this.lsNIveis.forEach(n=>{o.substring(0,2*e)==n.subNivelOld.substring(0,2*e)&&n.nivel==e&&(n.ct=++n.ct,i=n)}),i}searchNivelNew(o,e){var i=new Z;return i.ct=-1,this.lsNIveis.forEach(r=>{r.nivel==e&&r.subNivelOld.trim()==o.trim()&&(i.ct=0,i.nivel=e,i.subNivelOld=o.trim(),i.subNivelNew=r.subNivelNew.trim())}),-1==i.ct&&(i.ct=0,i.nivel=e,i.subNivelOld=o,i.subNivelNew="????"),i}subContas(o,e){var n=0;console.log("Passei ",o,e),1==e?n=1:(n=1,console.log("Passagem 2",o));for(var l=0;l<this.estruturas.length;l++)1!=this.estruturas[l].nivel&&o==this.estruturas[l].subconta.substring(0,2*(this.estruturas[l].nivel-n))&&(console.log("Estrutura",this.estruturas[l].subconta,this.estruturas[l].descricao),this.estruturas[l].subconta.substring(0,2*this.estru.nivel))}deleteEstrutura(o){new Z,this.lsNIveis=[],this.estruturas=this.estruturas.filter(r=>r.subconta.trim().substring(0,o.trim().length)!==o.trim()),this.onOrdenar()}novoVersao(){var o=this.versao,e=this.versao.substring(0,2),i=this.versao.substring(2,4);if(isNaN(Number(i)))this.appSnackBar.openFailureSnackBar("Erro Na Vers\xe3o","OK");else{var r=Number(i);o=`${e}${this.addLeadingZeros(++r,2)}`}return o}onOrdenar(){var o=new Z,e=1;for(this.lsNIveis=[],e=1;e<=7;e++)this.estruturas.forEach(r=>{r.nivel==e&&this.addNivel(r.subconta,r.nivel)});this.lsNIveis=this.lsNIveis.sort((r,n)=>r.subNivelOld<n.subNivelOld?-1:r.subNivelOld>n.subNivelOld?1:0);for(var i=0;i<this.estruturas.length;i++)o=this.searchNivel(this.estruturas[i].subconta.trim(),this.estruturas[i].nivel),this.estruturas[i].subconta=o.subNivelNew;this.estruturas=this.estruturas.sort((r,n)=>r.subconta<n.subconta?-1:r.subconta>n.subconta?1:0)}onSaveAll(){var o=this.novoVersao();this.estruturas.forEach(e=>{e.versao=o}),this.globalService.setSpin(!0),this.inscricaoSaveAll=this.estruturaService.EstruturaSaveAll(this.estruturas,this.versao).subscribe(e=>{this.globalService.setSpin(!1),this.estruturas=e,this.versao=this.estruturas[0].versao,this.setAcao(this.idAcao),this.appSnackBar.openSuccessSnackBar(`Estrutura Gravada Na Vers\xe3o ${this.versao}`,"OK")},e=>{this.globalService.setSpin(!1),this.estruturas=[],this.appSnackBar.openFailureSnackBar(`Falha Na Estrutura  ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")})}onUpdateAll(){this.globalService.setSpin(!0),this.inscricaoSaveAll=this.estruturaService.EstruturaUpdateAll(this.estruturas).subscribe(o=>{this.globalService.setSpin(!1),this.estruturas=o,this.versao=this.estruturas[0].versao,this.setAcao(this.idAcao),this.appSnackBar.openSuccessSnackBar("Estrutura Atualizada!","OK")},o=>{this.globalService.setSpin(!1),this.estruturas=[],this.appSnackBar.openFailureSnackBar(`Falha Na Estrutura  ${o.error.tabela} - ${o.error.erro} - ${o.error.message}`,"OK")})}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(v.K),t.Y36(g.gz),t.Y36(g.F0),t.Y36(N.W),t.Y36(c.qu),t.Y36(w.U))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-tree-estrutura-v2"]],decls:11,vars:8,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon","matTooltip","Ordenar","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon","matTooltip","Regravar","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon","matTooltip","Gravar Nova Vers\xe3o","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon","matTooltip","Cancelar","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","class","example-icon","aria-label","Example icon-button with share icon","matTooltip","Home","matTooltipPosition","above",3,"click",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Ordenar","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"yellow-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Regravar","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"red-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Gravar Nova Vers\xe3o","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"green-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Cancelar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Home","matTooltipPosition","above",1,"example-icon",3,"click"],[1,"parametros"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","nivel",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],[3,"value"],["class","coluna-codigo",3,"click",4,"ngIf"],["class","coluna-versao",4,"ngIf"],["class","coluna-descricao",3,"click",4,"ngIf"],["class","coluna-acao",3,"click",4,"ngIf"],["class","coluna-acao",4,"ngIf"],[1,"coluna-codigo",3,"click"],[1,"coluna-versao"],[1,"coluna-descricao",3,"click"],[1,"coluna-acao",3,"click"],[1,"coluna-acao"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo T\xf3pico","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo Sub-Item","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Excluir Item","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Editar Item","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Novo Sub-Item","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-6"],["appearance","outline",1,"col-max"],["matInput","","formControlName","conta","readonly","true"],["matInput","","formControlName","versao","readonly","true"],["matInput","","formControlName","subconta","readonly","true"],["matInput","","formControlName","nivel",3,"readonly"],["field","","appearance","outline","class","col-max",4,"ngIf"],[1,"col-med-1"],["matInput","","formControlName","descricao",3,"readonly"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],["formControlName","tipo"],["matInput","","formControlName","tipo_",3,"readonly"],["formControlName","controle"],["matInput","","formControlName","controle_",3,"readonly"],[1,"atencao"],[1,"atencao_mensagem"],["mat-raised-button","","color","primary",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3),t.qZA(),t.YNc(4,Pt,3,0,"button",2),t.YNc(5,Yt,3,0,"button",3),t.YNc(6,Qt,3,0,"button",4),t.YNc(7,$t,3,0,"button",5),t.YNc(8,Bt,3,0,"button",6),t.qZA(),t.qZA(),t.YNc(9,Wt,21,3,"div",7),t.YNc(10,uo,34,11,"div",7)),2&o&&(t.xp6(3),t.Oqu(e.labelCadastro),t.xp6(1),t.Q6J("ngIf",99==e.idAcao&&e.estruturas.length>0),t.xp6(1),t.Q6J("ngIf",99==e.idAcao&&e.estruturas.length>0),t.xp6(1),t.Q6J("ngIf",99==e.idAcao&&e.estruturas.length>0),t.xp6(1),t.Q6J("ngIf",99==e.idAcao),t.xp6(1),t.Q6J("ngIf",99==e.idAcao),t.xp6(1),t.Q6J("ngIf",99==e.idAcao&&e.estruturas.length>0),t.xp6(1),t.Q6J("ngIf",99!=e.idAcao))},directives:[S.Ye,d.O5,I.lW,V.gM,U.Hw,c._Y,c.JL,c.sg,b.KE,b.hX,k.gD,c.JJ,c.u,d.sg,O.ey,q.Nt,c.Fj,b.TO],pipes:[D.M,Mt,M],styles:["Atividade[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;overflow-y:scroll;width:100%;height:500px}table[_ngcontent-%COMP%]{width:100%;cursor:pointer}.coluna-codigo[_ngcontent-%COMP%]{background-color:#878684;font-weight:bolder;text-align:left}.coluna-versao[_ngcontent-%COMP%]{background-color:#878684;font-weight:bolder;text-align:center}.coluna-descricao[_ngcontent-%COMP%]{background-color:#a9ad9e;text-align:justify;height:auto}.coluna-acao[_ngcontent-%COMP%]{background-color:#e1e7d3;text-align:center;font-weight:400}.coluna-cabec[_ngcontent-%COMP%]{background-color:#e3bd11;text-align:center}.buttons[_ngcontent-%COMP%]{margin-top:12px;align-items:center}"]}),a})()}];let lo=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[g.Bz.forChild(co)],g.Bz]}),a})();var mo=m(2559),po=m(5426),ho=m(4466);let _o=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[d.ez,lo,po.q,c.u5,c.UX,ho.m,mo.yI.forChild()]]}),a})()},6468:(Y,x,m)=>{m.d(x,{w:()=>d});class d{constructor(){this.id_empresa=0,this.id=0,this.ativo="",this.razao="",this.cnpj_cpf="",this.grupo=[],this.timer="",this.ticket="",this.flag_ponte="",this.data="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},8239:(Y,x,m)=>{function d(f,E,h,c,u,C,A){try{var t=f[C](A),v=t.value}catch(J){return void h(J)}t.done?E(v):Promise.resolve(v).then(c,u)}function g(f){return function(){var E=this,h=arguments;return new Promise(function(c,u){var C=f.apply(E,h);function A(v){d(C,c,u,A,t,"next",v)}function t(v){d(C,c,u,A,t,"throw",v)}A(void 0)})}}m.d(x,{Z:()=>g})}}]);